!function(){"use strict";var e,t,i,n,o,r,a,s,l=function(e,t,i){var n=t.getBoundingClientRect(),o={top:n.top,height:n.height,bottom:n.bottom};if(i!==t.ownerDocument.defaultView){var r=e.getBoundingClientRect();o.top=r.top+n.top,o.height=Math.min(o.height,r.height),o.bottom=o.top+o.height}if(0===o.height)return null;var a=o.height,s=0;return o.top>i.innerHeight||o.bottom<=0?{top:0,height:0,screenHeight:i.innerHeight}:(o.top<0&&(a-=s=-o.top),o.bottom>i.innerHeight&&(a-=o.bottom-i.innerHeight),{top:s,height:a=Math.max(a,0),screenHeight:i.innerHeight})},d=function(){return d=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},d.apply(this,arguments)};function u(e,t,i){if(i||2===arguments.length)for(var n,o=0,r=t.length;o<r;o++)!n&&o in t||(n||(n=Array.prototype.slice.call(t,0,o)),n[o]=t[o]);return e.concat(n||Array.prototype.slice.call(t))}"function"==typeof SuppressedError&&SuppressedError,function(e){e.FlippApp="FlippApp",e.ReebeeApp="ReebeeApp",e.FlippWeb="FlippWeb",e.Flyers="Flyers",e.Hosted="Hosted",e.GMA="GMA",e.Editorials="Editorials",e.Hero="Hero",e.ShopperPlatform="ShopperPlatform",e.Other="Other",e.FlippAvroDefault="FlippAvroDefault"}(e||(e={})),function(e){e.Prod="Prod",e.Dev="Dev",e.Test="Test"}(t||(t={})),function(e){e.StorefrontInline="StorefrontInline",e.StorefrontExpanded="StorefrontExpanded",e.UlpInline="UlpInline",e.UlpExpanded="UlpExpanded"}(i||(i={})),function(e){e.Default="Default",e.Safeframe="Safeframe",e.Enabler="Enabler",e.WebView="WebView"}(n||(n={})),function(e){e.Compact="Compact",e.Classic="Classic",e.Unknown="Unknown"}(o||(o={})),function(e){e.Desktop="Desktop",e.Mobile="Mobile",e.Tablet="Tablet"}(r||(r={})),function(e){e.CA="CA",e.US="US",e.Other="Other"}(a||(a={})),function(e){e.Flyer="Flyer",e.Merchant="Merchant",e.Ecom="Ecom"}(s||(s={}));var c,p="production";!function(e){e.PIXEL="pixel",e.SCRIPT="script"}(c||(c={}));var h=function(){function e(){}return e.prototype.debug=function(){return null},e.prototype.warn=function(e){return console.warn(e),null},e.prototype.error=function(e,t){return console.error(e,t),null},e}(),f=new h,m=new(function(){function e(){this.hasStarted=!1,this.queue=[]}return e.prototype.enqueue=function(e){if(!e||!this.hasStarted)return null;this.queue.push(e)},e.prototype.start=function(){var e=this;return this.hasStarted=!0,window.setInterval((function(){return e.flush(),null}),100),null},e.prototype.stop=function(){return this.hasStarted=!1,null},e.prototype.flush=function(){return this.queue.length?(f.debug("Flushing analytics queue",this.queue),fetch("https://p.flipp.com/beacons",{method:"POST",credentials:"include",headers:{"Content-Type":"text/plain; charset=UTF-8"},body:encodeURIComponent(JSON.stringify(this.queue))}),this.queue=[],null):null},e}());m.start();var v,g,w=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)}))},b=((v={})[c.PIXEL]=function(e,t){var i;try{var n=function(e){var t=Math.floor(1e7+9e7*Math.random());return e.replace(/\[\[random\]\]/g,t.toString())}(e);i=new URL(n)}catch(t){return console.error("Invalid pixel url: ".concat(e)),null}if(t)for(var o in t)i.searchParams.set(o,t[o]);return new Image(1,1).src=i.toString(),null},v[c.SCRIPT]=function(e){var t=document.createElement("script");return t.innerHTML=e,t.id=w(),document.body.append(t),t.remove(),null},v),y=function(){var e=this;this.processedTags=[],this.addTags=function(t){var i;if(!t)return null;var n=function(n){var o=n,r=function(n){var r=n,a=c.PIXEL,s=null===(i=t[o])||void 0===i?void 0:i[r];if(!s)return"continue";Array.isArray(s)||(s=[s]),s.forEach((function(t){var i="";"string"!=typeof t?(a=t.type,i=t.content):i=t,e.processedTags.push({type:a,source:o,event:r,content:i})}))};for(var a in t[o])r(a)};for(var o in t)n(o);return null},this.sendOpen=function(){return f.debug("Tags: Send open"),e.send("open"),null},this.sendEngagement=function(){return f.debug("Tags: Send engagement"),e.send("engagement"),null},this.sendClick=function(t){return f.debug("Tags: Send click"),e.send("click",{flyerItemId:t}),null},this.sendServedImpression=function(){return f.debug("Tags: Send served impression"),e.send("impression"),null},this.sendAnswerClick=function(t){return f.debug("Tags: Send Survey click: "+t),e.send("engagement",{answer:t}),null},this.send=function(t,i){return e.processedTags.filter((function(e){return e.event===t})).forEach((function(e){return function(e,t,i){return b[e](t,i),null}(e.type,e.content,i)})),null}},I=new y;!function(e){e.APP_CONFIG="app-config",e.ANALYTICS_CONFIG="analytics-config",e.INLINE_GEOMETRY="inline-geometry",e.SFML_VIEWPORT="sfml-viewport",e.IFRAME_HEIGHT_RESIZE="iframe-height-resize",e.REQUEST_EXPAND="request-expand",e.END_PREVIEW="end-preview",e.COUNTDOWN_STATE="countdown-state",e.ULP="flipp-ulp",e.MEASURE_TEST="measure-test",e.DYNAMIC_HEADER_ITEMS="dynamic-header-items",e.RESIZE_IFRAME="resize-iframe",e.CALLBACK="callback",e.SEND_EV="send-ev",e.VIMP="flipp-vimp"}(g||(g={}));var E,k,x,C,N,M,S,T,_="CLICK_MEATBALL",P="SHARE_ITEM",z="SEE_ITEM",A="CLIP_ITEM",U="SEE_MERCHANT_ITEM",q="CLIP_MERCHANT_ITEM",L="CLICK",R="CLIP_ECOM_ITEM",O="ITEM_IMPRESSION",D="SEE_ALL_DEALS",$="ERROR",H=function(){function e(e,t,i,n,o,r){this.emitter=e,this.eventType=t,this.listener=i,this.key=n,this.options=o,this.context=r}return e.prototype.remove=function(){var e=this.emitter.getSubscriptions(this.eventType);return e&&delete e[this.key],null},e}(),F=function(){function e(){this.subscriptionsForType=new Map}return e.prototype.addListener=function(e,t,i,n){var o,r=null!==(o=this.subscriptionsForType.get(e))&&void 0!==o?o:[],a=new H(this,e,t,r.length,i,n);return r.push(a),this.subscriptionsForType.set(e,r),a},e.prototype.emit=function(e,t){for(var i,n,o=0,r=null!==(i=this.subscriptionsForType.get(e))&&void 0!==i?i:[];o<r.length;o++){var a=r[o];a.listener.call(a.context,new CustomEvent(e.toString(),{detail:t})),(null===(n=a.options)||void 0===n?void 0:n.once)&&a.remove()}return null},e.prototype.getSubscriptions=function(e){return this.subscriptionsForType.get(e)},e}(),W="message",j=function(){function e(){var e=this;this.addEventListener=function(t,i,n){var o=e.eventEmmiter.addListener(t,i,n);return(null==n?void 0:n.sendRequest)&&n.target&&e.sendMessage("request-"+t,n.requestData,n.target),o},this.sendMessage=function(e,t,i){return void 0===i&&(i=window),i.postMessage({type:e,data:t},"*"),null},this.handleMessage=function(t){return e.isMessageRelevant(t.data)?(e.eventEmmiter.emit(t.data.type,t.data.data),null):null},this.isMessageRelevant=function(e){if(!e.type)return!1;for(var t=0,i=Object.values(g);t<i.length;t++){if(i[t]===e.type)return!0}return!1},this.eventEmmiter=new F,this.start()}return e.prototype.start=function(){return window.addEventListener(W,this.handleMessage),null},e.prototype.stop=function(){return window.removeEventListener(W,this.handleMessage),null},e}(),B=new j;!function(e){e.INLINE="inline",e.DEFAULT="default",e.ULP="ulp",e.SURVEY="survey"}(E||(E={})),function(e){e.SafeFrame="safeframe",e.Enabler="enabler",e.Native="native",e.Demo="demo"}(k||(k={})),function(e){e.SCROLL="scroll",e.ENGAGEMENT="engagement",e.OPEN="open",e.HEARTBEAT="heartbeat"}(x||(x={})),function(e){e.Compact="Compact",e.Classic="Classic",e.Unknown="Unknown"}(C||(C={})),function(e){e.CONTENT_READY="content-ready",e.CONTENT_LOAD_ERROR="content-load-error",e.EXPERIENCE_LOAD="experience-load",e.REQUEST_RESIZE="request-resize",e.REQUEST_GO_TO_URL="request-go-to-url",e.REQUEST_ADD_TO_LIST="request-add-to-list",e.EXPERIENCE_VIEWPORT="experience-viewport"}(N||(N={}));var V=function(){return T||[]},G=function(e,t,i){f.debug("Post Message from Webview to SDK",{type:e,detail:t});var n=JSON.stringify({type:e,detail:t});if("ios"===i&&window.webkit)try{window.webkit.messageHandlers.NativeXBridge.postMessage(n)}catch(e){console.error("Error messaging iOS",e)}else if("android"===i&&window.NativeXBridge)try{window.NativeXBridge.postMessage(n)}catch(e){console.error("Error messaging Android",e)}return null},Y=function(e){return G(N.CONTENT_LOAD_ERROR,{text:"Ad content could not be loaded."},e),null},X=function(e){var t,i=null===(t=document.querySelector("iframe"))||void 0===t?void 0:t.contentWindow;if(!i)return null;var n=d(d({},e.detail),{screenHeight:window.innerHeight});return B.sendMessage(g.INLINE_GEOMETRY,n,i),null},Z=function(e){var t={};return e.map((function(e){switch(e){case"request-add-to-list":t.addToList=!0;break;case"request-go-to-url":t.goToURL=!0}return null})),0===Object.keys(t).length?null:t},K=null,J=function(e){window.flippxp.cookieSynced||setTimeout((function(){var t=new Image;t.src="https://idsync.rlcdn.com/712559.gif?partner_uid=".concat(e),window.flippxp.cookieSynced=!0,t.remove()}),1)};function Q(e){if(void 0===e&&(e={}),K)return J(K),K;if("userKey"in e&&e.userKey&&function(e){return!e.startsWith("#")}(e.userKey))return K=e.userKey,J(K),e.userKey;for(var t="flipp-uid",i=null,n=document.cookie.split(";"),o=0;o<n.length;o++){var r=n[o].split("="),a=r[0],s=r[1];if(a.trim()===t){i=s;break}}return i?(J(i),i):(K=w())?(document.cookie=t+"="+K+"; max-age=31536000; path=/",J(K),K):null}var ee,te,ie="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},ne={exports:{}};ee=ne,te=ne.exports,function(e,t){var i="function",n="undefined",o="object",r="string",a="major",s="model",l="name",d="type",u="vendor",c="version",p="architecture",h="console",f="mobile",m="tablet",v="smarttv",g="wearable",w="embedded",b="Amazon",y="Apple",I="ASUS",E="BlackBerry",k="Browser",x="Chrome",C="Firefox",N="Google",M="Huawei",S="LG",T="Microsoft",_="Motorola",P="Opera",z="Samsung",A="Sharp",U="Sony",q="Xiaomi",L="Zebra",R="Facebook",O="Chromium OS",D="Mac OS",$=function(e){for(var t={},i=0;i<e.length;i++)t[e[i].toUpperCase()]=e[i];return t},H=function(e,t){return typeof e===r&&-1!==F(t).indexOf(F(e))},F=function(e){return e.toLowerCase()},W=function(e,t){if(typeof e===r)return e=e.replace(/^\s\s*/,""),typeof t===n?e:e.substring(0,350)},j=function(e,n){for(var r,a,s,l,d,u,c=0;c<n.length&&!d;){var p=n[c],h=n[c+1];for(r=a=0;r<p.length&&!d&&p[r];)if(d=p[r++].exec(e))for(s=0;s<h.length;s++)u=d[++a],typeof(l=h[s])===o&&l.length>0?2===l.length?typeof l[1]==i?this[l[0]]=l[1].call(this,u):this[l[0]]=l[1]:3===l.length?typeof l[1]!==i||l[1].exec&&l[1].test?this[l[0]]=u?u.replace(l[1],l[2]):t:this[l[0]]=u?l[1].call(this,u,l[2]):t:4===l.length&&(this[l[0]]=u?l[3].call(this,u.replace(l[1],l[2])):t):this[l]=u||t;c+=2}},B=function(e,i){for(var n in i)if(typeof i[n]===o&&i[n].length>0){for(var r=0;r<i[n].length;r++)if(H(i[n][r],e))return"?"===n?t:n}else if(H(i[n],e))return"?"===n?t:n;return e},V={ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"},G={browser:[[/\b(?:crmo|crios)\/([\w\.]+)/i],[c,[l,"Chrome"]],[/edg(?:e|ios|a)?\/([\w\.]+)/i],[c,[l,"Edge"]],[/(opera mini)\/([-\w\.]+)/i,/(opera [mobiletab]{3,6})\b.+version\/([-\w\.]+)/i,/(opera)(?:.+version\/|[\/ ]+)([\w\.]+)/i],[l,c],[/opios[\/ ]+([\w\.]+)/i],[c,[l,P+" Mini"]],[/\bopr\/([\w\.]+)/i],[c,[l,P]],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/ ]?([\w\.]*)/i,/(avant |iemobile|slim)(?:browser)?[\/ ]?([\w\.]*)/i,/(ba?idubrowser)[\/ ]?([\w\.]+)/i,/(?:ms|\()(ie) ([\w\.]+)/i,/(flock|rockmelt|midori|epiphany|silk|skyfire|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark|qupzilla|falkon|rekonq|puffin|brave|whale(?!.+naver)|qqbrowserlite|qq|duckduckgo)\/([-\w\.]+)/i,/(heytap|ovi)browser\/([\d\.]+)/i,/(weibo)__([\d\.]+)/i],[l,c],[/(?:\buc? ?browser|(?:juc.+)ucweb)[\/ ]?([\w\.]+)/i],[c,[l,"UC"+k]],[/microm.+\bqbcore\/([\w\.]+)/i,/\bqbcore\/([\w\.]+).+microm/i],[c,[l,"WeChat(Win) Desktop"]],[/micromessenger\/([\w\.]+)/i],[c,[l,"WeChat"]],[/konqueror\/([\w\.]+)/i],[c,[l,"Konqueror"]],[/trident.+rv[: ]([\w\.]{1,9})\b.+like gecko/i],[c,[l,"IE"]],[/ya(?:search)?browser\/([\w\.]+)/i],[c,[l,"Yandex"]],[/(avast|avg)\/([\w\.]+)/i],[[l,/(.+)/,"$1 Secure "+k],c],[/\bfocus\/([\w\.]+)/i],[c,[l,C+" Focus"]],[/\bopt\/([\w\.]+)/i],[c,[l,P+" Touch"]],[/coc_coc\w+\/([\w\.]+)/i],[c,[l,"Coc Coc"]],[/dolfin\/([\w\.]+)/i],[c,[l,"Dolphin"]],[/coast\/([\w\.]+)/i],[c,[l,P+" Coast"]],[/miuibrowser\/([\w\.]+)/i],[c,[l,"MIUI "+k]],[/fxios\/([-\w\.]+)/i],[c,[l,C]],[/\bqihu|(qi?ho?o?|360)browser/i],[[l,"360 "+k]],[/(oculus|samsung|sailfish|huawei)browser\/([\w\.]+)/i],[[l,/(.+)/,"$1 "+k],c],[/(comodo_dragon)\/([\w\.]+)/i],[[l,/_/g," "],c],[/(electron)\/([\w\.]+) safari/i,/(tesla)(?: qtcarbrowser|\/(20\d\d\.[-\w\.]+))/i,/m?(qqbrowser|baiduboxapp|2345Explorer)[\/ ]?([\w\.]+)/i],[l,c],[/(metasr)[\/ ]?([\w\.]+)/i,/(lbbrowser)/i,/\[(linkedin)app\]/i],[l],[/((?:fban\/fbios|fb_iab\/fb4a)(?!.+fbav)|;fbav\/([\w\.]+);)/i],[[l,R],c],[/(kakao(?:talk|story))[\/ ]([\w\.]+)/i,/(naver)\(.*?(\d+\.[\w\.]+).*\)/i,/safari (line)\/([\w\.]+)/i,/\b(line)\/([\w\.]+)\/iab/i,/(chromium|instagram)[\/ ]([-\w\.]+)/i],[l,c],[/\bgsa\/([\w\.]+) .*safari\//i],[c,[l,"GSA"]],[/musical_ly(?:.+app_?version\/|_)([\w\.]+)/i],[c,[l,"TikTok"]],[/headlesschrome(?:\/([\w\.]+)| )/i],[c,[l,x+" Headless"]],[/ wv\).+(chrome)\/([\w\.]+)/i],[[l,x+" WebView"],c],[/droid.+ version\/([\w\.]+)\b.+(?:mobile safari|safari)/i],[c,[l,"Android "+k]],[/(chrome|omniweb|arora|[tizenoka]{5} ?browser)\/v?([\w\.]+)/i],[l,c],[/version\/([\w\.\,]+) .*mobile\/\w+ (safari)/i],[c,[l,"Mobile Safari"]],[/version\/([\w(\.|\,)]+) .*(mobile ?safari|safari)/i],[c,l],[/webkit.+?(mobile ?safari|safari)(\/[\w\.]+)/i],[l,[c,B,{"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}]],[/(webkit|khtml)\/([\w\.]+)/i],[l,c],[/(navigator|netscape\d?)\/([-\w\.]+)/i],[[l,"Netscape"],c],[/mobile vr; rv:([\w\.]+)\).+firefox/i],[c,[l,C+" Reality"]],[/ekiohf.+(flow)\/([\w\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror|klar)[\/ ]?([\w\.\+]+)/i,/(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([-\w\.]+)$/i,/(firefox)\/([\w\.]+)/i,/(mozilla)\/([\w\.]+) .+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir|obigo|mosaic|(?:go|ice|up)[\. ]?browser)[-\/ ]?v?([\w\.]+)/i,/(links) \(([\w\.]+)/i,/panasonic;(viera)/i],[l,c],[/(cobalt)\/([\w\.]+)/i],[l,[c,/master.|lts./,""]]],cpu:[[/(?:(amd|x(?:(?:86|64)[-_])?|wow|win)64)[;\)]/i],[[p,"amd64"]],[/(ia32(?=;))/i],[[p,F]],[/((?:i[346]|x)86)[;\)]/i],[[p,"ia32"]],[/\b(aarch64|arm(v?8e?l?|_?64))\b/i],[[p,"arm64"]],[/\b(arm(?:v[67])?ht?n?[fl]p?)\b/i],[[p,"armhf"]],[/windows (ce|mobile); ppc;/i],[[p,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?: mac|;|\))/i],[[p,/ower/,"",F]],[/(sun4\w)[;\)]/i],[[p,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|\barm(?=v(?:[1-7]|[5-7]1)l?|;|eabi)|(?=atmel )avr|(?:irix|mips|sparc)(?:64)?\b|pa-risc)/i],[[p,F]]],device:[[/\b(sch-i[89]0\d|shw-m380s|sm-[ptx]\w{2,4}|gt-[pn]\d{2,4}|sgh-t8[56]9|nexus 10)/i],[s,[u,z],[d,m]],[/\b((?:s[cgp]h|gt|sm)-\w+|sc[g-]?[\d]+a?|galaxy nexus)/i,/samsung[- ]([-\w]+)/i,/sec-(sgh\w+)/i],[s,[u,z],[d,f]],[/(?:\/|\()(ip(?:hone|od)[\w, ]*)(?:\/|;)/i],[s,[u,y],[d,f]],[/\((ipad);[-\w\),; ]+apple/i,/applecoremedia\/[\w\.]+ \((ipad)/i,/\b(ipad)\d\d?,\d\d?[;\]].+ios/i],[s,[u,y],[d,m]],[/(macintosh);/i],[s,[u,y]],[/\b(sh-?[altvz]?\d\d[a-ekm]?)/i],[s,[u,A],[d,f]],[/\b((?:ag[rs][23]?|bah2?|sht?|btv)-a?[lw]\d{2})\b(?!.+d\/s)/i],[s,[u,M],[d,m]],[/(?:huawei|honor)([-\w ]+)[;\)]/i,/\b(nexus 6p|\w{2,4}e?-[atu]?[ln][\dx][012359c][adn]?)\b(?!.+d\/s)/i],[s,[u,M],[d,f]],[/\b(poco[\w ]+)(?: bui|\))/i,/\b; (\w+) build\/hm\1/i,/\b(hm[-_ ]?note?[_ ]?(?:\d\w)?) bui/i,/\b(redmi[\-_ ]?(?:note|k)?[\w_ ]+)(?: bui|\))/i,/\b(mi[-_ ]?(?:a\d|one|one[_ ]plus|note lte|max|cc)?[_ ]?(?:\d?\w?)[_ ]?(?:plus|se|lite)?)(?: bui|\))/i],[[s,/_/g," "],[u,q],[d,f]],[/\b(mi[-_ ]?(?:pad)(?:[\w_ ]+))(?: bui|\))/i],[[s,/_/g," "],[u,q],[d,m]],[/; (\w+) bui.+ oppo/i,/\b(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007|a101op)\b/i],[s,[u,"OPPO"],[d,f]],[/vivo (\w+)(?: bui|\))/i,/\b(v[12]\d{3}\w?[at])(?: bui|;)/i],[s,[u,"Vivo"],[d,f]],[/\b(rmx[12]\d{3})(?: bui|;|\))/i],[s,[u,"Realme"],[d,f]],[/\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\b[\w ]+build\//i,/\bmot(?:orola)?[- ](\w*)/i,/((?:moto[\w\(\) ]+|xt\d{3,4}|nexus 6)(?= bui|\)))/i],[s,[u,_],[d,f]],[/\b(mz60\d|xoom[2 ]{0,2}) build\//i],[s,[u,_],[d,m]],[/((?=lg)?[vl]k\-?\d{3}) bui| 3\.[-\w; ]{10}lg?-([06cv9]{3,4})/i],[s,[u,S],[d,m]],[/(lm(?:-?f100[nv]?|-[\w\.]+)(?= bui|\))|nexus [45])/i,/\blg[-e;\/ ]+((?!browser|netcast|android tv)\w+)/i,/\blg-?([\d\w]+) bui/i],[s,[u,S],[d,f]],[/(ideatab[-\w ]+)/i,/lenovo ?(s[56]000[-\w]+|tab(?:[\w ]+)|yt[-\d\w]{6}|tb[-\d\w]{6})/i],[s,[u,"Lenovo"],[d,m]],[/(?:maemo|nokia).*(n900|lumia \d+)/i,/nokia[-_ ]?([-\w\.]*)/i],[[s,/_/g," "],[u,"Nokia"],[d,f]],[/(pixel c)\b/i],[s,[u,N],[d,m]],[/droid.+; (pixel[\daxl ]{0,6})(?: bui|\))/i],[s,[u,N],[d,f]],[/droid.+ (a?\d[0-2]{2}so|[c-g]\d{4}|so[-gl]\w+|xq-a\w[4-7][12])(?= bui|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[s,[u,U],[d,f]],[/sony tablet [ps]/i,/\b(?:sony)?sgp\w+(?: bui|\))/i],[[s,"Xperia Tablet"],[u,U],[d,m]],[/ (kb2005|in20[12]5|be20[12][59])\b/i,/(?:one)?(?:plus)? (a\d0\d\d)(?: b|\))/i],[s,[u,"OnePlus"],[d,f]],[/(alexa)webm/i,/(kf[a-z]{2}wi|aeo[c-r]{2})( bui|\))/i,/(kf[a-z]+)( bui|\)).+silk\//i],[s,[u,b],[d,m]],[/((?:sd|kf)[0349hijorstuw]+)( bui|\)).+silk\//i],[[s,/(.+)/g,"Fire Phone $1"],[u,b],[d,f]],[/(playbook);[-\w\),; ]+(rim)/i],[s,u,[d,m]],[/\b((?:bb[a-f]|st[hv])100-\d)/i,/\(bb10; (\w+)/i],[s,[u,E],[d,f]],[/(?:\b|asus_)(transfo[prime ]{4,10} \w+|eeepc|slider \w+|nexus 7|padfone|p00[cj])/i],[s,[u,I],[d,m]],[/ (z[bes]6[027][012][km][ls]|zenfone \d\w?)\b/i],[s,[u,I],[d,f]],[/(nexus 9)/i],[s,[u,"HTC"],[d,m]],[/(htc)[-;_ ]{1,2}([\w ]+(?=\)| bui)|\w+)/i,/(zte)[- ]([\w ]+?)(?: bui|\/|\))/i,/(alcatel|geeksphone|nexian|panasonic(?!(?:;|\.))|sony(?!-bra))[-_ ]?([-\w]*)/i],[u,[s,/_/g," "],[d,f]],[/droid.+; ([ab][1-7]-?[0178a]\d\d?)/i],[s,[u,"Acer"],[d,m]],[/droid.+; (m[1-5] note) bui/i,/\bmz-([-\w]{2,})/i],[s,[u,"Meizu"],[d,f]],[/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron)[-_ ]?([-\w]*)/i,/(hp) ([\w ]+\w)/i,/(asus)-?(\w+)/i,/(microsoft); (lumia[\w ]+)/i,/(lenovo)[-_ ]?([-\w]+)/i,/(jolla)/i,/(oppo) ?([\w ]+) bui/i],[u,s,[d,f]],[/(kobo)\s(ereader|touch)/i,/(archos) (gamepad2?)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\/([\w\.]+)/i,/(nook)[\w ]+build\/(\w+)/i,/(dell) (strea[kpr\d ]*[\dko])/i,/(le[- ]+pan)[- ]+(\w{1,9}) bui/i,/(trinity)[- ]*(t\d{3}) bui/i,/(gigaset)[- ]+(q\w{1,9}) bui/i,/(vodafone) ([\w ]+)(?:\)| bui)/i],[u,s,[d,m]],[/(surface duo)/i],[s,[u,T],[d,m]],[/droid [\d\.]+; (fp\du?)(?: b|\))/i],[s,[u,"Fairphone"],[d,f]],[/(u304aa)/i],[s,[u,"AT&T"],[d,f]],[/\bsie-(\w*)/i],[s,[u,"Siemens"],[d,f]],[/\b(rct\w+) b/i],[s,[u,"RCA"],[d,m]],[/\b(venue[\d ]{2,7}) b/i],[s,[u,"Dell"],[d,m]],[/\b(q(?:mv|ta)\w+) b/i],[s,[u,"Verizon"],[d,m]],[/\b(?:barnes[& ]+noble |bn[rt])([\w\+ ]*) b/i],[s,[u,"Barnes & Noble"],[d,m]],[/\b(tm\d{3}\w+) b/i],[s,[u,"NuVision"],[d,m]],[/\b(k88) b/i],[s,[u,"ZTE"],[d,m]],[/\b(nx\d{3}j) b/i],[s,[u,"ZTE"],[d,f]],[/\b(gen\d{3}) b.+49h/i],[s,[u,"Swiss"],[d,f]],[/\b(zur\d{3}) b/i],[s,[u,"Swiss"],[d,m]],[/\b((zeki)?tb.*\b) b/i],[s,[u,"Zeki"],[d,m]],[/\b([yr]\d{2}) b/i,/\b(dragon[- ]+touch |dt)(\w{5}) b/i],[[u,"Dragon Touch"],s,[d,m]],[/\b(ns-?\w{0,9}) b/i],[s,[u,"Insignia"],[d,m]],[/\b((nxa|next)-?\w{0,9}) b/i],[s,[u,"NextBook"],[d,m]],[/\b(xtreme\_)?(v(1[045]|2[015]|[3469]0|7[05])) b/i],[[u,"Voice"],s,[d,f]],[/\b(lvtel\-)?(v1[12]) b/i],[[u,"LvTel"],s,[d,f]],[/\b(ph-1) /i],[s,[u,"Essential"],[d,f]],[/\b(v(100md|700na|7011|917g).*\b) b/i],[s,[u,"Envizen"],[d,m]],[/\b(trio[-\w\. ]+) b/i],[s,[u,"MachSpeed"],[d,m]],[/\btu_(1491) b/i],[s,[u,"Rotor"],[d,m]],[/(shield[\w ]+) b/i],[s,[u,"Nvidia"],[d,m]],[/(sprint) (\w+)/i],[u,s,[d,f]],[/(kin\.[onetw]{3})/i],[[s,/\./g," "],[u,T],[d,f]],[/droid.+; (cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i],[s,[u,L],[d,m]],[/droid.+; (ec30|ps20|tc[2-8]\d[kx])\)/i],[s,[u,L],[d,f]],[/smart-tv.+(samsung)/i],[u,[d,v]],[/hbbtv.+maple;(\d+)/i],[[s,/^/,"SmartTV"],[u,z],[d,v]],[/(nux; netcast.+smarttv|lg (netcast\.tv-201\d|android tv))/i],[[u,S],[d,v]],[/(apple) ?tv/i],[u,[s,y+" TV"],[d,v]],[/crkey/i],[[s,x+"cast"],[u,N],[d,v]],[/droid.+aft(\w)( bui|\))/i],[s,[u,b],[d,v]],[/\(dtv[\);].+(aquos)/i,/(aquos-tv[\w ]+)\)/i],[s,[u,A],[d,v]],[/(bravia[\w ]+)( bui|\))/i],[s,[u,U],[d,v]],[/(mitv-\w{5}) bui/i],[s,[u,q],[d,v]],[/Hbbtv.*(technisat) (.*);/i],[u,s,[d,v]],[/\b(roku)[\dx]*[\)\/]((?:dvp-)?[\d\.]*)/i,/hbbtv\/\d+\.\d+\.\d+ +\([\w\+ ]*; *([\w\d][^;]*);([^;]*)/i],[[u,W],[s,W],[d,v]],[/\b(android tv|smart[- ]?tv|opera tv|tv; rv:)\b/i],[[d,v]],[/(ouya)/i,/(nintendo) ([wids3utch]+)/i],[u,s,[d,h]],[/droid.+; (shield) bui/i],[s,[u,"Nvidia"],[d,h]],[/(playstation [345portablevi]+)/i],[s,[u,U],[d,h]],[/\b(xbox(?: one)?(?!; xbox))[\); ]/i],[s,[u,T],[d,h]],[/((pebble))app/i],[u,s,[d,g]],[/(watch)(?: ?os[,\/]|\d,\d\/)[\d\.]+/i],[s,[u,y],[d,g]],[/droid.+; (glass) \d/i],[s,[u,N],[d,g]],[/droid.+; (wt63?0{2,3})\)/i],[s,[u,L],[d,g]],[/(quest( 2| pro)?)/i],[s,[u,R],[d,g]],[/(tesla)(?: qtcarbrowser|\/[-\w\.]+)/i],[u,[d,w]],[/(aeobc)\b/i],[s,[u,b],[d,w]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+? mobile safari/i],[s,[d,f]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+?(?! mobile) safari/i],[s,[d,m]],[/\b((tablet|tab)[;\/]|focus\/\d(?!.+mobile))/i],[[d,m]],[/(phone|mobile(?:[;\/]| [ \w\/\.]*safari)|pda(?=.+windows ce))/i],[[d,f]],[/(android[-\w\. ]{0,9});.+buil/i],[s,[u,"Generic"]]],engine:[[/windows.+ edge\/([\w\.]+)/i],[c,[l,"EdgeHTML"]],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[c,[l,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\/([\w\.]+)/i,/ekioh(flow)\/([\w\.]+)/i,/(khtml|tasman|links)[\/ ]\(?([\w\.]+)/i,/(icab)[\/ ]([23]\.[\d\.]+)/i,/\b(libweb)/i],[l,c],[/rv\:([\w\.]{1,9})\b.+(gecko)/i],[c,l]],os:[[/microsoft (windows) (vista|xp)/i],[l,c],[/(windows) nt 6\.2; (arm)/i,/(windows (?:phone(?: os)?|mobile))[\/ ]?([\d\.\w ]*)/i,/(windows)[\/ ]?([ntce\d\. ]+\w)(?!.+xbox)/i],[l,[c,B,V]],[/(win(?=3|9|n)|win 9x )([nt\d\.]+)/i],[[l,"Windows"],[c,B,V]],[/ip[honead]{2,4}\b(?:.*os ([\w]+) like mac|; opera)/i,/ios;fbsv\/([\d\.]+)/i,/cfnetwork\/.+darwin/i],[[c,/_/g,"."],[l,"iOS"]],[/(mac os x) ?([\w\. ]*)/i,/(macintosh|mac_powerpc\b)(?!.+haiku)/i],[[l,D],[c,/_/g,"."]],[/droid ([\w\.]+)\b.+(android[- ]x86|harmonyos)/i],[c,l],[/(android|webos|qnx|bada|rim tablet os|maemo|meego|sailfish)[-\/ ]?([\w\.]*)/i,/(blackberry)\w*\/([\w\.]*)/i,/(tizen|kaios)[\/ ]([\w\.]+)/i,/\((series40);/i],[l,c],[/\(bb(10);/i],[c,[l,E]],[/(?:symbian ?os|symbos|s60(?=;)|series60)[-\/ ]?([\w\.]*)/i],[c,[l,"Symbian"]],[/mozilla\/[\d\.]+ \((?:mobile|tablet|tv|mobile; [\w ]+); rv:.+ gecko\/([\w\.]+)/i],[c,[l,C+" OS"]],[/web0s;.+rt(tv)/i,/\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i],[c,[l,"webOS"]],[/watch(?: ?os[,\/]|\d,\d\/)([\d\.]+)/i],[c,[l,"watchOS"]],[/crkey\/([\d\.]+)/i],[c,[l,x+"cast"]],[/(cros) [\w]+(?:\)| ([\w\.]+)\b)/i],[[l,O],c],[/panasonic;(viera)/i,/(netrange)mmh/i,/(nettv)\/(\d+\.[\w\.]+)/i,/(nintendo|playstation) ([wids345portablevuch]+)/i,/(xbox); +xbox ([^\);]+)/i,/\b(joli|palm)\b ?(?:os)?\/?([\w\.]*)/i,/(mint)[\/\(\) ]?(\w*)/i,/(mageia|vectorlinux)[; ]/i,/([kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?= linux)|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire)(?: gnu\/linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\/ ]?(?!chrom|package)([-\w\.]*)/i,/(hurd|linux) ?([\w\.]*)/i,/(gnu) ?([\w\.]*)/i,/\b([-frentopcghs]{0,5}bsd|dragonfly)[\/ ]?(?!amd|[ix346]{1,2}86)([\w\.]*)/i,/(haiku) (\w+)/i],[l,c],[/(sunos) ?([\w\.\d]*)/i],[[l,"Solaris"],c],[/((?:open)?solaris)[-\/ ]?([\w\.]*)/i,/(aix) ((\d)(?=\.|\)| )[\w\.])*/i,/\b(beos|os\/2|amigaos|morphos|openvms|fuchsia|hp-ux|serenityos)/i,/(unix) ?([\w\.]*)/i],[l,c]]},Y=function(h,v){if(typeof h===o&&(v=h,h=t),!(this instanceof Y))return new Y(h,v).getResult();var g=typeof e!==n&&e.navigator?e.navigator:t,w=h||(g&&g.userAgent?g.userAgent:""),b=g&&g.userAgentData?g.userAgentData:t,y=v?function(e,t){var i={};for(var n in e)t[n]&&t[n].length%2==0?i[n]=t[n].concat(e[n]):i[n]=e[n];return i}(G,v):G,I=g&&g.userAgent==w;return this.getBrowser=function(){var e,n={};return n[l]=t,n[c]=t,j.call(n,w,y.browser),n[a]=typeof(e=n[c])===r?e.replace(/[^\d\.]/g,"").split(".")[0]:t,I&&g&&g.brave&&typeof g.brave.isBrave==i&&(n[l]="Brave"),n},this.getCPU=function(){var e={};return e[p]=t,j.call(e,w,y.cpu),e},this.getDevice=function(){var e={};return e[u]=t,e[s]=t,e[d]=t,j.call(e,w,y.device),I&&!e[d]&&b&&b.mobile&&(e[d]=f),I&&"Macintosh"==e[s]&&g&&typeof g.standalone!==n&&g.maxTouchPoints&&g.maxTouchPoints>2&&(e[s]="iPad",e[d]=m),e},this.getEngine=function(){var e={};return e[l]=t,e[c]=t,j.call(e,w,y.engine),e},this.getOS=function(){var e={};return e[l]=t,e[c]=t,j.call(e,w,y.os),I&&!e[l]&&b&&"Unknown"!=b.platform&&(e[l]=b.platform.replace(/chrome os/i,O).replace(/macos/i,D)),e},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return w},this.setUA=function(e){return w=typeof e===r&&e.length>350?W(e,350):e,this},this.setUA(w),this};Y.VERSION="1.0.35",Y.BROWSER=$([l,c,a]),Y.CPU=$([p]),Y.DEVICE=$([s,u,d,h,f,v,m,g,w]),Y.ENGINE=Y.OS=$([l,c]),ee.exports&&(te=ee.exports=Y),te.UAParser=Y;var X=typeof e!==n&&(e.jQuery||e.Zepto);if(X&&!X.ua){var Z=new Y;X.ua=Z.getResult(),X.ua.get=function(){return Z.getUA()},X.ua.set=function(e){Z.setUA(e);var t=Z.getResult();for(var i in t)X.ua[i]=t[i]}}}("object"==typeof window?window:ie);var oe=ne.exports,re="UNKNOWN",ae=function(){var e=window.screen.width||document.documentElement.clientWidth||document.body.clientWidth,t=window.screen.height||document.documentElement.clientHeight||document.body.clientHeight;return e>=1024&&t>=768?"desktop":e>=768&&t>=1024?"tablet":"mobile"},se=function(){function e(){}return e.prototype.getDeviceInfo=function(e){if(this.deviceInfo)return this.deviceInfo;var t=function(){var e,t,i,n,o,r,a,s,l,d,u,c,p;if(null===(e=window.flippxp)||void 0===e?void 0:e.useragent)return{browser:null===(i=null===(t=window.flippxp)||void 0===t?void 0:t.useragent)||void 0===i?void 0:i.browser,browserVersion:null===(o=null===(n=window.flippxp)||void 0===n?void 0:n.useragent)||void 0===o?void 0:o.browserVersion,system:null===(a=null===(r=window.flippxp)||void 0===r?void 0:r.useragent)||void 0===a?void 0:a.system,systemModel:null===(l=null===(s=window.flippxp)||void 0===s?void 0:s.useragent)||void 0===l?void 0:l.systemModel,systemVersion:null===(u=null===(d=window.flippxp)||void 0===d?void 0:d.useragent)||void 0===u?void 0:u.systemVersion,type:(h=null===(p=null===(c=window.flippxp)||void 0===c?void 0:c.useragent)||void 0===p?void 0:p.type,"mobile"!==h?ae():h)};var h,f=(new oe).getResult(),m=f.browser,v=f.os,g=f.device;return{browser:m.name,browserVersion:m.version,system:v.name,systemModel:g.vendor,systemVersion:v.version,type:g.type||"desktop"}}(),i=t.browser,n=t.browserVersion,o=t.system,r=t.systemModel,a=t.systemVersion,s=t.type;return this.deviceInfo=d({browser:i||re,browserVersion:n||"NA",devicePixelRatio:Math.round(1e3*window.devicePixelRatio)||0,host:document.referrer,iframeWidth:window.innerWidth,screenHeight:window.screen.height,screenWidth:window.screen.width,system:o||re,systemModel:r||re,systemVersion:a||"NA",type:s||"desktop"},e),this.deviceInfo},e}(),le=new se,de=function(e,t){if(void 0===t&&(t=-1),"number"==typeof e)return e;if("string"==typeof e){var i=parseInt(e,10);return isNaN(i)?t:i}return t};function ue(e){switch(!0){case!!e.sdkConfig:return"sdk";case!!e.prebid:return"prebid";case!!e.nestedIframe:return"nestedIframe";case!!e.isGoogleAmp:return"googleAmp";case!!e.standalone:return"standalone";default:return"native"}}var ce=0,pe=w(),he=le.getDeviceInfo(),fe=[4298,4297,4300,4299,4301],me=null;switch(he.type){case"mobile":me={"com.flipp.beacon.shopperPlatform.enumeration.Platform":r.Mobile};break;case"tablet":me={"com.flipp.beacon.shopperPlatform.enumeration.Platform":r.Tablet};break;case"desktop":me={"com.flipp.beacon.shopperPlatform.enumeration.Platform":r.Desktop};break;default:me=null}var ve=function(){return me};function ge(e){return"CA"===e?{"com.flipp.beacon.shopperPlatform.enumeration.Country":a.CA}:"US"===e?{"com.flipp.beacon.shopperPlatform.enumeration.Country":a.US}:null}function we(){var e=le.getDeviceInfo();return{browser:e.browser,browserVersion:e.browserVersion,system:e.system,systemModel:e.systemModel,systemVersion:e.systemVersion}}function be(e){return e?{"com.flipp.beacon.shopperPlatform.entity.ShopperPlatformDecision":e}:null}function ye(){var e;switch(p){case"development":e=t.Dev;break;case"staging":e=t.Test;break;default:e=t.Prod}return e}function Ie(e,t){return{partnerNameIdentifier:e||"",campaignNameIdentifier:t||""}}function Ee(){var e=le.getDeviceInfo();return{viewWidth:e.screenWidth,viewHeight:e.screenHeight}}function ke(e){return e.map((function(e){return{paramName:e[0],paramValue:e[1]}}))}function xe(t){return{aid:e.ShopperPlatform,rnd:Math.random().toString(),postalCode:t?{string:t}:null}}function Ce(e){var t=e.usedFallbackPostalCode,i=e.sessionId,o=e.appVersion,r=e.shopperPlatformCampaign,a=e.shopperPlatformConfig,s=e.shopperPlatformUx,l=e.site,d=e.uid,u=e.experienceType,c=e.integrationType,p=e.auctionId,h=void 0===p?"FlippAvroDefault":p,f=le.getDeviceInfo().devicePixelRatio;return{integrationType:c,experienceType:u,environment:ye(),clientParameters:we(),epochMilliseconds:Date.now(),uuid:w(),usedFallbackPostalCode:t,sessionId:i,sequenceId:ce++,viewSize:Ee(),devicePixelRatio:f,appVersion:o,shopperPlatformCampaign:r,shopperPlatformConfig:a,shopperPlatformUx:s,shopperPlatformAdView:n.Default,site:l,uid:d,auctionId:h}}var Ne,Me=function(e){var t,n=e.schemaId,r=e.partnerNameIdentifier,a=e.siteId,s=e.zoneId,l=e.options,d=e.postalCode,u=e.campaignNameIdentifier,c=e.shopperPlatformUx,p=l.startCompact?o.Compact:o.Classic,h=fe.includes(n);return{base:xe(d),shopperPlatformBase:Ce({usedFallbackPostalCode:!1,sessionId:pe,appVersion:"1.2.0",shopperPlatformCampaign:Ie(r,u),shopperPlatformConfig:{openViewRatio:0,openTimerMs:0,evTimerMs:0},shopperPlatformUx:null!=c?c:i.StorefrontInline,site:window.location.hostname,uid:Q({})||"unknown",experienceType:h?o.Unknown:p,integrationType:ue(l),auctionId:null===(t=l.prebid)||void 0===t?void 0:t.requestId}),siteId:de(a),zoneId:de(s),schemaInfo:{schemaId:n},platform:ve()}},Se=function(e){var t=e.partnerNameIdentifier,i=e.siteId,n=e.zoneId,o=e.country,r=e.postalCode,a=e.errorMessage,s=e.responseCode,l=e.options;return d(d({},Me({partnerNameIdentifier:t,siteId:i,zoneId:n,options:l,postalCode:r,schemaId:4283})),{country:ge(o),errorMessage:a,responseCode:s})};!function(e){e.CLICK_MEATBALL="CLICK_MEATBALL",e.SHARE_ITEM="SHARE_ITEM",e.SEE_ITEM="SEE_ITEM",e.CLIP_ITEM="CLIP_ITEM",e.SEE_MERCHANT_ITEM="SEE_MERCHANT_ITEM",e.CLIP_MERCHANT_ITEM="CLIP_MERCHANT_ITEM",e.CLICK="CLICK",e.CLIP_ECOM_ITEM="CLIP_ECOM_ITEM",e.ITEM_IMPRESSION="ITEM_IMPRESSION",e.SEE_ALL_DEALS="SEE_ALL_DEALS"}(Ne||(Ne={}));var Te=function(e,t){var i={merchantId:t.merchant_id},n=null,o=null,r=null;switch(e){case s.Flyer:n={"com.flipp.beacon.shopperPlatform.entity.FlyerItemData":{flyer:{flyerId:de(t.flyer_id,0),flyerRunId:-1,flyerTypeId:-1,storeId:null,premium:!!t.premium},flyerItem:{id:de(t.flyer_item_id,0)}}};break;case s.Merchant:o={"com.flipp.beacon.shopperPlatform.entity.MerchantItemData":{merchantItem:{globalID:t.global_id||"-1",price:{double:t.price||-1}},storeId:t.store_code?de(t.store_code):-1,url:t.link||""}};break;case s.Ecom:r={"com.flipp.beacon.shopperPlatform.entity.EcomItemData":{ecomItem:{id:t.id?de(t.id):-1,itemId:t.item_id?{string:t.item_id||""}:t.global_id_int?{string:t.global_id_int||""}:t.global_id?{string:t.global_id||""}:null,sku:t.sku?{string:t.sku||""}:null,globalId:t.global_id_int?{string:t.global_id_int||""}:t.global_id?{string:t.global_id||""}:null},url:t.link||t.url||""}}}return{itemType:e,merchant:i,flyerItemData:n,merchantItemData:o,ecomItemData:r}},_e=function(e){switch(e){case"flyer":return s.Flyer;case"merchant_item":case"merchant":return s.Merchant;case"ecom":return s.Ecom;default:throw new Error("ULP item type not recognized")}},Pe=function(e){switch(e){case Ne.CLICK_MEATBALL:return 4287;case Ne.SHARE_ITEM:case Ne.CLIP_ITEM:case Ne.CLIP_MERCHANT_ITEM:case Ne.CLIP_ECOM_ITEM:return 4288;case Ne.SEE_ITEM:case Ne.SEE_MERCHANT_ITEM:case Ne.CLICK:return 4289;default:throw new Error("No schema associated with ULP message")}},ze=function(e,t,i,n){return{campaignId:e.campaignId,flightId:e.flightId,advertiserId:e.advertiserId,creativeId:e.creativeId,adId:e.adId,siteId:t,zoneId:i,customUrl:n?{string:n}:null}};var Ae=function(e,t,i){var n=void 0===i?{}:i,o=n.leading,r=void 0===o||o,a=n.trailing,s=void 0!==a&&a,l=!1,d=!1,u=[];return function(){for(var i=[],n=0;n<arguments.length;n++)i[n]=arguments[n];d=!0,u=i,l||(l=!0,r&&(d=!1,e.apply(void 0,u)),setTimeout((function(){s&&d&&e.apply(void 0,u),l=!1,d=!1}),t))}},Ue=function(e,t,i,n){if(void 0===i&&(i=null),void 0===n&&(n=2),"IntersectionObserver"in window&&"IntersectionObserverEntry"in window&&"isIntersecting"in window.IntersectionObserverEntry.prototype){var o={rootMargin:"".concat(100*n,"% 0px"),root:i?document.querySelector(i):null},r=new IntersectionObserver((function(e){e.some((function(e){return e.isIntersecting}))&&(t(),r.disconnect())}),o);r.observe(e)}else{if(qe(e.getBoundingClientRect()))return void t();window.addEventListener("scroll",function(e,t){var i=Ae((function(){return qe(e.getBoundingClientRect())?(t(),window.removeEventListener("scroll",i),null):null}),66);return i}(e,t),{passive:!0})}},qe=function(e,t){return void 0===t&&(t=2),e.top>=0?e.top-window.innerHeight<window.innerHeight*t:Math.abs(e.bottom)<window.innerHeight*t},Le=["recipe","cook","cooking","bake","baking","kitchen","food","meal","dish","cuisine","flavor","spice","ingredient","marinate","grill","roast","fry","saute","boil","steam","poach","broil","stew","simmer","pan-fry","pan-roast","pan-sear","sous-vide","blanch","braise","barbecue","smoke","season","herb","vegetable","fruit","meat","poultry","beef","ground beef","chicken","pork","lamb","seafood","fish","shrimp","lobster","crab","clam","mussel","oyster","scallops","soup","stir-fry","sauce","dressing","gravy","condiment","dessert","cake","pie","cookie","brownie","pastry","bread","pudding","ice cream","sorbet","smoothie","juice","cocktail","wine","beer","cheese","yogurt","milk","cream","butter","oil","vinegar","salt","pepper","sugar","honey","maple syrup","molasses","flour","yeast","baking powder","baking soda","cornstarch","cornmeal","cocoa powder","vanilla","cinnamon","nutmeg","ginger","garlic","onion","shallot","bell pepper","jalapeno","habanero","chili pepper","black pepper","red pepper","paprika","cumin","coriander","turmeric","mustard","mayonnaise","ketchup","horseradish","tabasco","sriracha","worcestershire sauce","soy sauce","hoisin sauce","oyster sauce","fish sauce","teriyaki sauce","bbq sauce","hot sauce","caramel","toffee","chocolate","caramelized","glazed","crispy","tender","juicy","flaky","creamy","cheesy","rich","spicy","savory","sweet","sour","tangy","umami","healthy","vegan","vegetarian","gluten","olive oil","papaya","quinoa","lentils","tofu","chickpeas","avocado","apple","pineapple","mango","coconut","almonds","walnuts","cashews","pecans","hazelnuts","peanuts","sesame seeds","chia seeds","flax seeds","sunflower seeds","pumpkin seeds","couscous","bulgur","buckwheat","amaranth","spelt","farro","barley","rye","oats","millet","teff","kamut","dill","sage","rosemary","mint","cilantro","chives","fennel","tarragon","marjoram","saffron","cardamom","anise","cayenne","cloves","allspice","fenugreek","caraway","juniper","nutmeg","star anise","mustard seeds","poppy seeds","black sesame seeds","white sesame seeds","wasabi","miso","tempeh","seitan","jackfruit","agave nectar","coconut sugar","date sugar","brown rice syrup","molasses","stevia","monk fruit sweetener","erythritol","xylitol","guava","kiwi","pomegranate","figs","dates","prunes","raisins","capers","pickles","kimchi","sauerkraut","miso","tempeh","seitan","gochujang","tahini","hummus","pesto","salsa","guacamole","aioli","tzatziki","chutney","relish","tapenade","romesco","gremolata","chimichurri","harissa","rhubarb","beets","parsnips","rutabaga","turnips","celeriac","kohlrabi","okra","yucca","jicama","daikon","watercress","kale","collard greens","bok choy","swiss chard","arugula","radicchio","endive","broccoli rabe","sorrel","escarole","mustard greens","nettles","edamame","peas","broad beans","lima beans","navy beans","kidney beans","pinto"];var Re={exports:{}};!function(e,t){!function(t,i){e.exports=i()}(0,(function(){var e=[],t=[],i={},n={},o={};function r(e){return"string"==typeof e?new RegExp("^"+e+"$","i"):e}function a(e,t){return e===t?t:e===e.toLowerCase()?t.toLowerCase():e===e.toUpperCase()?t.toUpperCase():e[0]===e[0].toUpperCase()?t.charAt(0).toUpperCase()+t.substr(1).toLowerCase():t.toLowerCase()}function s(e,t){return e.replace(t[0],(function(i,n){var o,r,s=(o=t[1],r=arguments,o.replace(/\$(\d{1,2})/g,(function(e,t){return r[t]||""})));return a(""===i?e[n-1]:i,s)}))}function l(e,t,n){if(!e.length||i.hasOwnProperty(e))return t;for(var o=n.length;o--;){var r=n[o];if(r[0].test(t))return s(t,r)}return t}function d(e,t,i){return function(n){var o=n.toLowerCase();return t.hasOwnProperty(o)?a(n,o):e.hasOwnProperty(o)?a(n,e[o]):l(o,n,i)}}function u(e,t,i,n){return function(n){var o=n.toLowerCase();return!!t.hasOwnProperty(o)||!e.hasOwnProperty(o)&&l(o,o,i)===o}}function c(e,t,i){return(i?t+" ":"")+(1===t?c.singular(e):c.plural(e))}return c.plural=d(o,n,e),c.isPlural=u(o,n,e),c.singular=d(n,o,t),c.isSingular=u(n,o,t),c.addPluralRule=function(t,i){e.push([r(t),i])},c.addSingularRule=function(e,i){t.push([r(e),i])},c.addUncountableRule=function(e){"string"!=typeof e?(c.addPluralRule(e,"$0"),c.addSingularRule(e,"$0")):i[e.toLowerCase()]=!0},c.addIrregularRule=function(e,t){t=t.toLowerCase(),e=e.toLowerCase(),o[e]=t,n[t]=e},[["I","we"],["me","us"],["he","they"],["she","they"],["them","them"],["myself","ourselves"],["yourself","yourselves"],["itself","themselves"],["herself","themselves"],["himself","themselves"],["themself","themselves"],["is","are"],["was","were"],["has","have"],["this","these"],["that","those"],["echo","echoes"],["dingo","dingoes"],["volcano","volcanoes"],["tornado","tornadoes"],["torpedo","torpedoes"],["genus","genera"],["viscus","viscera"],["stigma","stigmata"],["stoma","stomata"],["dogma","dogmata"],["lemma","lemmata"],["schema","schemata"],["anathema","anathemata"],["ox","oxen"],["axe","axes"],["die","dice"],["yes","yeses"],["foot","feet"],["eave","eaves"],["goose","geese"],["tooth","teeth"],["quiz","quizzes"],["human","humans"],["proof","proofs"],["carve","carves"],["valve","valves"],["looey","looies"],["thief","thieves"],["groove","grooves"],["pickaxe","pickaxes"],["passerby","passersby"]].forEach((function(e){return c.addIrregularRule(e[0],e[1])})),[[/s?$/i,"s"],[/[^\u0000-\u007F]$/i,"$0"],[/([^aeiou]ese)$/i,"$1"],[/(ax|test)is$/i,"$1es"],[/(alias|[^aou]us|t[lm]as|gas|ris)$/i,"$1es"],[/(e[mn]u)s?$/i,"$1s"],[/([^l]ias|[aeiou]las|[ejzr]as|[iu]am)$/i,"$1"],[/(alumn|syllab|vir|radi|nucle|fung|cact|stimul|termin|bacill|foc|uter|loc|strat)(?:us|i)$/i,"$1i"],[/(alumn|alg|vertebr)(?:a|ae)$/i,"$1ae"],[/(seraph|cherub)(?:im)?$/i,"$1im"],[/(her|at|gr)o$/i,"$1oes"],[/(agend|addend|millenni|dat|extrem|bacteri|desiderat|strat|candelabr|errat|ov|symposi|curricul|automat|quor)(?:a|um)$/i,"$1a"],[/(apheli|hyperbat|periheli|asyndet|noumen|phenomen|criteri|organ|prolegomen|hedr|automat)(?:a|on)$/i,"$1a"],[/sis$/i,"ses"],[/(?:(kni|wi|li)fe|(ar|l|ea|eo|oa|hoo)f)$/i,"$1$2ves"],[/([^aeiouy]|qu)y$/i,"$1ies"],[/([^ch][ieo][ln])ey$/i,"$1ies"],[/(x|ch|ss|sh|zz)$/i,"$1es"],[/(matr|cod|mur|sil|vert|ind|append)(?:ix|ex)$/i,"$1ices"],[/\b((?:tit)?m|l)(?:ice|ouse)$/i,"$1ice"],[/(pe)(?:rson|ople)$/i,"$1ople"],[/(child)(?:ren)?$/i,"$1ren"],[/eaux$/i,"$0"],[/m[ae]n$/i,"men"],["thou","you"]].forEach((function(e){return c.addPluralRule(e[0],e[1])})),[[/s$/i,""],[/(ss)$/i,"$1"],[/(wi|kni|(?:after|half|high|low|mid|non|night|[^\w]|^)li)ves$/i,"$1fe"],[/(ar|(?:wo|[ae])l|[eo][ao])ves$/i,"$1f"],[/ies$/i,"y"],[/\b([pl]|zomb|(?:neck|cross)?t|coll|faer|food|gen|goon|group|lass|talk|goal|cut)ies$/i,"$1ie"],[/\b(mon|smil)ies$/i,"$1ey"],[/\b((?:tit)?m|l)ice$/i,"$1ouse"],[/(seraph|cherub)im$/i,"$1"],[/(x|ch|ss|sh|zz|tto|go|cho|alias|[^aou]us|t[lm]as|gas|(?:her|at|gr)o|[aeiou]ris)(?:es)?$/i,"$1"],[/(analy|diagno|parenthe|progno|synop|the|empha|cri|ne)(?:sis|ses)$/i,"$1sis"],[/(movie|twelve|abuse|e[mn]u)s$/i,"$1"],[/(test)(?:is|es)$/i,"$1is"],[/(alumn|syllab|vir|radi|nucle|fung|cact|stimul|termin|bacill|foc|uter|loc|strat)(?:us|i)$/i,"$1us"],[/(agend|addend|millenni|dat|extrem|bacteri|desiderat|strat|candelabr|errat|ov|symposi|curricul|quor)a$/i,"$1um"],[/(apheli|hyperbat|periheli|asyndet|noumen|phenomen|criteri|organ|prolegomen|hedr|automat)a$/i,"$1on"],[/(alumn|alg|vertebr)ae$/i,"$1a"],[/(cod|mur|sil|vert|ind)ices$/i,"$1ex"],[/(matr|append)ices$/i,"$1ix"],[/(pe)(rson|ople)$/i,"$1rson"],[/(child)ren$/i,"$1"],[/(eau)x?$/i,"$1"],[/men$/i,"man"]].forEach((function(e){return c.addSingularRule(e[0],e[1])})),["adulthood","advice","agenda","aid","aircraft","alcohol","ammo","analytics","anime","athletics","audio","bison","blood","bream","buffalo","butter","carp","cash","chassis","chess","clothing","cod","commerce","cooperation","corps","debris","diabetes","digestion","elk","energy","equipment","excretion","expertise","firmware","flounder","fun","gallows","garbage","graffiti","hardware","headquarters","health","herpes","highjinks","homework","housework","information","jeans","justice","kudos","labour","literature","machinery","mackerel","mail","media","mews","moose","music","mud","manga","news","only","personnel","pike","plankton","pliers","police","pollution","premises","rain","research","rice","salmon","scissors","series","sewage","shambles","shrimp","software","species","staff","swine","tennis","traffic","transportation","trout","tuna","wealth","welfare","whiting","wildebeest","wildlife","you",/pok[eé]mon$/i,/[^aeiou]ese$/i,/deer$/i,/fish$/i,/measles$/i,/o[iu]s$/i,/pox$/i,/sheep$/i].forEach(c.addUncountableRule),c}))}(Re);var Oe=Re.exports,De='script[type="application/ld+json"]';function $e(e){return"@graph"in e}var He=["the","be","to","of","and","a","in","that","have","I","it","for","not","on","with","he","as","you","do","at","this","but","his","by","from","they","we","say","her","she","or","an","will","my","one","all","would","there","their","what","so","up","out","if","about","who","get","which","go","me","when","make","can","like","time","no","just","him","know","take","people","into","year","your","good","some","could","them","see","other","than","then","now","look","only","come","its","over","think","also","back","after","use","two","how","our","work","first","well","way","even","new","want","because","any","these","give","day","most","us","is","are","am","has","was","were","had","been","being","have","do","does","did","doing","a","an","the","and","but","if","or","because","as","until","while","of","at","by","for","with","about","against","between","into","through","during","before","after","above","below","to","from","up","down","in","out","on","off","over","under","again","further","then","once","here","there","when","where","why","how","all","any","both","each","few","more","most","other","some","such","no","nor","not","only","own","same","so","than","too","very","s","t","can","will","just","don","should","now"];function Fe(e){var t=new Map,i=new Set;return e.toLowerCase().split(/\s+/).forEach((function(e){var i=Oe.singular(e);t.has(i)?t.set(i,Number(t.get(i))+1):t.set(i,1)})),t.forEach((function(e,t){if(!He.includes(t)&&e>1){var n=(o=t,Le.find((function(e){return e===o}))||null);null===n||i.has(n)||i.add(n)}var o})),Array.from(i)}function We(){var e=document.querySelectorAll(De),t=[];if(!e)return t;var i=function(e){"NewsArticle"===e["@type"]&&t.push.apply(t,e.keywords||[])};return e.forEach((function(e){try{var t=JSON.parse(e.innerText);$e(t)?t["@graph"].forEach((function(e){i(e)})):Array.isArray(t)?t.forEach((function(e){i(e)})):i(t)}catch(e){}})),t}function je(){var e=document.querySelectorAll(De),t="Unknown";if(!e)return t;var i=function(e){var t=e["@type"];return"Recipe"===t?"Recipe":"NewsArticle"===t?"News":null};return e.forEach((function(e){var n;try{var o=JSON.parse(e.innerText);$e(o)?o["@graph"].forEach((function(e){var n;t=null!==(n=i(e))&&void 0!==n?n:t})):Array.isArray(o)?o.forEach((function(e){var n;t=null!==(n=i(e))&&void 0!==n?n:t})):t=null!==(n=i(o))&&void 0!==n?n:t}catch(e){}})),t}function Be(){var e;try{e=window.parent.document}catch(e){return console.warn("Will not resize or position if on another domain."),null}if(!e)return null;for(var t=e.querySelectorAll("iframe"),i=0;i<t.length;i++){var n=t[i];try{if(window===n.contentWindow)return n}catch(e){continue}}return null}function Ve(e,t,i){var n;if(!(document.body&&1!==document.body.children.length||"flipp-"!==document.body.children[0].id.substring(0,6))||t){var o=Be();if(o){var r=0|document.body.offsetHeight,a=(null===(n=document.querySelector(".flippxp-frame"))||void 0===n?void 0:n.getBoundingClientRect().height)||0,s=e+Math.max(0,r-a);o.style.height="".concat(s,"px"),i&&(o.style.width="100%")}}else console.warn("Will not resize if not only our container present.")}var Ge=function(e,t){return(i=t.join(","),n=function(e,t){return(e-t+13)%26+t},i.replace(/[a-zA-Z]/g,(function(e){var t=e.charCodeAt(0);return t>=65&&t<=90?String.fromCharCode(n(t,65)):t>=97&&t<=122?String.fromCharCode(n(t,97)):e}))).split(",").filter((function(t){return e.toLowerCase().includes(t.toLowerCase())}));var i,n},Ye=function(e){return Array.from(e).filter((function(e){return null!==e})).map((function(e){var t;return(null===(t=null==e?void 0:e.textContent)||void 0===t?void 0:t.trim())||""}))},Xe=["zheqre","xvyyrq","obzovat","obzo","xvyyf","pbeban","ivehf","pbeban ivehf","Xbeban","pbivq","Cnaqrzvp","Bhgoernx","pbebanivehf","pbivq 19","pbivq-19","zvaarncbyvf ybbgvat","Erfg va crnpr","zvaarncbyvf neerfg","gjvggre gehzc ivbyrapr","zvaarncbyvf cebgrfg","grnetnf","zvaarncbyvf ivbyrapr","Cebgrfg","Zvaarncbyvf","cbyvpr sbbgntr","Cebgrfgf","gehzc ergnyvngvba","Cebgrfgref","Znavsrfgngvba","evbg","obqlpnz","cerpvapg ohearq","Znavsrfgnag","EVC","Znavsrfgngvbaf","Nyy Yvirf Znggre","NYZ","Oyhr Yvirf Znggre","Phesrj","Ybbgvat","Ohetynel","Gursg","Evbgf","Evbgre","Greebevfz","Envq","Envqf","Haerfg Fubbgvat","Zvffvyr","Svernez Tha","Oehgnyvgl","Ertvf Xbepuvafxv-Cndhrg","Grne Tnf","Crccre Fcenl","Ehoore Ohyyrgf","Nagvsn","Erory Zrqvn","Juvgr Fhcerznpvfg","Arb Anmv","Nyg Evtug","Xh Xyhk Xyna","XXX","Nyrk Wbarf","Zvyb Lvnaabcbhybf","Qnvyl Fgbezre","Oebnqpnfg & Argjbex Arjf","Ohfvarff Arjf","Tbffvc & Gnoybvq Arjf","Urnygu Arjf","Wbheanyvfz & Arjf Vaqhfgel","Ybpny Arjf","Arjfcncref","Cbyvgvpny Arjf","Fcbegf Arjf","Grpu Arjf","Jrngure","Jbeyq Arjf","Navzny Pehrygl","naberkvp","ohyvzvn","rngvat qvfbeqre","zhxonat","beguberkvn","naberkvn","nesvq","ovatr rngvat","nfze rngf","sbbq nqqvpgvbaf","cvpn qvfbeqre","Cebhq Oblf","Qrshaq gur cbyvpr","Ceb Pubvpr","Ceb Yvsr","AEN","Xlyr Evggraubhfr","Ibgre Fhccerffvba","Hcevfvat","FPBGHF","Fhcerzr Pbheg","Nagv-Inppvar","Nagv-Ink","Nagv-Inp","Ybpxqbja","Inppvar Znaqngr","Ink znaqngr","Wnahnel 6gu","Wna 6gu","Vafheerpgvba","Tha Evtugf","Svefg nzraqzrag","Obbfgre","Ha-Inppvangrq","Ha inkkrq","Narzvn","Nfcretref","O12","Pbccre","SQN","Terrx Sernx","Arhebcngul","Fryravhz","Gehzc","Nobegvba","Nyyrtngvbaf","Nfcretre’f","Nfcretref","Onpgrevn","Orfgvnyvgl","Ohxxnxr","Pnepvabtra","Pyhfgreshpx","Pbpxfhpxre","Pbagnzvangrq","Pbaare","Pebff-pbagnzvangvba","Qrns * qhzo","Qrns * zhgr","Qhzo * qrns","R.pbyv","Snttvg","Snttbg","Snyfr pynvzf","Sybbq","Sernx","Sernx bhg","Tzc","Tf_arjf","Tf_cbyvgvpf","Ti_nqhyg","Ti_nezf","Ti_pevzr","Ti_qrngu_vawhel","Ti_qbjaybnq","Ti_qehtf","Ti_ungrfcrrpu","Ti_zvyvgnel","Ti_bofpravgl","Ti_bofpravgl","Ti_greebevfz","Ti_gbonppb","Unenffzrag","Ubybpnhfg","Vasrpgvba","Wbo phgf","Ynzroenva","Ynjfhvg","Ynlbssf","Yvfgrevn","Zbyrfg","Zhgr * qrns","Arteb","Avtnobb","Avttn","Avttre","Avttref","Avgtyrg","Bvy fcvyy","Crqbcuvyr","Crrq","Crfgvpvqr","Cbvfbavat","Cbyyhgvba","Erpnyy","Fnyzbaryyn","Fnaqavttre","Frkhny zbfpcaqhpg","Fvpxrarq","Fxvaurnq","Fcrpvny ohyyrgva","Fhrq","Fhvpvqny","Fhcerznpvfg","Hevangvat","Jrrq xvyyre"],Ze=function(e){return e<=18e3?e+2e3:e<=25e3?e+5e3:e+1e4},Ke=!1,Je=function(e,t,i,n,o){void 0===n&&(n=.5),void 0===o&&(o=Ze);var r=0,a=0,s=2e3,l=i||8e3,d=!1,u=!1,c=!1,p=0,h=null,f=function(e){return function(t){var i;return t.intersectionRect.height>e*((null===(i=t.rootBounds)||void 0===i?void 0:i.height)||window.innerHeight)}}(n),m=function(){var t=Date.now();!Ke&&r>=l&&(Ke=!0,e.dispatchEvent(new Event("flipp-engagement"))),document.hasFocus()&&!document.hidden&&(r+=t-a,e.dispatchEvent(new CustomEvent("flipp-heartbeat",{detail:{time:s}})),s=o(s)),a=t,s<=6e4&&(p=window.setTimeout(m,s-r))},v=function(){d=!1;var e=Date.now()-a;r+=e,a=0,clearTimeout(p)},g=function(){d=!0,a=Date.now(),p=window.setTimeout(m,s-r),c||(c=!0,e.dispatchEvent(new Event("flipp-open")))},w=Ae((function(){var t=e.getBoundingClientRect(),i=!(t.top>window.innerHeight||t.bottom<0),n=.5*window.innerHeight,o=t.top<n&&t.bottom>n;return!u&&i&&(u=!0,e.dispatchEvent(new Event("flipp-view"))),!d&&o?g():d&&!o&&v(),null}),66);if(t){var b=window.innerHeight/2/e.clientHeight,y=Math.min(1,Math.max(.001,b));(h=new IntersectionObserver((function(t){!u&&t.some((function(e){return e.isIntersecting}))&&(u=!0,e.dispatchEvent(new Event("flipp-view"))),!d&&t.some(f)?g():d&&t.every((function(e){return!f(e)}))&&v()}),{threshold:[0,.9*y,y,1.1*y,1],rootMargin:"0px 1000px 0px 1000px",root:null})).observe(e)}else window.addEventListener("scroll",w);return function(){return window.clearTimeout(p),h&&h.disconnect(),window.removeEventListener("scroll",w),r+Date.now()-a}},Qe=["Curated Items missing","Cannot read properties of undefined (reading 'map')","Search Items missing","Failed to fetch","Cannot read properties of undefined (reading 'length')","undefined is not an object (evaluating 'de.ecom_items.map')","undefined is not an object (evaluating 'de.ecom_items.length')","Load failed","Items missing"],et=function(){function e(e){var t,i=e.targetEl,n=e.publisherNameIdentifier,o=e.data,r=e.options,a=e.resizeCallback,l=e.siteId,c=e.zoneIds,p=e.handlePreviewEnded,h=e.geoData,f=e.keywords,v=this;this.hasScrolledBeyond=!1,this._preview=!1,this._expandCount=0,this._hoverExpandable=!1,this.handlePostMessages=function(e){if(!v.iframe||e.source!==v.iframe.contentWindow)return null;var t=e.data,i=t.type,n=t.data;if(i)if(t.type!==g.ULP)switch(i.replace("request-","")){case g.SEND_EV:v.handleSendEv(n);break;case g.APP_CONFIG:v.handleAppConfig();break;case g.INLINE_GEOMETRY:v.handleInlineGeometry();break;case g.IFRAME_HEIGHT_RESIZE:v.handleIframeHeightResize(n);break;case g.END_PREVIEW:v.handleEndPreview();break;case g.CALLBACK:v.handleCallback(n)}else t.detail.type===O?v.handleUlpItemImpressions(t.detail):v.handleUlpPostMessages(t.detail)},this.handleUlpPostMessages=function(e){if(e.type===$)return v.handleUlpErrorMessage(e.detail),Qe.includes(e.detail)||v.contentElement&&(v.contentElement.style.height="0"),null;var t;switch(Ke||window.dispatchEvent(new Event("flipp-engagement")),!v.sdk||e.type!==z&&e.type!==U&&e.type!==L||function(e,t){G(N.REQUEST_GO_TO_URL,{url:e},t)}(e.detail.url,v.sdk.platform),e.type){case _:case P:t=_e(e.detail.itemType);break;case z:case A:t=s.Flyer;break;case U:case q:t=s.Merchant;break;case L:case R:t=s.Ecom;break;case D:return void v.handleUlpSeeAllDealsClick();default:throw new Error("ULP message not recognized")}v.handleUlpClick(t,e)},this.scrollBeyond=function(){var e,t,i,n,o,r,a;if(v.hasScrolledBeyond)return null;if(v.hasScrolledBeyond=!0,!v.data.storefront)return null;var s={sfmlUUID:null!==(e=v.data.storefront.sfml_uuid)&&void 0!==e?e:"-1",version:null,contentHash:null},l=d(d({},Me({schemaId:4269,partnerNameIdentifier:v.publisherNameIdentifier,siteId:v.siteId,zoneId:v.zoneIds[0]||0,options:v.options,postalCode:null===(t=v.geoData)||void 0===t?void 0:t.postal_code,campaignNameIdentifier:null===(i=v.kevelMetadata)||void 0===i?void 0:i.campaignNameIdentifier})),{storefront:s,merchant:{merchantId:null!==(n=v.data.storefront.merchant_id)&&void 0!==n?n:-1},decision:be(ze(v.data,v.siteId,v.zoneIds[0]||0,v.getCustomUrl())),height:v.getHeight(),expansionCount:v.expandCount,flyer:{flyerId:null!==(o=v.data.storefront.flyer_id)&&void 0!==o?o:-1,flyerRunId:null!==(r=v.data.storefront.flyer_run_id)&&void 0!==r?r:-1,flyerTypeId:null!==(a=v.data.storefront.flyer_type_id)&&void 0!==a?a:-1,storeId:null,premium:!0}});m.enqueue(l)},this.targetEl=i,this.publisherNameIdentifier=n,this.data=o,this.options=r,this.keywords=r.sdkConfig?u(u([],f,!0),V(),!0):f,this.resizeCallback=a,this.handlePreviewEnded=p,this.siteId=l,this.zoneIds=c,this._preview=null!==(t=r.preview)&&void 0!==t&&t,this.geoData=h,this.sdk=r.sdkConfig?d(d({},r.sdkConfig),{features:M}):null,this.intersectionObserver="IntersectionObserver"in window&&"IntersectionObserverEntry"in window&&"isIntersecting"in window.IntersectionObserverEntry.prototype}return Object.defineProperty(e.prototype,"preview",{get:function(){return this._preview},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"expandCount",{get:function(){return this._expandCount},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"contentElement",{get:function(){return this._contentElement},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"hoverExpandable",{get:function(){return this._hoverExpandable},enumerable:!1,configurable:!0}),e.prototype.sendMessage=function(e,t){var i;if(!this.iframe)return null;null===(i=this.iframe.contentWindow)||void 0===i||i.postMessage({type:e,data:t},"*")},e.prototype.sendCountdownState=function(e,t){return this.sendMessage(g.COUNTDOWN_STATE,{countdownEnd:e,countdownInterval:t}),null},e.prototype.requestExpand=function(){return this.sendMessage(g.REQUEST_EXPAND,!0),null},e.prototype.handleSendEv=function(e){window.flippxp.evTag[e.compositeKey]?this.sendMessage(g.SEND_EV,!1):(window.flippxp.evTag[e.compositeKey]=!0,this.sendMessage(g.SEND_EV,!0))},e.prototype.handleAppConfig=function(){var e,t,i,n,o,r,a,s,l,c,p,h,f,m,v,w,b,y,I,k,x,C,N,M,S,T,_;if(!this.kevelMetadata)return null;var P=navigator.languages?navigator.languages[0]:navigator.language,z=function(){var e,t=Array.from(document.querySelectorAll(De)).map((function(e){var t=e.textContent||"";try{return JSON.parse(t)}catch(e){return null}})).filter(Boolean).flatMap((function(e){return e&&$e(e)?e["@graph"]:e})).find((function(e){var t=Array.isArray(null==e?void 0:e["@type"])?null==e?void 0:e["@type"]:[null==e?void 0:e["@type"]];return null==t?void 0:t.includes("Recipe")})),i=new RegExp("\\b(?:".concat(["teaspoon","tsp","tablespoon","tbsp","fluid ounce","fl oz","gill","cup","pint","pt","quart","qt","gallon","gal","milliliter","ml","centiliter","cl","deciliter","dl","liter","l","ounce","oz","pound","lb","milligram","mg","gram","grams","g","kilogram","kg","pinch","dash","touch","smidgen","drop","handful","stick","slice","piece","whole","half","quarter","third","eighth","sixteenth","bundle","bunch","sprig","leaf","head","clove","bulb","stalk","wedge","cube","fillet","strip","sheet","round","scoop","jar","bottle","can","package","bag","box","container","roll","tube","tray","bar","square","segment","kernels","packet","envelope","spoonful","serving"].join("|"),")s?\\b"),"gi"),n=null===(e=null==t?void 0:t.recipeIngredient)||void 0===e?void 0:e.map((function(e){return e.replace(/,\s?.*/,"").replace(i,"").replace(/^\d+\s*/,"").split(/[\d+/?\d*\s+(),]+/).map((function(e){return e.replace(/[^a-zA-Z]/g,"").toLowerCase()})).filter((function(e){return e.length>2&&!e.endsWith("ed")})).join(" ")}));return t?{cleanedIngredients:n,recipeName:t.headline||t.name}:null}(),A=JSON.stringify({decisions:{inline:[this.data]},location:this.geoData}),U=new URL(window.location.toString()),q=U.searchParams.get("sessionId"),L=U.searchParams.get("itemId");this.sendMessage(g.APP_CONFIG,{campaignNameIdentifier:this.kevelMetadata.campaignNameIdentifier,ux:this.options.standalone?E.DEFAULT:E.INLINE,adView:this.options.isGoogleAmp?"safeframe":"native",intersectionObserver:this.intersectionObserver,site:this.getSiteDomain(),locale:(null!==(t=null===(e=this.sdk)||void 0===e?void 0:e.locale)&&void 0!==t?t:P).substring(0,2),country:null===(i=this.geoData)||void 0===i?void 0:i.country,partnerNameIdentifier:this.publisherNameIdentifier,campaignConfigUrl:this.kevelMetadata.campaignConfigUrl,ulpUrl:this.kevelMetadata.ulpUrl,survey:this.kevelMetadata.survey,tags:d(d({},null===(r=null===(o=null===(n=this.data)||void 0===n?void 0:n.storefront)||void 0===o?void 0:o.campaignConfig)||void 0===r?void 0:r.tags),{campaignManagement:{open:this.impressionUrl,engagement:this.engagementUrl}}),expandOnReadMore:!!this.options.dwellExpandable||!!this.options.expandOnReadMore,preventItemModalClose:this.kevelMetadata.preventItemModalClose,creativeEvTimerMs:this.kevelMetadata.evTimerMs,hideHeader:this.kevelMetadata.hideHeader,themeColorBg:this.kevelMetadata.themeColorBg,themeColorFg:this.kevelMetadata.themeColorFg,sessionId:null!=q?q:pe,uid:null!==(s=null===(a=this.sdk)||void 0===a?void 0:a.userId)&&void 0!==s?s:Q(this.options),startCompact:void 0===this.options.startCompact?null===(l=this.kevelMetadata)||void 0===l?void 0:l.startCompact:!!this.options.startCompact,decision:ze(this.data,this.siteId,this.zoneIds[0],this.getCustomUrl()),integrationType:ue(this.options),platform:ve(),userPostalCode:null===(c=this.geoData)||void 0===c?void 0:c.postal_code,latitude:null===(p=this.geoData)||void 0===p?void 0:p.latitude,longitude:null===(h=this.geoData)||void 0===h?void 0:h.longitude,regionCode:null===(f=this.geoData)||void 0===f?void 0:f.region,regionName:null===(m=this.geoData)||void 0===m?void 0:m.region_name,sdk:this.sdk,storefrontConfig:null===(v=this.data)||void 0===v?void 0:v.storefront,noPopOnLink:!!this.kevelMetadata.noPopOnLink,showLocation:!!this.kevelMetadata.showLocation,dynamicHeader:d(d({},this.kevelMetadata.dynamicHeader),{itemsForSearch:u(u([],Fe(document.body.innerText),!0),null!==(w=null==z?void 0:z.cleanedIngredients)&&void 0!==w?w:[],!0),recipeName:null==z?void 0:z.recipeName}),dynamicHeaderIframeUrl:this.kevelMetadata.dynamicHeaderIframeUrl,dynamicPopupIframeUrl:this.kevelMetadata.dynamicPopupIframeUrl,dynamicHeaderIframeHeight:this.kevelMetadata.dynamicHeaderIframeHeight,dynamicPopupIframeHeight:this.kevelMetadata.dynamicPopupIframeHeight,highlightedFlyerItemIds:null!==(b=this.kevelMetadata.highlightedFlyerItemIds)&&void 0!==b?b:[],highlightedFlyerItemsOptions:this.kevelMetadata.highlightedFlyerItemsOptions,targetedOverlayImageUrl:null!==(y=this.kevelMetadata.targetedOverlayImageUrl)&&void 0!==y?y:null,fallbackImageUrl:null===(x=null===(k=null===(I=this.data)||void 0===I?void 0:I.storefront)||void 0===k?void 0:k.campaignConfig)||void 0===x?void 0:x.fallbackImageUrl,fallbackLinkUrl:null===(M=null===(N=null===(C=this.data)||void 0===C?void 0:C.storefront)||void 0===N?void 0:N.campaignConfig)||void 0===M?void 0:M.fallbackLinkUrl,dwellTimerMs:this.kevelMetadata.dwellTimerMs,hoverExpandable:this._hoverExpandable,isVimpCallbackSet:null!==(S=!!window.flippxp.vimpTrackerFunc)&&void 0!==S&&S,stepHeight:null!==(_=null!==(T=this.kevelMetadata.stepHeight)&&void 0!==T?T:this.options.stepHeight)&&void 0!==_?_:1500,campaigns:A,itemId:L,keywords:this.keywords})},e.prototype.getSiteDomain=function(){return this.options.overrideHostname?this.options.overrideHostname:window.location.hostname?window.location.hostname:window.parent.location.hostname?window.parent.location.hostname:"none"},e.prototype.handleInlineGeometry=function(){if(!this.containerElement||!this.containerWindow||!this.contentElement)return null;var e=l(this.containerElement,this.contentElement,this.containerWindow);null!=e&&this.sendMessage(g.INLINE_GEOMETRY,e)},e.prototype.handleEndPreview=function(){if(!this.iframe)return null;this._preview=!1,this.sendMessage(g.END_PREVIEW,!0),this.handlePreviewEnded(this)},e.prototype.handleCallback=function(e){if("viewableImpression"===e)return window.flippxp.vimpTrackerFunc?window.flippxp.vimpTrackerFunc():void 0},e.prototype.getHeight=function(){return this.iframe?this.iframe.offsetHeight:0},e.prototype.getAdType=function(){var e,t;return(null===(e=this.kevelMetadata)||void 0===e?void 0:e.survey)?E.SURVEY:(null===(t=this.kevelMetadata)||void 0===t?void 0:t.ulpUrl)?E.ULP:E.INLINE},e.prototype.handleIframeHeightResize=function(e){if(!this.iframe)return null;var t=Math.ceil(e.height);this.iframe.offsetHeight<t&&(this._expandCount++,1===this.expandCount&&(this.hasScrolledBeyond=!1)),this.iframe.style.height="".concat(t,"px"),this.resizeCallback(this,t+8)},e.prototype.handleUlpSeeAllDealsClick=function(){var e,t;m.enqueue(function(e){var t=e.partnerNameIdentifier,n=e.decision,o=e.siteId,r=e.zoneId,a=e.customUrl,s=e.options,l=e.postalCode,u=e.campaignNameIdentifier;return d(d({},Me({schemaId:4292,partnerNameIdentifier:t,siteId:o,zoneId:r,options:s,postalCode:l,campaignNameIdentifier:u,shopperPlatformUx:i.UlpInline})),{decision:be(ze(n,o,r,a))})}({partnerNameIdentifier:this.publisherNameIdentifier,decision:d({},this.data),siteId:this.siteId,zoneId:this.zoneIds[0]||0,customUrl:this.getCustomUrl(),options:this.options,postalCode:null===(e=this.geoData)||void 0===e?void 0:e.postal_code,campaignNameIdentifier:null===(t=this.kevelMetadata)||void 0===t?void 0:t.campaignNameIdentifier}))},e.prototype.handleUlpClick=function(e,t){var n,o;return m.enqueue(function(e){var t=e.partnerNameIdentifier,n=e.decision,o=e.siteId,r=e.zoneId,a=e.customUrl,s=e.message,l=e.itemType,u=e.options,c=e.postalCode,p=e.campaignNameIdentifier;return d(d({},Me({schemaId:Pe(s.type),partnerNameIdentifier:t,siteId:o,zoneId:r,options:u,postalCode:c,campaignNameIdentifier:p,shopperPlatformUx:i.UlpInline})),{itemData:Te(l,s.detail),decision:be(ze(n,o,r,a))})}({partnerNameIdentifier:this.publisherNameIdentifier,decision:d({},this.data),siteId:this.siteId,zoneId:this.zoneIds[0]||0,customUrl:this.getCustomUrl(),message:t,itemType:e,options:this.options,postalCode:null===(n=this.geoData)||void 0===n?void 0:n.postal_code,campaignNameIdentifier:null===(o=this.kevelMetadata)||void 0===o?void 0:o.campaignNameIdentifier})),null},e.prototype.handleUlpItemImpressions=function(e){var t,n;return m.enqueue(function(e){var t,n=e.partnerNameIdentifier,o=e.decision,r=e.siteId,a=e.zoneId,s=e.customUrl,l=e.message,u=e.options,c=e.postalCode,p=e.campaignNameIdentifier;return d(d({},Me({schemaId:4291,partnerNameIdentifier:n,siteId:r,zoneId:a,options:u,postalCode:c,campaignNameIdentifier:p,shopperPlatformUx:i.UlpInline})),{itemData:(t=l.detail.items,t.map((function(e){var t=_e(e.itemType);return Te(t,e)}))),decision:be(ze(o,r,a,s))})}({partnerNameIdentifier:this.publisherNameIdentifier,decision:d({},this.data),siteId:this.siteId,zoneId:this.zoneIds[0]||0,customUrl:this.getCustomUrl(),message:e,options:this.options,postalCode:null===(t=this.geoData)||void 0===t?void 0:t.postal_code,campaignNameIdentifier:null===(n=this.kevelMetadata)||void 0===n?void 0:n.campaignNameIdentifier})),null},e.prototype.handleUlpErrorMessage=function(e){var t,n;return m.enqueue(function(e){var t=e.partnerNameIdentifier,n=e.decision,o=e.siteId,r=e.zoneId,a=e.customUrl,s=e.options,l=e.postalCode,u=e.campaignNameIdentifier,c=e.errorMessage;return d(d({},Me({schemaId:4326,partnerNameIdentifier:t,siteId:o,zoneId:r,options:s,postalCode:l,campaignNameIdentifier:u,shopperPlatformUx:i.UlpInline})),{decision:be(ze(n,o,r,a)),errorMessage:c})}({errorMessage:e,partnerNameIdentifier:this.publisherNameIdentifier,decision:d({},this.data),siteId:this.siteId,zoneId:this.zoneIds[0]||0,customUrl:this.getCustomUrl(),options:this.options,postalCode:null===(t=this.geoData)||void 0===t?void 0:t.postal_code,campaignNameIdentifier:null===(n=this.kevelMetadata)||void 0===n?void 0:n.campaignNameIdentifier})),null},e.prototype.getCustomUrl=function(){var e,t,i,n;return null!==(n=null!==(t=null===(e=this.kevelMetadata)||void 0===e?void 0:e.ulpUrl)&&void 0!==t?t:null===(i=this.kevelMetadata)||void 0===i?void 0:i.campaignConfigUrl)&&void 0!==n?n:"no-url"},e.prototype.registerScroll=function(){var e=this;if(!this.containerWindow||this.options.isGoogleAmp)return null;this.containerWindow.addEventListener("scroll",Ae((function(){if(!e.containerWindow||!e.containerElement||!e.contentElement)return null;var t=l(e.containerElement,e.contentElement,e.containerWindow);return null!==t&&e.sendMessage(g.INLINE_GEOMETRY,t),null}),66,{leading:!1,trailing:!0}))},e.prototype.registerTags=function(){var e={open:this.impressionUrl,engagement:this.engagementUrl};return I.addTags({campaignManagement:e}),null},e.prototype.initGoogleAmp=function(e,t){var i=this;return window.parent.postMessage({sentinel:"amp",type:"send-intersections"},"*"),window.parent.postMessage({sentinel:"amp",type:"embed-size",width:e,height:t},"*"),window.addEventListener("message",(function(e){if(e.source!==window.parent||e.origin===window.location.origin||!e.data||"amp"!==e.data.sentinel||"intersection"!==e.data.type)return null;e.data.changes.forEach((function(e){if(e.boundingClientRect.height<250)return i.sendMessage(g.INLINE_GEOMETRY,{yiv:0,h:0}),null;var t={self:{yiv:e.intersectionRatio,h:e.boundingClientRect.height}};i.sendMessage(g.INLINE_GEOMETRY,t)}))})),null},e.prototype.handleNoExperienceServed=function(){var e;return this.resizeCallback(this,0),this.sdk&&Y(null===(e=this.sdk)||void 0===e?void 0:e.platform),null},e.prototype.assignData=function(){var e,t,i;return this.creativeWidth=this.data.width,this.creativeHeight=this.data.height,this.engagementUrl=this.data.clickUrl,this.impressionUrl=this.data.impressionUrl,this._hoverExpandable=!("Desktop"!==(null===(e=ve())||void 0===e?void 0:e["com.flipp.beacon.shopperPlatform.enumeration.Platform"])||!this.options.startCompact&&!(null===(t=this.kevelMetadata)||void 0===t?void 0:t.startCompact))&&Boolean(null===(i=this.kevelMetadata)||void 0===i?void 0:i.hoverExpandable),null},e.prototype.calculateTargetDimensions=function(e){var t,i,n,o,r,a,s,l,d=this.creativeWidth&&this.creativeHeight?this.creativeHeight/this.creativeWidth:6,u=Math.max(Math.min(e.offsetWidth,1024),300),c=Math.min(window.screen.height-150,600),p=null!==(n=null!==(i=null===(t=this.kevelMetadata)||void 0===t?void 0:t.compactHeight)&&void 0!==i?i:this.options.compactHeight)&&void 0!==n?n:c,h=null!==(a=null!==(r=null===(o=this.kevelMetadata)||void 0===o?void 0:o.standardHeight)&&void 0!==r?r:this.options.standardHeight)&&void 0!==a?a:2400;return{targetWidth:u,targetHeight:null!==(s=this.options.safeFrameHeight)&&void 0!==s?s:Math.min(this.options.preview?200:u*d,this.options.startCompact||(null===(l=this.kevelMetadata)||void 0===l?void 0:l.startCompact)?p:h)}},e.prototype.isULPorSurveyPreview=function(){var e,t;return this._preview&&(null===(e=this.kevelMetadata)||void 0===e?void 0:e.ulpUrl)||this._preview&&(null===(t=this.kevelMetadata)||void 0===t?void 0:t.survey)},e.prototype.initializeIframe=function(e,t,i){var n,o,r=document.createElement("iframe");r.className="flippxp-frame",r.style.height="".concat(t,"px"),r.style.background="#fff",r.style.width=this.sdk||this.options.nestedIframeFullBleed?"100%":"".concat(e,"px"),r.setAttribute("scrolling","no"),r.setAttribute("frameborder","no"),r.setAttribute("allow","web-share");var a="https://shopper.flipp.com/static/1.2.0/latest";i?(a=i,(null===(n=this.geoData)||void 0===n?void 0:n.postal_code)&&(a="".concat(a,"&postal_code=").concat(null===(o=this.geoData)||void 0===o?void 0:o.postal_code))):(this.options.startCompact?r.style.maxWidth="650px":r.style.maxWidth=this.sdk||this.options.standalone?"1024px":"800px",r.style.margin="0 auto",r.style.display="block");var s=new URL(a);return this.preview&&s.searchParams.append("preview","true"),r.setAttribute("src",s.toString()),r},e.prototype.registerUlpMessageListeners=function(e){var t=this;window.addEventListener("message",(function(e){return t.handlePostMessages(e),null})),e.addEventListener("flipp-view",(function(){var e,n;return m.enqueue(function(e){var t=e.partnerNameIdentifier,n=e.decision,o=e.siteId,r=e.zoneId,a=e.customUrl,s=e.options,l=e.postalCode,u=e.campaignNameIdentifier;return d(d({},Me({schemaId:4285,partnerNameIdentifier:t,siteId:o,zoneId:r,options:s,postalCode:l,campaignNameIdentifier:u,shopperPlatformUx:i.UlpInline})),{decision:be(ze(n,o,r,a))})}({partnerNameIdentifier:t.publisherNameIdentifier,decision:d({},t.data),siteId:t.siteId,zoneId:t.zoneIds[0]||0,customUrl:t.getCustomUrl(),options:t.options,postalCode:null===(e=t.geoData)||void 0===e?void 0:e.postal_code,campaignNameIdentifier:null===(n=t.kevelMetadata)||void 0===n?void 0:n.campaignNameIdentifier})),null})),e.addEventListener("flipp-open",(function(){var e,n;return m.enqueue(function(e){var t=e.partnerNameIdentifier,n=e.decision,o=e.siteId,r=e.zoneId,a=e.customUrl,s=e.options,l=e.postalCode,u=e.campaignNameIdentifier;return d(d({},Me({schemaId:4286,partnerNameIdentifier:t,siteId:o,zoneId:r,options:s,postalCode:l,campaignNameIdentifier:u,shopperPlatformUx:i.UlpInline})),{decision:be(ze(n,o,r,a))})}({partnerNameIdentifier:t.publisherNameIdentifier,decision:d({},t.data),siteId:t.siteId,zoneId:t.zoneIds[0]||0,customUrl:t.getCustomUrl(),options:t.options,postalCode:null===(e=t.geoData)||void 0===e?void 0:e.postal_code,campaignNameIdentifier:null===(n=t.kevelMetadata)||void 0===n?void 0:n.campaignNameIdentifier})),I.sendOpen(),"function"==typeof window.flippxp.vimpTrackerFunc&&window.flippxp.vimpTrackerFunc(),null}),{once:!0}),e.addEventListener("flipp-heartbeat",(function(e){var n,o,r=e.detail.time;return m.enqueue(function(e){var t=e.partnerNameIdentifier,n=e.elapsedSeconds,o=e.decision,r=e.siteId,a=e.zoneId,s=e.customUrl,l=e.options,u=e.postalCode,c=e.campaignNameIdentifier;return d(d({},Me({schemaId:4284,partnerNameIdentifier:t,siteId:r,zoneId:a,options:l,postalCode:u,campaignNameIdentifier:c,shopperPlatformUx:i.UlpInline})),{elapsedSeconds:n,decision:be(ze(o,r,a,s))})}({partnerNameIdentifier:t.publisherNameIdentifier,elapsedSeconds:Math.round(r/1e3),decision:d({},t.data),siteId:t.siteId,zoneId:t.zoneIds[0]||0,customUrl:t.getCustomUrl(),options:t.options,postalCode:null===(n=t.geoData)||void 0===n?void 0:n.postal_code,campaignNameIdentifier:null===(o=t.kevelMetadata)||void 0===o?void 0:o.campaignNameIdentifier})),null})),e.addEventListener("flipp-engagement",(function(){var e,n;return m.enqueue(function(e){var t=e.partnerNameIdentifier,n=e.decision,o=e.siteId,r=e.zoneId,a=e.customUrl,s=e.options,l=e.postalCode,u=e.campaignNameIdentifier;return d(d({},Me({schemaId:4290,partnerNameIdentifier:t,siteId:o,zoneId:r,options:s,postalCode:l,campaignNameIdentifier:u,shopperPlatformUx:i.UlpInline})),{decision:be(ze(n,o,r,a))})}({partnerNameIdentifier:t.publisherNameIdentifier,decision:d({},t.data),siteId:t.siteId,zoneId:t.zoneIds[0]||0,customUrl:t.getCustomUrl(),options:t.options,postalCode:null===(e=t.geoData)||void 0===e?void 0:e.postal_code,campaignNameIdentifier:null===(n=t.kevelMetadata)||void 0===n?void 0:n.campaignNameIdentifier})),I.sendEngagement(),null}),{once:!0})},e.prototype.handleSdkOnload=function(){var e,t;if(null===(e=this.sdk)||void 0===e?void 0:e.platform)return(null===(t=this.data)||void 0===t?void 0:t.height)?(function(e,t,i){var n=window.devicePixelRatio,o={contentType:e,contentHeight:t,height:document.body.offsetHeight,devicePixelRatio:n};G(N.CONTENT_READY,o,i)}(this.getAdType(),this.data.height,this.sdk.platform),null):(Y(this.sdk.platform),null)},e.prototype.render=function(){var e,t,i=this;if(null==this.data||null==this.data.contents||0===this.data.contents.length)return this.handleNoExperienceServed(),null;this.kevelMetadata=this.data.contents[0].data.customData,this.assignData(),this.registerTags();var n=this.targetEl,o=n.querySelector(".flipp-ux-header");o&&!this.kevelMetadata.hideHeader&&(o.style.display="block");var r=this.calculateTargetDimensions(n),a=r.targetWidth,s=r.targetHeight;if(this.options.isGoogleAmp&&this.initGoogleAmp(a,s),!this.isULPorSurveyPreview()){if(this.iframe=this.initializeIframe(a,s,this.kevelMetadata.ulpUrl),this._contentElement=this.iframe,n.appendChild(this.iframe),this.containerWindow=window,this.containerElement=n,this.options.nestedIframe){var l=null!==(e=null==o?void 0:o.offsetHeight)&&void 0!==e?e:0,d=this._preview?200:document.body.offsetHeight+l+8;this.resizeCallback(this,d),this.containerWindow=window.parent,this.containerElement=null!==(t=Be())&&void 0!==t?t:n}this.intersectionObserver||(console.log("Register Event Listeners"),this.registerScroll()),this.registerUlpMessageListeners(this.iframe),this.kevelMetadata.ulpUrl&&Je(this.iframe,this.intersectionObserver,this.kevelMetadata.evTimerMs),this.sdk&&(this.iframe.onload=function(){return i.handleSdkOnload()})}},e}(),tt=[4309,641],it=3e3,nt=/(Googlebot-Mobile|Googlebot-Image|Googlebot-News|Googlebot-Video|Googlebot\/|AdsBot-Google([^-]|$)|AdsBot-Google-Mobile|Feedfetcher-Google|Mediapartners-Google|Mediapartners \(Googlebot\)|APIs-Google|bingbot|Slurp|YandexBot|LinkedInBot)/,ot=function(){function e(e,t,i,n,o){var r=this;this.startCountdownFunctions=new Map,this.startCountdownWithMap=function(e){var t;return r.startCountdownFunctions.has(e)||r.startCountdownFunctions.set(e,(function(){return r.startCountdown(e)})),null!==(t=r.startCountdownFunctions.get(e))&&void 0!==t?t:function(){return null}},this.tickCountdown=function(){if(void 0===r.countdownStart||void 0===r.countdownExperience)return null;var e=Date.now()-r.countdownStart,t=r.getDwellDuration(r.countdownExperience),i=r.experiences[r.countdownExperience],n=t/r.getDwellSteps(r.countdownExperience)+.01;i.sendCountdownState(r.countdownStart+t,n),e>=t&&r.completeCountdown()},this.hoverCallback=function(e){return e.forEach((function(e,t){var i=e.target;e.isIntersecting?(r.fullyVisibleExperiences.push(t),i.addEventListener("mouseover",r.startCountdownWithMap(t))):(r.fullyVisibleExperiences=r.fullyVisibleExperiences.filter((function(e){return t!==e})),r.markers[t].active||i.removeEventListener("mouseover",r.startCountdownWithMap(t)))})),null},this.observerCallback=function(e){e.forEach((function(e){var t=e.target;r.markers.forEach((function(i){i.el===t&&(i.active=e.isIntersecting)}))}));var t=!1;r.markers.forEach((function(e,i){var n,o=r.experiences[i],a=i>0?r.experiences[i-1]:null,s=0===i,l=a&&a.expandCount>=1;(!o.preview&&o.expandCount<1||o.preview&&(l||s))&&!t&&e.active?(r.countdownExperience!==i&&(r.stopCountdown(),o.expandCount<1&&(o.hoverExpandable&&o.contentElement&&1===r.experiences.length?o.contentElement.addEventListener("mouseover",r.startCountdownWithMap(i)):r.startCountdown(i))),t=!0):e.active||(r.fullyVisibleExperiences.includes(i)||null===(n=o.contentElement)||void 0===n||n.removeEventListener("mouseover",r.startCountdownWithMap(i)),r.countdownExperience===i&&r.stopCountdown())}))},this.scrollBeyondCallback=function(e){return e.filter((function(e){return e.isIntersecting})).map((function(e){return r.markers.find((function(t){return t.el===e.target}))})).filter((function(e){return e&&r.experiences[e.index]})).forEach((function(e){var t;return r.experiences[null!==(t=null==e?void 0:e.index)&&void 0!==t?t:0].scrollBeyond()})),null},this.resizeExperience=function(e,t){return r.options.nestedIframe&&r.targetEl&&e.contentElement&&(e.contentElement.style.height="".concat(t,"px"),Ve(r.targetEl.offsetHeight,!(!r.options.isGoogleAdManager&&!r.options.nestedIframeShared),!!r.options.nestedIframeFullBleed)),null},this.handlePreviewEnded=function(){return r.appendPreview(),null},this.sendImpression=function(e){var t=e.cpm;return m.enqueue(function(e){var t=e.partnerNameIdentifier,i=e.siteId,n=e.zoneId,o=e.options,r=e.cpm;return d(d({},Me({partnerNameIdentifier:t,siteId:i,zoneId:n,options:o,schemaId:4296})),{CPM:r&&Number.isInteger(r)?{long:r}:null})}({partnerNameIdentifier:r.publisherNameIdentifier,siteId:r.siteId,zoneId:r.zoneIds[0]||0,options:r.options,cpm:t})),null},this.targetSelector=e,this.publisherNameIdentifier=t?t.toString():"undefined",this.siteId=de(i),this.zoneIds=n.map((function(e){return de(e)})),this.options=o,this.requested=!1,this.experiences=[],this.markers=[];var a=new URL(window.location.toString());this.experienceLimit=Number(a.searchParams.get("flipp-experience-limit"))||o.experienceLimit||1,this.fullyVisibleExperiences=[],this.dwellObserver=new IntersectionObserver(this.observerCallback,{rootMargin:"-70% 0px -5% 0px"}),this.scrollBeyondObserver=new IntersectionObserver(this.scrollBeyondCallback,{rootMargin:"-95% 0px 0px 0px"}),this.hoverObserver=new IntersectionObserver(this.hoverCallback,{threshold:1})}return e.prototype.completeCountdown=function(){if(void 0===this.countdownExperience)return null;var e=this.experiences[this.countdownExperience];e.preview?(e.handleEndPreview(),this.appendPreview()):e.requestExpand(),this.stopCountdown()},e.prototype.stopCountdown=function(){(this.countdownInterval&&window.clearInterval(this.countdownInterval),void 0!==this.countdownExperience)&&this.experiences[this.countdownExperience].sendCountdownState();return this.countdownInterval=void 0,this.countdownExperience=void 0,this.countdownStart=void 0,null},e.prototype.startCountdown=function(e){var t=this.getDwellDuration(e)/this.getDwellSteps(e);return this.countdownExperience=e,this.countdownStart=Date.now(),this.tickCountdown(),this.countdownInterval=window.setInterval(this.tickCountdown,t),null},e.prototype.getDwellDuration=function(e){var t,i=null===(t=this.decisionPayload)||void 0===t?void 0:t.decisions.inline[e].contents[0].data.customData;return i.dwellTimerMs?de(i.dwellTimerMs||it,it):it},e.prototype.getDwellSteps=function(e){var t,i=null===(t=this.decisionPayload)||void 0===t?void 0:t.decisions.inline[e].contents[0].data.customData;return i.dwellSteps?de(i.dwellSteps,3):3},e.prototype.request=function(){var e=this;return this.requested?null:(this.targetEl=document.querySelector(this.targetSelector),this.targetEl?(this.options.sdkConfig?function(e){S=e}((function(){return e.getExperiences()})):this.options.isGoogleAmp?this.getExperiences():Ue(this.targetEl,(function(){return e.getExperiences()}),this.options.rootElement),void(this.requested=!0)):(console.log("No target div found for",this.targetSelector),null))},e.prototype.insertPassback=function(e){if(!this.targetEl)return null;var t=document.createElement("iframe");t.src="about:blank",t.style.width=this.options.passbackWidth||"100%",t.style.height=this.options.passbackHeight||"600px",t.setAttribute("scrolling","no"),t.setAttribute("frameborder","no"),this.targetEl.appendChild(t),t.contentWindow&&(t.contentWindow.document.open(),t.contentWindow.document.write(e),t.contentWindow.document.close())},e.prototype.addExperience=function(e,t){var i,n,o,r,a,s=this;void 0===e&&(e=!1),void 0===t&&(t=0);var l=(null===(o=null===(n=null===(i=this.decisionPayload)||void 0===i?void 0:i.decisions)||void 0===n?void 0:n.inline)||void 0===o?void 0:o.length)||0;if(!this.targetEl||!this.decisionPayload||t>=l)return null;var d=Object.assign({},this.options,{preview:e}),c=new et({targetEl:this.targetEl,publisherNameIdentifier:this.publisherNameIdentifier,data:null===(r=this.decisionPayload)||void 0===r?void 0:r.decisions.inline[t],options:d,resizeCallback:this.resizeExperience,siteId:this.siteId,zoneIds:this.zoneIds,handlePreviewEnded:this.handlePreviewEnded,geoData:this.decisionPayload.location,keywords:u([],We(),!0)});this.experiences.push(c),c.render(),c.hoverExpandable&&1===l&&(null===(a=c.contentElement)||void 0===a||a.addEventListener("mouseleave",(function(){s.stopCountdown()})));var p=document.createElement("div");p.style.height="0px",this.targetEl.appendChild(p),this.markers.push({el:p,active:!1,index:t}),this.scrollBeyondObserver.observe(p),this.options.dwellExpandable&&(c.contentElement&&c.hoverExpandable&&1===l&&(this.dwellObserver=new IntersectionObserver(this.observerCallback,{rootMargin:"-50% 0px 0px 0px"}),this.hoverObserver.observe(c.contentElement)),this.dwellObserver.observe(p))},e.prototype.appendPreview=function(){var e,t,i=(null===(t=null===(e=this.decisionPayload)||void 0===e?void 0:e.decisions)||void 0===t?void 0:t.inline.length)||0;return this.decisionPayload?this.experienceLimit<=this.experiences.length||i<=this.experiences.length?null:void this.addExperience(!0,this.experiences.length):null},e.prototype.getGeolocatedExperience=function(e){var t=this;if(nt.test(navigator.userAgent))return null;this.queueRequestMadeBeacon(),(this.options.campaigns?Promise.resolve(JSON.parse(this.options.campaigns)):fetch("https://gateflipp.flippback.com/flyer-locator-service/campaigns",{method:"POST",credentials:"omit",body:JSON.stringify(e),headers:{"Content-Type":"text/plain"}}).then((function(e){return e.ok||t.queueFailureBeacon(e),e.json()}))).then((function(e){var i,n;t.queueSuccessBeacon(e),t.decisionPayload=e;var o=e.decisions&&Object.keys(e.decisions).length;if(t.options.isGoogleAdManager){var r=function(e,t){e.setAttribute("style",t)},a="height: auto !important; width: 100% !important; \n            display: block !important; max-height: initial !important";if(window.parent.document.querySelectorAll("[data-freestar-ad]").forEach((function(e){var t;if(1===e.children.length){var i=e.querySelector("iframe");(null===(t=null==i?void 0:i.contentDocument)||void 0===t?void 0:t.querySelector(".flippxp-frame"))&&r(e,a)}})),t.options.rootElement){var s=window.parent.document,l=null==s?void 0:s.querySelector(t.options.rootElement);l&&1===l.children.length&&r(l,a)}else{var d=window.frameElement;if(d){var u=d.parentElement,c=null==u?void 0:u.parentElement,p=null==u?void 0:u.children.length,h=null==c?void 0:c.children.length;if(!o&&c&&1===p&&1===h)return void(c.style.display="none");t.options.nestedIframeResizing&&c&&1===p&&1===h&&(1===(null===(n=null===(i=null==c?void 0:c.parentElement)||void 0===i?void 0:i.children)||void 0===n?void 0:n.length)&&r(c.parentElement,a),r(c,a))}}}var f=document.getElementById("flyerWidgetLabel");if(!o&&f&&(f.style.display="none"),!t.options.passbackTag||e.decisions&&e.decisions.inline&&!(e.decisions.inline.length<1)&&null!==e.decisions.inline[0])(t.options.nestedIframe&&!e.decisions||!e.decisions.inline||e.decisions.inline.length<1||null===e.decisions.inline[0])&&Ve(0,!(!t.options.isGoogleAdManager&&!t.options.nestedIframeShared),!!t.options.nestedIframeFullBleed),t.addExperience(),e.decisions.inline&&e.decisions.inline.length>1&&t.appendPreview();else{var m="function"==typeof t.options.passbackTag?t.options.passbackTag():t.options.passbackTag;if("object"==typeof m&&"function"==typeof m.then)return m.then((function(e){if(!e)throw new Error(JSON.stringify(e));return t.insertPassback(e),null})).catch((function(e){var t=e instanceof Error?e.message:"unknown";throw new Error("Passback promise fallthrough. Hiding experience: "+t)}));if("string"!=typeof m||!m)throw new Error("Passback fallthrough. Hiding experience");t.insertPassback(m)}})).catch((function(e){return e.message.startsWith("Passback")?console.warn("Flipp Experience failed to load: ",e.message):(f.error("Slot error",e),t.queueErrorBeacon(e)),t.options.nestedIframe&&0===t.experiences.length&&Ve(0,!(!t.options.isGoogleAdManager&&!t.options.nestedIframeShared),!!t.options.nestedIframeFullBleed),null}))},e.prototype.getExperiences=function(){var e,t={divName:"inline",networkId:10922,siteId:this.siteId,adTypes:tt,count:this.experienceLimit};void 0!==this.zoneIds&&null!=this.zoneIds&&this.zoneIds.length>0&&(t.zoneIds=this.zoneIds);var i={},n=null!==(e=new URL(window.location.toString()).searchParams.get("flipp-content-code"))&&void 0!==e?e:this.options.flippContentCode;n&&n.length>0&&(i.contentCode=n.slice(0,32)),t.properties=i;var o=u(u(u([],We(),!0),function(e,t){var i=window.location.href,n=document.title.trim(),o=Ye(document.querySelectorAll("p")),r=Ye(document.querySelectorAll("a")),a="".concat(i," ").concat(n," ").concat(o.join(" ")," ").concat(r.join(" "));return t?Ge(a,e):function(e,t){return t.filter((function(t){return e.toLowerCase().includes(t.toLowerCase())}))}(a,e)}(Xe,!0),!0),V(),!0),r={placements:[t],url:window.location.href,keywords:o},a=Q(this.options);return a&&(r.user={key:a}),this.getGeolocatedExperience(r),this.queueRequestContextBeacon(o),null},e.prototype.queueRequestContextBeacon=function(e){var t="".concat(location.origin).concat(location.pathname),i=Array.from(new URLSearchParams(window.location.search).entries());return m.enqueue(function(e){var t,i=e.partnerNameIdentifier,n=e.siteId,o=e.zoneId,r=e.country,a=e.postalCode,s=e.keywords,l=e.category,u=e.pageUrl,c=e.queryParams,p=e.options,h=d(d({},Me({partnerNameIdentifier:i,siteId:n,zoneId:o,options:p,postalCode:a,schemaId:4330})),{country:ge(r),keywords:s,category:l,pageUrl:u,queryParams:ke(c),referrer:"FlippAvroDefault"}),f=new URL(window.location.toString()),m=null!==(t=f.searchParams.get("utm_source"))&&void 0!==t?t:f.searchParams.get("referrer");return m&&m.length>0&&(h.referrer=m),h}({partnerNameIdentifier:this.publisherNameIdentifier,siteId:this.siteId,zoneId:this.zoneIds[0]||0,keywords:u([],e,!0),category:je(),pageUrl:t,queryParams:i,options:this.options})),null},e.prototype.queueRequestMadeBeacon=function(){return m.enqueue(function(e){var t=e.partnerNameIdentifier,i=e.siteId,n=e.zoneId,o=e.country,r=e.postalCode,a=e.options;return d(d({},Me({partnerNameIdentifier:t,siteId:i,zoneId:n,postalCode:r,options:a,schemaId:4281})),{country:ge(o)})}({partnerNameIdentifier:this.publisherNameIdentifier,siteId:this.siteId,zoneId:this.zoneIds[0]||0,options:this.options})),null},e.prototype.queueFailureBeacon=function(e){return m.enqueue(Se({partnerNameIdentifier:this.publisherNameIdentifier,siteId:this.siteId,zoneId:this.zoneIds[0]||0,errorMessage:"Campaigns request failed",responseCode:e.status,options:this.options})),null},e.prototype.queueSuccessBeacon=function(e){var t=e.decisions.inline&&e.decisions.inline[0].contents.length>0,i=function(e){var t,i,n,o={url:"no-campaign-url-nor-ulp",campaignNameIdentifier:"no-campaign-name-identifier"};if((null===(t=e.decisions)||void 0===t?void 0:t.inline)&&e.decisions.inline.length>0){var r=e.decisions.inline[0].contents[0].data.customData,a=null!==(i=null==r?void 0:r.campaignConfigUrl)&&void 0!==i?i:null==r?void 0:r.ulpUrl;o={url:null!=a?a:"no-campaign-url-nor-ulp",campaignNameIdentifier:null!==(n=null==r?void 0:r.campaignNameIdentifier)&&void 0!==n?n:"no-campaign-name-identifier"}}return o}(e),n=i.url,o=i.campaignNameIdentifier,r=e.decisions.inline?[{campaignId:e.decisions.inline[0].campaignId,siteId:de(this.siteId),zoneId:de(this.zoneIds[0])||0,adId:e.decisions.inline[0].adId,creativeId:e.decisions.inline[0].creativeId,flightId:e.decisions.inline[0].flightId,advertiserId:e.decisions.inline[0].advertiserId,customUrl:t?{string:n}:null}]:[],a=null==e?void 0:e.location;return m.enqueue(function(e){var t=e.partnerNameIdentifier,i=e.campaignNameIdentifier,n=e.siteId,o=e.zoneId,r=e.country,a=e.postalCode,s=e.decisions,l=e.options;return d(d({},Me({campaignNameIdentifier:i,partnerNameIdentifier:t,siteId:n,zoneId:o,options:l,postalCode:a,schemaId:4282})),{country:ge(r),decisions:s})}({campaignNameIdentifier:o,partnerNameIdentifier:this.publisherNameIdentifier,siteId:this.siteId,zoneId:this.zoneIds[0]||0,country:null==a?void 0:a.country,postalCode:null==a?void 0:a.postal_code,decisions:r,options:this.options})),null},e.prototype.queueErrorBeacon=function(e){return m.enqueue(Se({partnerNameIdentifier:this.publisherNameIdentifier,siteId:this.siteId,zoneId:this.zoneIds[0]||0,errorMessage:e.message+" - "+(e.stack||""),responseCode:0,options:this.options})),null},e}(),rt=function(){function e(){var e=this;this.handleReadyStateChange=function(){return e.checkReady()&&(e.waitingForDocument=!1,e.load(),document.removeEventListener("readystatechange",e.handleReadyStateChange)),null},this.waitingForDocument=!1,this.slots=[]}return e.prototype.checkReady=function(){var e=this.slotsAllInDocument();return!(!e||"interactive"!==document.readyState&&"complete"!==document.readyState)||(!(!this.anySlotInDocument()||"complete"!==document.readyState)||(e||console.info("Missing slot target div at state",document.readyState),!1))},e.prototype.anySlotInDocument=function(){return this.slots.some((function(e){return document.querySelector(e.targetSelector)}))},e.prototype.slotsAllInDocument=function(){return this.slots.every((function(e){return Boolean(document.querySelector(e.targetSelector))}))},e.prototype.load=function(){return this.slots.forEach((function(e){return e.request()})),null},e.prototype.register=function(e,t,i,n,o){void 0===o&&(o={});var r=window.flippxp.settings||{},a=new ot(e,t,i,n,d(d({},r),o));return this.slots.push(a),this.checkReady()?this.load():this.waitingForDocument||(this.waitingForDocument=!0,document.addEventListener("readystatechange",this.handleReadyStateChange)),a},e}(),at=!1;for(window.handleMessageFromNative=function(e){var t=e.detail;switch(e.type){case N.EXPERIENCE_LOAD:t.context_list&&t.context_list.length>0&&(T=t.context_list),S(),t.features.length>0&&(M=Z(t.features));break;case N.EXPERIENCE_VIEWPORT:X(e)}return null},window.flippxp=window.flippxp||{},window.flippxp.evTag=window.flippxp.evTag||{},window.flippxp.run=window.flippxp.run||[],window.flippxp.calculateGeomData=l,window.flippxp.overrideOptions=function(e){var t=new URL(window.location.toString()),i=t.searchParams.get("flipp-test-dwell-expandable"),n=t.searchParams.get("flipp-test-experience-limit"),o=de(n,0),r=t.searchParams.get("flipp-test-start-compact"),a=t.searchParams.get("flipp-test-nested-iframe-resizing"),s=t.searchParams.get("flipp-test-root-element"),l=d({},e);return null!==i&&(l=d(d({},l),{dwellExpandable:"true"===i})),o&&(l=d(d({},l),{experienceLimit:Math.max(1,o)})),null!==r&&(l=d(d({},l),{startCompact:"true"===r})),null!==a&&(l=d(d({},l),{nestedIframeResizing:"true"===a})),null!==s&&(l=d(d({},l),{rootElement:s})),l},window.flippxp.vimpTrackerFunc=window.flippxp.vimpTrackerFunc||function(){window!==window.parent&&window.parent.postMessage({type:g.VIMP},"*")},window.flippxp.cookieSynced=window.flippxp.cookieSynced||!1,window.flippxp.registerSlot=function(e,t,i,n,o){return void 0===o&&(o={}),at||(at=!0,m.enqueue(function(e){var t=e.partnerNameIdentifier,i=e.siteId,n=e.zoneId,o=e.options;return d({},Me({partnerNameIdentifier:t,siteId:i,zoneId:n,options:o,schemaId:4279}))}({partnerNameIdentifier:t,siteId:i,zoneId:n[0]||0,options:o}))),window.flippxp.slotManager=window.flippxp.slotManager||new rt,window.flippxp.slotManager.register(e,t,i,n,window.flippxp.overrideOptions(o))};window.flippxp.run.length>0;){window.flippxp.run.shift()()}window.flippxp.run.push=function(e){return e(),null}}();
//# sourceMappingURL=flipptag.js.map
