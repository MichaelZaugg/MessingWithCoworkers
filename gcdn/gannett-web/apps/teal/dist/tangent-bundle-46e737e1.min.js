!function(){"use strict";window.Teal=window.Teal||{};window.Teal.HLS=class{constructor(t,e){this.ready=e,this.parent=t,this._loaded=new Promise((t,e)=>{this.parent.settings.hls.load&&!window.Hls?this.load(t,e):window.Hls&&(this.init(),t())})}async load(t,e){try{await Teal.Utils.loadAndWaitForInit(this.parent.settings.hls.scriptUrl,"hls","Hls"),this.init(),t()}catch(t){this.parent._mp4Fallback(),e()}}init(){this.hls=new Hls({maxBufferSize:this.parent.settings.hls.maxBufferSize,maxMaxBufferLength:this.parent.settings.hls.maxMaxBufferLength}),this._hlsEvents(),this.ready()}_hlsEvents(){let t=(e,s)=>{(s.fatal||s.response&&404===s.response.code)&&(this.hls.off(Hls.Events.ERROR,t),s.context&&"subtitleTrack"!==s.context.type&&this.parent._mp4Fallback())};this.hls.on(Hls.Events.ERROR,t);let e=0;this.hls.on(window.Hls.Events.FRAG_LOADED,()=>{let t=this.hls.currentLevel>=0?this.hls.levels[this.hls.currentLevel].bitrate:0;Teal.Utils.UA.isMobile||(0===e&&(this.hls.loadLevel=-1),e++),this.parent.sm.bitRate!==t&&(this.parent.sm.bitRate=t)})}_videoLoad(){return this.hls||this.init(),new Promise((t,e)=>{this._loaded.then(()=>{this.parent.sm.hlsLoaded=!0,this.hls.loadSource(this.parent.data.hlsURL),this.hls.attachMedia(this.parent.elements.video),this.hls.on(Hls.Events.MANIFEST_PARSED,(e,s)=>{Teal.Utils.UA.isMobile||(this.hls.loadLevel=s.levels.length-1),t()}),this.hls.on(Hls.Events.SUBTITLE_TRACKS_UPDATED,(t,e)=>{e.subtitleTracks&&e.subtitleTracks[0]&&(e.subtitleTracks[0].default=!0)}),this.hls.on(Hls.Events.SUBTITLE_TRACK_LOADED,t=>{this.parent.sm.notifyEvent(this.parent.sm.EVENTS.subtitletrackadded)})})})}destroy(){this.hls&&(this.hls.destroy(),this.hls=null)}},window.Teal.HLS,window.Teal=window.Teal||{};window.Teal.IMA=class{constructor(t,e){this.parent=t,this.ready=e,this.isSkippable=!1,!this.parent.settings.ima.load||window.google&&window.google.ima?window.google&&window.google.ima&&this.init():this.load()}async load(){try{await Teal.Utils.loadScript("ima",this.parent.settings.ima.scriptUrl),this.init()}catch(t){this.parent._disablePreroll(),this.ready.reject()}}init(){Teal.Utils.waitForInit("google").then(()=>{google.ima.settings.setDisableCustomPlaybackForIOS10Plus(!0);let t=(this.parent.settings.ima.vpaidMode||"ENABLED").toUpperCase();google.ima.settings.setVpaidMode(google.ima.ImaSdkSettings.VpaidMode[t]),this.parent.adDisplayContainer||this._createDisplayContainer(),this._createAdsLoader(),this._loadIAS(),this._resetAdPlusFlags(),Teal.Utils._registerEvents(this,[{event:"resize",handler:Teal.Utils.debounce(()=>{this._adResize()},100)}],window),this.ready.resolve()},()=>{this.parent._disablePreroll(),this.ready.reject()})}_initIAS(){if(!this.iasLoaded)return;let t={anId:this.parent.settings.ias.anId,campId:`${this.parent.elements.adContainer.offsetWidth}x${this.parent.elements.adContainer.offsetHeight}`,partner:this.parent.settings.ias.partner};window.googleImaVansAdapter.init(window.google,this.adsManager,this.parent.elements.adContainer,t)}_loadIAS(){this.parent.settings.ias.enable&&(this.parent.settings.ias.load?Teal.Utils.loadAndWaitForInit(this.parent.settings.ias.scriptUrl,"tealplayer_ias","googleImaVansAdapter").then(()=>{this.iasLoaded=!0}).catch(()=>{}):Teal.Utils.waitForInit("googleImaVansAdapter").then(()=>{this.iasLoaded=!0}))}_createDisplayContainer(){this.parent.adDisplayContainer=new google.ima.AdDisplayContainer(this.parent.elements.adContainer,this.parent.elements.video)}_createAdsLoader(){this.adsLoader=new google.ima.AdsLoader(this.parent.adDisplayContainer);let t=[{event:google.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,handler:this._onAdsManagerLoaded},{event:google.ima.AdErrorEvent.Type.AD_ERROR,handler:this._onError}];Teal.Utils._registerEvents(this,t,this.adsLoader)}_onAdsManagerLoaded(t){let e=new google.ima.AdsRenderingSettings;e.restoreCustomPlaybackStateOnAdBreakComplete=!0,e.loadVideoTimeout=-1,this.adsManager=t.getAdsManager(this.parent.elements.video,e),this._setMute(),this.parent.sm.setPrerollState(this.parent.sm.states.READY),this._initIAS(),this._setupListeners(),this._start()}_kickoff(){this.parent.sm.setPrerollState(this.parent.sm.states.LOADING),this.parent.sm.adDisplayInitialized||this.parent.adDisplayContainer.initialize();const t=this._createAdRequest();this.adsLoader.requestAds(t),this.parent.sm.imaKickedOff=!0}_makeAdRequestWhenDocumentVisible(){if(document.hidden){let t=this;addEventListener("visibilitychange",function e(){!document.hidden&&t&&(t._kickoff(),t=null,removeEventListener("visibilitychange",e))})}else this._kickoff()}_play(){this.adsManager&&this.adsManager.resume()}_pause(){this.adsManager&&this.adsManager.pause()}_start(){this.adsManager.init(this.parent.elements.adContainer.offsetWidth,this.parent.elements.adContainer.offsetHeight,google.ima.ViewMode.NORMAL),this.adsManager.start()}_createAdRequest(){const t=new google.ima.AdsRequest;return t.adTagUrl=this._buildCall(),this.prebidParams={},this.scp="",t.linearAdSlotWidth=640,t.linearAdSlotHeight=400,this.parent.settings.ima.overridePageUrl&&(t.pageUrl=this.parent.settings.ima.overridePageUrl),0===this.parent.sm.playbackIndex&&this.parent.settings.base.startMuted&&(t.setAdWillAutoPlay(!0),t.setAdWillPlayMuted(!0)),t}_setupListeners(){let t=[{event:google.ima.AdError.Type.AD_LOAD,handler:this._onError},{event:google.ima.AdError.Type.AD_PLAY,handler:this._onError},{event:google.ima.AdErrorEvent.Type.AD_ERROR,handler:this._onError},{event:google.ima.AdEvent.Type.CLICK,handler:this._onClick},{event:google.ima.AdEvent.Type.STARTED,handler:this._onStart},{event:google.ima.AdEvent.Type.COMPLETE,handler:this._onComplete},{event:google.ima.AdEvent.Type.ALL_ADS_COMPLETED,handler:this._onComplete},{event:google.ima.AdEvent.Type.SKIPPED,handler:this._onSkip},{event:google.ima.AdEvent.Type.LOADED,handler:this._onLoaded},{event:google.ima.AdEvent.Type.PAUSED,handler:this._onPause},{event:google.ima.AdEvent.Type.RESUMED,handler:this._onPlay},{event:google.ima.AdEvent.Type.IMPRESSION,handler:this._onImpression},{event:google.ima.AdEvent.Type.LOG,handler:this._onLog},{event:google.ima.AdEvent.Type.VOLUME_CHANGED,handler:this._setMute},{event:google.ima.AdEvent.Type.THIRD_QUARTILE,handler:this._onThirdQuartile}];Teal.Utils._registerEvents(this,t,this.adsManager)}_adHasOwnSkip(){if(!this.ad)return;let t;try{t=Teal.Utils.getNested(JSON.parse(this.ad.getTraffickingParametersString()||"{}"),"capabilities","skipButton")}catch(e){t=!1}return this.ad.isSkippable()||t}_adResize(){let t,e=Teal.Utils.getNested(window.google,"ima","ViewMode","NORMAL")||"normal";this.parent.sm.fullscreen?(t=window.innerWidth,e=Teal.Utils.getNested(window.google,"ima","ViewMode","FULLSCREEN")||"fullscreen"):t=Math.floor(this.parent.elements.container.offsetWidth),this._resize(t,.5625*t,e)}_resize(t,e,s){this.adsManager&&this.adsManager.resize(t,e,s)}_setMute(){this.parent.isMuted&&this._setVolume(0)}_setSkipState(){if(this.isSkippable&&!this._adHasOwnSkip()&&this.adsManager)return!!(this.adCount&&this.adCount>1)||this.adData.duration-this.parent.settings.ima.userWaitTime>=this.remainingTime&&this.remainingTime>0}_setVolume(t){this.adsManager&&this.adsManager.setVolume(t)}_onClick(){this.parent.sm.state===this.parent.sm.states.PLAYING&&this.parent.pause()}_onError(t){this.adPlusRequestMade=!1,this.adFailures+=1,this._onComplete(t),this.parent.sm.notifyEvent("adError")}_onStart(t){this.adPlusRequestMade=!1,this.parent.elements.adContainer.style.visibility="",this.parent.sm.setPrerollState(this.parent.sm.states.STARTED),this.parent.sm.setPrerollState(this.parent.sm.states.PLAYING),this.parent.sm.notifyEvent(this.parent.sm.EVENTS.adStarted)}_resetAdPlusFlags(){this._adPlusEnabled&&(this.adFailures=this.adCount=0)}_disableAdPlus(){this._adPlusEnabled&&(this._resetAdPlusFlags(),this.adPlusComplete=this.parent.settings.ima.adPlusEnabled=this.parent.settings.ima.adPlusPlusEnabled=!1)}get _adPlusEnabled(){return this.parent.settings.ima.adPlusEnabled}get _adPlusPlusEnabled(){return this.parent.settings.ima.adPlusPlusEnabled}get _supportsAdPlus(){if(!this._adPlusEnabled||!this._adPlusPlusEnabled&&document.hidden)return;let t=!1,e=this.parent.settings.ima.adPlusMaxFailures,s=this.parent.settings.ima.adPlusMaxRequests,i=this.adFailures<e,a=this.adCount<s;return t=!(this.parent.sm.playbackIndex!==this.parent.settings.ima.adPlusRequiredPlays||!i||!a)}_onComplete(t){let e=t&&t.type?t.type:"";if(e===google.ima.AdEvent.Type.SKIPPED&&this._disableAdPlus(),this._adPlusEnabled&&this.adCount===this.parent.settings.ima.adPlusMaxRequests&&this._disableAdPlus(),this._supportsAdPlus){if(e===google.ima.AdEvent.Type.COMPLETE||e===google.ima.AdEvent.Type.ALL_ADS_COMPLETED)this.adPlusComplete||this._adPlusPlusEnabled&&this.adPlusRequestMade||(this.adPlusRequestMade=!0,this.parent.sm.setPrerollState(this.parent.sm.states.DONE),this.adCount===this.parent.settings.ima.adPlusMaxRequests-1&&(this.adPlusComplete=!0,this.parent.sm.notifyEvent(this.parent.sm.EVENTS.adPlusComplete)),this._adPlusPlusEnabled?this._makeAdRequestWhenDocumentVisible():this._kickoff());else if([google.ima.AdError.Type.AD_LOAD,google.ima.AdError.Type.AD_PLAY,google.ima.AdErrorEvent.Type.AD_ERROR].indexOf(e)>=0)if(this._adPlusPlusEnabled){const t=this;setTimeout(()=>{t._makeAdRequestWhenDocumentVisible()},4e3)}else this._kickoff()}else this.parent.sm.setPrerollState(this.parent.sm.states.DONE),this.parent.elements.adContainer.style.visibility="hidden",this._destroyAds(),this._resetAdPlusFlags(),this.adPlusRequestMade=!1}_onSkip(t){this.parent.sm.notifyEvent(this.parent.sm.EVENTS.skip),this._disableAdPlus(),this._onComplete(t)}_onLoaded(t){this.ad=t.getAd(),this.adData=t.getAdData(),"videostop"===this.adData.title.toLowerCase()&&this._disableAdPlus(),this.isSkippable=this._supportsAdPlus&&this.adCount>=1||this.adData.duration>this.parent.settings.ima.requiredSkipAdLength}_onPause(){this.parent.sm.setPrerollState(this.parent.sm.states.PAUSED)}_onPlay(){this.parent.sm.setPrerollState(this.parent.sm.states.PLAYING)}_onImpression(){this.adPlusRequestMade=!1,this._supportsAdPlus&&(this.adCount+=1),this.adFailures=0}_onLog(t){}_onThirdQuartile(t){this.parent.sm.notifyEvent(this.parent.sm.EVENTS.thirdQuartile)}_buildTestCall(){return"https://pubads.g.doubleclick.net/gampad/ads?sz=640x480&iu=/124319096/external/single_ad_samples&ciu_szs=300x250&impl=s&gdfp_req=1&env=vp&output=vast&unviewed_position_start=1&cust_params=deployment%3Ddevsite%26sample_ct%3Dskippablelinear&correlator="}_buildCall(){if(this.parent.settings.ima.url)return this.parent.settings.ima.url;let t=new URLSearchParams(window.location.search);if(t.has("tealadurl"))return window.decodeURI(t.get("tealadurl"));let e="https://pubads.g.doubleclick.net/gampad/ads?";return this.parent.settings.ima.targetingConsent||(e+="rdp=1"),e+=this._buildParams(this._getRequiredParams()),e+=`&cust_params=${encodeURIComponent(this._buildParams(this._getCustParams()))}`}_buildParams(t){return Object.keys(t).reduce((e,s)=>e+`&${s}=${t[s]}`,"")}_getRequiredParams(){const t=window.location.href,e=t.indexOf("?"),s=t.indexOf("#"),i=e>-1,a=s>-1;let n=this.parent.data;return{ad_rule:0,cmsid:12768,description_url:encodeURIComponent(n.pageURL.long),env:"vp",gdfp_req:1,hl:"en",iu:this._getIU(),output:"xml_vast4",scp:this._getSCP(),sz:this._getSZ(),unviewed_position_start:1,url:encodeURIComponent(i||a?t.slice(0,i?a&&e>s?s:e:s):t),vid:n.id}}_getIU(){let t=Teal.Utils.UA.isMobile?this.parent.settings.ima.mobileAccountName:this.parent.settings.ima.accountName;return`/${this.parent.settings.ima.accountId}/${t}/${this._getPlacement()}/${this.parent.data.awsPath}`}_getSZ(){return Teal.Utils.UA.isMobile?this.parent.settings.ima.mobileSize:this.parent.settings.ima.desktopSize}_getPlacement(){return Teal.Utils.UA.isMobile?this.parent.settings.ima.mobilePlacement:this.parent.settings.ima.placement}_getSCP(){return this.scp}_getPrebidParams(){return this.prebidParams}get duration(){return this.adData?this.adData.duration:0}get remainingTime(){return this.adsManager&&this.adData&&this.adsManager.getRemainingTime()}get startedBy(){if(this._adPlusPlusEnabled)return"ad-unlimited";let t="auto-continuous";return 0===this.parent.sm.playbackIndex&&(t=this.parent.settings.base.startedBy),this._adPlusEnabled&&this.adCount>=1&&(t=`auto-${this.parent.settings.ima.adPlusCampaign}`),t}_getCustParams(){let t=this.parent.pageData.adTargeting.simpleTarget,[e="",s="",i=""]=this.parent.data.awsPath?this.parent.data.awsPath.split("/"):[],[a="",n="",r=""]=this.parent.pageData.awsPath?this.parent.pageData.awsPath.split("/"):[],l={adCount:this._supportsAdPlus&&this.adCount>0?this.adCount:"",categoryvalue:t.filter(Boolean).join(","),contentid:this.parent.data.id,credit:this.parent.data.byline,cst_section:Teal.Utils.joinStrings(a,e),cst_subsection:Teal.Utils.joinStrings(n,s),cst_topic:Teal.Utils.joinStrings(r,i),mutedAutoplay:this.parent.isMuted,origin:this.parent.data.origin,pagetype:this.parent.pageData.pageType,playersize:`${this.parent.elements.container.offsetWidth}x${this.parent.elements.container.offsetHeight}`,playertype:this.parent.settings.base.placement,recommendedvideo:this.parent._recommendation||"",series:Teal.Utils.joinStrings(this.parent.pageData.series,this.parent.data.series),ssts_section:Teal.Utils.joinStrings(this.parent.pageData.section,this.parent.data.ssts?this.parent.data.ssts.section:""),ssts_subsection:Teal.Utils.joinStrings(this.parent.pageData.subsection,this.parent.data.ssts?this.parent.data.ssts.subsection:""),ssts_topic:Teal.Utils.joinStrings(this.parent.pageData.topic,this.parent.data.ssts?this.parent.data.ssts.topic:""),ssts_subtopic:Teal.Utils.joinStrings(this.parent.pageData.subtopic,this.parent.data.ssts?this.parent.data.ssts.subtopic:""),topic:`${this.parent.pageData.keywords},${this.parent.data.keywords}`.replace(/\s|\+/g,"-").toLowerCase()||"NA",variant:this.parent.data.variant||"",vfront:this.parent.pageData.vfront||"",vfrontsec:this.parent.pageData.vfrontsec||"",videolength:this.parent.data.length,videotag:Teal.Utils.tagsToString(this.parent.data.tags),videostart:this.startedBy};return this.parent.settings.ima.gdprApplies&&(l.gdpr=+this.parent.settings.ima.gdprApplies,l.gdpr_consent=this.parent.settings.ima.tcString),Object.assign({},l,this._getPrebidParams(),this.parent.pageData.adTargeting.customParams||{})}_destroyAds(){this.adsManager&&(this.adsManager.stop(),this.adsManager.destroy(),this.adsManager=null),this.adData&&(this.adData="")}_setPrebidBids(t){this.prebidParams={},t.forEach(t=>{let e=t.bidderCode;if("bid available"===t.statusMessage.toLowerCase()){Object.keys(t.adserverTargeting).filter(t=>t.indexOf("hb_")>-1).forEach(s=>{let i=`${s}_${e}`.substring(0,20),a=t.adserverTargeting[s];this.prebidParams[i]=a});let s=`hb_uuid_${e}`.substring(0,20);this.prebidParams[s]=t.videoCacheKey||t.impression_id}})}_setA9Params(t){this.scp=t}skip(){this._onSkip()}adResize(){this._adResize()}},window.Teal.IMA,window.Teal=window.Teal||{};window.Teal.Comscore=class{constructor(t){this.parent=t,this.settings=t.settings,this.pageData=t.pageData,this.settings.comscore.load&&!window.ns_?this.load():window.ns_&&this.init()}async load(){try{await Teal.Utils.loadAndWaitForInit(this.settings.comscore.scriptUrl,"tealplayer_comscore","ns_"),this.init()}catch(t){}}init(){this.parent.sm.subscribe(this,{META:this._onMetaChange,STATE:this._onStateChange}),this._setStreamingTag()}_setStreamingTag(){this.video={streamingTag:new window.ns_.StreamingTag({customerC2:this.settings.comscore.c2}),video:this.parent.elements.video,metadata:{c3:this.pageData.baseName,c4:this.parent.data.ssts?this.parent.data.ssts.section:"",c6:"*null",c7:this.parent.data.pageURL.long,c8:this.parent.data.title,ns_st_ce:"*null",ns_st_ci:this.parent.data.id,ns_st_cl:1e3*this.parent.data.length,ns_st_ddt:this.parent.data.publishDate,ns_st_ge:this.parent.data.ssts?this.parent.data.ssts.section:"",ns_st_ia:"*null",ns_st_tdt:"*null",ns_st_ti:"*null"}}}_onStateChange(t){t.controller===this.parent.sm.controllers.PREROLL?this._onStateChangePreroll(t.state):t.controller===this.parent.sm.controllers.VIDEO&&this._onStateChangeVideo(t.state)}_onStateChangePreroll(t){switch(t){case this.parent.sm.states.STARTED:this.comscoreAdPlayback();break;case this.parent.sm.states.DONE:this._stopStreamingTag()}}_onStateChangeVideo(t){switch(t){case this.parent.sm.states.STARTED:case this.parent.sm.states.PLAYING:this.comscoreContentPlayback();break;case this.parent.sm.states.PAUSED:case this.parent.sm.states.DONE:this._stopStreamingTag()}}comscoreAdPlayback(){this.video.streamingTag.playVideoAdvertisement({ns_st_cl:1e3*this.parent.ima.duration,ns_st_ci:this.video.metadata.ns_st_ci},window.ns_.StreamingTag.AdType.LinearOnDemandPreRoll)}comscoreContentPlayback(){this.video.streamingTag.playVideoContentPart(this.video.metadata,window.ns_.StreamingTag.ContentType.LongFormOnDemand)}_onMetaChange(t,e){t===this.parent.sm._docHidden.name&&e&&this._stopStreamingTag()}_stopStreamingTag(){this.video.streamingTag.stop()}},window.Teal.Comscore,window.Teal=window.Teal||{};window.Teal.Parsely=class{constructor(t,e){this.parent=t,this.ready=e,this.loadStrategy=!1,this.parent.settings.parsely.load&&!window.Parsely?this.load():this.init()}async load(){try{this.init(),await Teal.Utils.loadScript("tealplayer_parsely",this.parent.settings.parsely.scriptUrl)}catch(t){}}init(){if(window.PARSELY)this.loadStrategy||this._addStrategy();else{const t=window.PARSELY=window.PARSELY||{autotrack:this.parent.settings.parsely.autoTrack},e=t.onload;t.onload=(()=>{if(e)try{e()}catch(t){}this._addStrategy()})}}_addStrategy(){if(!PARSELY.video)return;let t=this._buildStrategy(this.parent.elements.container);PARSELY.video.addStrategy(t),this.loadStrategy=!0}_buildStrategy(t){return{platform:this.parent.settings.parsely.platform,searchTags:["DIV"],verify:t=>-1!==(" "+t.className+" ").indexOf("teal-video-wrap"),subscribe:()=>{this.parent.sm.subscribe(this,{STATE:this._onStateChange})}}}_onStateChange(t){if(t.controller===this.parent.sm.controllers.VIDEO)switch(t.state){case this.parent.sm.states.PLAYING:this.parselyOnPlay();break;case this.parent.sm.states.PAUSED:this.parselyOnPause()}}parselyOnPlay(){let t={duration:this.parent.data.duration,image_url:this.parent.data.videoStill,pub_date_tmsp:this.parent.data.createDate,title:this.parent.data.title,author:this.parent.data.byline,section:this.parent.data.ssts?this.parent.data.ssts.section:"",tags:this._fetchTags(),video_platform:this.parent.settings.parsely.platform};PARSELY.video.onPlay(void 0,this.parent.data.id,t)}parselyOnPause(){PARSELY.video.onPause(void 0,this.parent.data.id)}_fetchTags(){let t=[];return this.parent.data.tags&&this.parent.data.tags.forEach(e=>{t.push(`tag:${e.name}`)}),this.parent.data.ssts&&t.push(`ssts:${this.parent.data.ssts.section}:${this.parent.data.ssts.subsection}`),t}},window.Teal.Parsely,window.Teal=window.Teal||{};window.Teal.Gcianalytics=class{constructor(t){this.parent=t,this.loadStrategy=!1,this.parent.settings.gcianalytics.load&&!window.gciAnalytics?this.load():this.init(),this.eventQueue=[],this._resetmilestone();const e=()=>{for(document.removeEventListener("gciAnalyticsReady",e);this.eventQueue.length;){let t=this.eventQueue.shift();window.gciAnalytics.view(this._getVideoData(t))}};document.addEventListener("gciAnalyticsReady",e)}async load(){try{this.init(),await Teal.Utils.loadScript("tealplayer_gcianalytics",this.parent.settings.gcianalytics.scriptUrl)}catch(t){}}init(){this.parent.sm.subscribe(this,{EVENT:this._onEvent,META:this._onMetaChange,STATE:this._onStateChange})}_onStateChange(t){t.controller===this.parent.sm.controllers.VIDEO?this._onStateChangeVideo(t.state):t.controller===this.parent.sm.controllers.PREROLL&&this._onStateChangePreroll(t.state)}_onMetaChange(t){switch(t){case this.parent.sm._fullscreen.name:this._makeViewCall("video-resize")}}_onEvent(t){switch(t){case this.parent.sm.EVENTS.muteClick:this._makeViewCall("video-mute");break;case this.parent.sm.EVENTS.unmuteClick:this._makeViewCall("video-unmute");break;case this.parent.sm.EVENTS.skip:this._makeViewCall("video-ad-skip");break;case this.parent.sm.EVENTS.pauseClick:this._makeViewCall("video-pause");break;case this.parent.sm.EVENTS.playClick:this._makeViewCall("video-resume");break;case this.parent.sm.EVENTS.playBackError:break;case this.parent.sm.EVENTS.timeChange:this._trackMilestone()}}_onStateChangePreroll(t){switch(t){case this.parent.sm.states.DONE:break;case this.parent.sm.states.STARTED:this._makeViewCall("video-ad-start")}}_onStateChangeVideo(t){switch(t){case this.parent.sm.states.DONE:this._makeViewCall("video-complete"),this._resetmilestone();break;case this.parent.sm.states.STARTED:let e;e=this.parent.sm.playbackIndex>0?"video-continuous-play":"auto-first"===this.parent.settings.base.startedBy?"video-autoplay":"video-play",this._makeViewCall(e)}}_resetmilestone(){this.betweenmilestonetime=0,this.previousmilestonemark=0,this.currentmilestone="",this.milestone={10:{eventname:"10% progress",fired:!1},25:{eventname:"25% progress",fired:!1},50:{eventname:"50% progress",fired:!1},75:{eventname:"75% progress",fired:!1},95:{eventname:"95% progress",fired:!1}}}_trackMilestone(){let t=Math.floor(this.parent.elements.video.currentTime/this.parent.capiDuration*100);switch(t){case 10:case 25:case 50:case 75:case 95:this.milestone[t].fired||this._callmilestone(this.milestone[t]);break;default:this.currentmilestone=""}}_callmilestone(t){this.currentmilestone=t.eventname,t.fired=!0,this.betweenmilestonetime=(this.parent.elements.video.currentTime-this.previousmilestonemark).toFixed(0),this.previousmilestonemark=this.parent.elements.video.currentTime,this._makeViewCall("video-milestone")}_makeViewCall(t){window.gciAnalytics&&window.gciAnalytics.isReady?window.gciAnalytics.view(this._getVideoData(t)):this.eventQueue.push(t)}_getVideoData(t){return{"client-action":"video-milestone"===t?this.currentmilestone:this.parent._playbackState,"event-type":t,"content-type":"video","content-id":this.parent.data.id,"content-byline":this.parent.data.byline,"content-cst":this.parent.data.awsPath,"content-keywords":this.parent.data.keywords,"content-source":this.parent.data.origin,"content-ssts-section":this.parent.data.ssts?this.parent.data.ssts.section:"","content-ssts-subsection":this.parent.data.ssts?this.parent.data.ssts.subsection:"","content-ssts-subtopic":this.parent.data.ssts?this.parent.data.ssts.subtopic:"","content-ssts-topic":this.parent.data.ssts?this.parent.data.ssts.topic:"","content-keywords":this.parent.data.keywords,"content-video-3p-tracking-id":this.parent.data.gannettTracking,"content-video-ad-name":"video-ad-start"===t&&this.parent.ima.adData?this.parent.ima.adData.adId:"","content-video-duration":this.parent.capiDuration,"content-video-market-name":this.parent.data.propertyName,"content-video-name":this.parent.data.title,"content-video-play-status":this.parent._playbackState,"content-video-player-rail-state":"","content-video-player-type":"teal","content-video-provider":this.parent.data.origin,"content-video-size":"","content-video-seconds-watched":"video-milestone"===t?this.betweenmilestonetime:0,"content-video-type":this.parent.settings.base.placement.replace(/teal-/g,""),"page-experience-type":this.parent.settings.base.platform||"desktop"}}},window.Teal.Gcianalytics,window.Teal=window.Teal||{};window.Teal.Share=class{constructor(t){this.parent=t,this.svg={close:{title:"Close Share Options",path:'<path d="M12 10.586L6.707 5.293 5.293 6.707 10.586 12l-5.293 5.293 1.414 1.414L12 13.414l5.293 5.293 1.414-1.414L13.414 12l5.293-5.293-1.414-1.414L12 10.586z"/>'},copy:{title:"Copy URL",path:'<path d="M13.863 8.553a4.747 4.747 0 0 1 .888 7.403l-3.658 3.657a4.747 4.747 0 0 1-6.706 0 4.747 4.747 0 0 1 0-6.706l2.534-2.535a5.807 5.807 0 0 0 .37 3.29l-1.076 1.074c-.84.84-.84 2.208 0 3.048.84.84 2.208.84 3.049 0l3.658-3.657c.84-.84.84-2.208 0-3.049a2.138 2.138 0 0 0-1.018-.567zm-.956-4.166a4.747 4.747 0 0 1 6.706 0 4.747 4.747 0 0 1 0 6.706l-2.534 2.535a5.81 5.81 0 0 0-.37-3.29l1.075-1.074c.84-.84.84-2.208 0-3.048a2.158 2.158 0 0 0-3.048 0L11.08 9.874c-.84.84-.84 2.207 0 3.048.29.29.644.478 1.017.567l-1.958 1.959a4.747 4.747 0 0 1-.888-7.403z"/>'},email:{title:"Email",path:'<path d="M3 5.876A.88.88 0 0 1 3.893 5h16.214c.493 0 .893.404.893.876v12.248a.88.88 0 0 1-.893.876H3.893A.892.892 0 0 1 3 18.124V5.876zm9 5.218L3 6.74v1.741l9 4.353 9-4.353v-1.74l-9 4.352z" id="path-1"/>'},embed:{title:"Copy Embed Link",path:'<path d="M10 6.35L4.946 12 10 17.65 8.261 19 2 12l6.261-7L10 6.35zm4 11.3L19.054 12 14 6.35 15.739 5 22 12l-6.261 7L14 17.65z" id="path-1"/>'},facebook:{title:"Share on Facebook",path:'<path d="M12 3.5c4.97 0 9 4.054 9 9.055 0 4.52-3.291 8.266-7.594 8.945v-6.319h2.097l.399-2.617h-2.496v-1.699c0-.716.348-1.414 1.466-1.414h1.135V7.223s-1.03-.177-2.014-.177c-2.056 0-3.4 1.253-3.4 3.523v1.995H8.308v2.617h2.285V21.5C6.291 20.82 3 17.074 3 12.555 3 7.554 7.03 3.5 12 3.5z"/>'},sms:{title:"SMS Share",path:'<path d="M9.943 17.4L4.8 21v-3.6h-.008A1.8 1.8 0 0 1 3 15.605V4.795A1.79 1.79 0 0 1 4.792 3h14.416A1.8 1.8 0 0 1 21 4.795v10.81a1.79 1.79 0 0 1-1.792 1.795H9.943zm-1.808-4.401c.337 0 .644-.04.832-.09v-1.098c-.09.03-.277.06-.465.06-.327 0-.525-.15-.525-.614V9.079h1.02v-1.07h-1.02V6.683H6.541v1.326h-.663v1.07h.663v2.346c0 1.04.446 1.574 1.594 1.574zm1.208-.099h1.594l1.09-1.515 1.088 1.515h1.643l-1.9-2.495L14.65 8.01h-1.594l-.98 1.386-.98-1.386H9.451l1.792 2.396-1.9 2.495zm7.91.099c.337 0 .644-.04.832-.09v-1.098c-.09.03-.277.06-.465.06-.327 0-.525-.15-.525-.614V9.079h1.02v-1.07h-1.02V6.683h-1.436v1.326h-.663v1.07h.663v2.346c0 1.04.446 1.574 1.594 1.574z" id="path-1"/>'},twitter:{title:"Share on Twitter",path:'<path d="M21 6.776a7.213 7.213 0 0 1-2.12.596 3.778 3.778 0 0 0 1.623-2.095 7.273 7.273 0 0 1-2.346.918A3.642 3.642 0 0 0 15.462 5c-2.038 0-3.692 1.696-3.692 3.787 0 .296.032.585.095.862-3.069-.158-5.79-1.664-7.612-3.958a3.856 3.856 0 0 0-.5 1.906c0 1.313.652 2.472 1.643 3.152a3.626 3.626 0 0 1-1.673-.473v.047c0 1.835 1.273 3.366 2.963 3.713-.31.089-.636.133-.973.133-.238 0-.47-.023-.695-.067.47 1.504 1.833 2.599 3.45 2.628A7.292 7.292 0 0 1 3 18.3 10.282 10.282 0 0 0 8.66 20c6.794 0 10.508-5.77 10.508-10.774 0-.164-.003-.329-.01-.49A7.58 7.58 0 0 0 21 6.776" id="path-1"/>'},shareAPI:{title:"Share API",path:'<path d="'+(Teal.Utils.UA.isMobile?"M14.913 15.845l-5.058-2.92a2.998 2.998 0 0 0 .002-1.842l5.061-2.923a3 3 0 1 0-.896-1.792L8.63 9.481a3 3 0 1 0-.007 5.042l5.398 3.117a3 3 0 1 0 .892-1.795z":"M14 5l6 7-6 7V5zm0 4v6c-1.937-.271-3.937.062-6 1s-3.73 2.271-5 4c.909-3.576 2.242-6.242 4-8s4.091-2.758 7-3z")+'"/>'}},this.init()}init(){this._generateShareLinks(),this._createShareOverlay()}_copyLink(t,e){if(!this.copying){if(this.copying=!0,this.inputCopy.classList.remove("tealplayer-vis-hidden"),t.stopImmediatePropagation(),"embed"===e?(this.inputCopy.value=this.embedCode,this.copyText.innerText="EMBED COPIED!"):"url"===e&&(this.inputCopy.value=this.parent.data.pageURL.long,this.copyText.innerText="URL COPIED!"),Teal.Utils.UA.isIOS){let t=document.createRange();t.selectNodeContents(this.inputCopy);let e=window.getSelection();e.removeAllRanges(),e.addRange(t),this.inputCopy.setSelectionRange(0,999999)}else this.inputCopy.select();document.execCommand("copy"),this.inputCopy.classList.add("tealplayer-vis-hidden"),this.copyText.hidden=!1,setTimeout(()=>{this.copyText.hidden=!0,this.copying=!1},3e3)}}_createLink(t,e,s="_blank"){let i=document.createElement("a");return i.href=t,i.target=s,i.appendChild(e),i}_createShareOverlay(){let t=document.createDocumentFragment(),e=this.parent.controls._createDiv("tealplayer-overlay-container");this.overlay=this.parent.controls._createDiv("tealplayer-overlay"),this.overlay.hidden=!0,t.appendChild(this.overlay),this.overlay.appendChild(e),this.overlay.appendChild(this.parent.controls._createBtn(["close"],this)),this.shareTitle=this.parent.controls._createDiv("tealplayer-share-desc"),this.shareTitle.textContent="Share this video:",e.appendChild(this.shareTitle),this.title=this.parent.controls._createDiv("tealplayer-overlay-title"),this.title.textContent=this.parent.data.title,e.appendChild(this.title);let s=this.parent.controls._createDiv("tealplayer-overlay-btn-container");e.appendChild(s),this.parent.data.pageURL.long&&s.appendChild(this.parent.controls._createBtn(["copy"],this)),this.smsShareUrl&&(this.smsLink=this._createLink(this.smsShareUrl,this.parent.controls._createBtn(["sms"],this,!1),"_top"),s.appendChild(this.smsLink)),this.embedCode&&s.appendChild(this.parent.controls._createBtn(["embed"],this)),this.facebookShareUrl&&(this.fbLink=this._createLink(this.facebookShareUrl,this.parent.controls._createBtn(["facebook"],this,!1)),s.appendChild(this.fbLink)),this.twitterShareUrl&&(this.twitterLink=this._createLink(this.twitterShareUrl,this.parent.controls._createBtn(["twitter"],this,!1)),s.appendChild(this.twitterLink)),this.emailShareUrl&&(this.emailLink=this._createLink(this.emailShareUrl,this.parent.controls._createBtn(["email"],this,!1),"_top"),s.appendChild(this.emailLink)),this.shareAPIDataObj&&s.appendChild(this.parent.controls._createBtn(["shareAPI"],this)),this.copyText=this.parent.controls._createDiv("tealplayer-copy-text"),e.appendChild(this.copyText),this.inputCopy=document.createElement("input"),this.inputCopy.classList.add("tealplayer-copy-input"),this.inputCopy.classList.add("tealplayer-vis-hidden"),this.inputCopy.readonly=!0,e.appendChild(this.inputCopy),this.parent.elements.container.appendChild(t)}_generateShareLinks(){let t=this.parent.data.pageURL.long||"",e=this.parent.pageData.baseName||"",s=this.parent.data.title||this.parent.data.headline||"",i=e&&this.parent.data.id?`https://uw-media.${e}.com/embed/video/${this.parent.data.id}?placement=snow-embed`:"";t&&(this._shareAPIEnabled&&Teal.Utils.UA.isMobile||(this.facebookShareUrl=`https://www.facebook.com/sharer/sharer.php?u=${t}`,this.overlay&&(this.fbLink.href=this.facebookShareUrl),s&&(this.parent.pageData.publicationName&&(this.emailShareUrl=`mailto:?subject=${s}&body=Check out this video on ${this.parent.pageData.publicationName}: ${t}`,this.overlay&&(this.emailLink.href=this.emailShareUrl)),this.parent.pageData.twitter&&(this.twitterShareUrl=`https://twitter.com/intent/tweet?url=${t}&text=${s}&via=${this.parent.pageData.twitter}`,this.overlay&&(this.twitterLink.href=this.twitterShareUrl)))),!this._shareAPIEnabled&&Teal.Utils.UA.isMobile&&s&&(Teal.Utils.UA.isAndroid?this.smsShareUrl=`sms:?body=${s} ${encodeURIComponent(t)}`:this.smsShareUrl=`sms:&body=${s} ${encodeURIComponent(t)}`,this.overlay&&(this.smsLink.href=this.smsShareUrl))),!Teal.Utils.UA.isMobile&&i&&(this.embedCode=`<iframe title="${e.toUpperCase()}-Embed Player" width="540" height="350" frameborder="0" scrolling="no" allowfullscreen="true" marginheight="0" marginwidth="0" src="${i}"></iframe>`),this._shareAPIEnabled&&(this.shareAPIDataObj={url:i,title:s,text:this.parent.data.promoBrief||""})}_showOverlay(){this._update(),this.overlay.hidden=!1,this.overlay.querySelector(".tealplayer-btn").focus(),this.parent.controls._controlsHidden()}_update(){this.title.textContent!==this.parent.data.title&&(this.title.textContent=this.parent.data.title,this._generateShareLinks())}_onclose(){this.overlay.hidden=!0,this.parent.controls._showControls(),this.wasPlaying&&(this.parent.controls._onplay(),this.wasPlaying=!1),setTimeout(()=>{const t=this.parent.controls.controlBar.querySelector(Teal.Utils.UA.isIOS?".tealplayer-shareIOS-btn":".tealplayer-share-btn");t&&t.focus()},250)}_oncopy(t){this._copyLink(t,"url")}_onembed(t){this._copyLink(t,"embed")}_onshareAPI(){navigator.share(this.shareAPIDataObj)}get _shareAPIEnabled(){return this.parent.settings.share.enableShareAPI&&navigator.share}},window.Teal.Share,window.Teal=window.Teal||{};window.Teal.Controls=class{constructor(t){this.parent=t,this.svg={airplay:{title:"Airplay",path:'<path d="M0 1.9v14.5h6l.9-1.1H1.1V3h21.8v12.3H17l1 1.1h5.9V1.9z"/><path d="M3.3 22.1h17.4L12 12z"/>'},closedCaption:{title:"ClosedCaption",path:'<path d="M22 3a2 2 0 012 2v14a2 2 0 01-2 2H2a2 2 0 01-2-2V5a2 2 0 012-2h20zm-1 2H3a1 1 0 00-.993.883L2 6v12a1 1 0 00.883.993L3 19h18a1 1 0 00.993-.883L22 18V6a1 1 0 00-1-1zM9.22 8.75c.54 0 1.027.109 1.46.327.37.186.695.444.973.773l.135.17-1.352.8-.124-.143a1.813 1.813 0 00-.415-.335c-.2-.117-.43-.175-.695-.175-.435 0-.788.164-1.058.493-.27.328-.405.771-.405 1.33 0 .558.135 1.004.405 1.338.27.335.623.502 1.058.502.27 0 .51-.066.718-.198.157-.099.294-.21.413-.336l.112-.129 1.343.8-.133.173c-.274.334-.6.594-.976.78a3.226 3.226 0 01-1.458.327c-.638 0-1.198-.138-1.68-.414a2.966 2.966 0 01-1.131-1.146C6.137 13.2 6 12.633 6 11.99c0-.644.137-1.208.41-1.693a2.94 2.94 0 011.131-1.136c.482-.273 1.042-.41 1.68-.41zm6.213 0c.54 0 1.026.109 1.458.327.37.186.695.444.974.773l.135.17-1.353.8-.123-.143a1.834 1.834 0 00-.415-.335 1.349 1.349 0 00-.695-.175c-.435 0-.788.164-1.058.493-.27.328-.405.771-.405 1.33 0 .558.135 1.004.405 1.338.27.335.623.502 1.058.502.27 0 .51-.066.718-.198.156-.099.294-.21.412-.336l.112-.129 1.344.8-.133.173c-.275.334-.6.594-.976.78a3.232 3.232 0 01-1.458.327c-.639 0-1.198-.138-1.68-.414a2.961 2.961 0 01-1.132-1.146c-.273-.488-.41-1.054-.41-1.698 0-.644.137-1.208.41-1.693.273-.485.65-.863 1.132-1.136.482-.273 1.041-.41 1.68-.41z"/>'},exitFullscreen:{title:"Exit Full Screen",path:'<path d="M18.02 15.982L18.006 20 16 19.999v-6h6l-.02 1.996-3.96-.013zm-.038-8l4.019.011-.002 2.008h-6V4l1.997.02-.014 3.96zM6.018 16.018l-4.019-.012.002-2.008h6v6l-1.997-.02.014-3.96zm-.037-8L5.993 4 8 4.001v6H2l.02-1.996 3.96.013z"/>'},fullscreen:{title:"Enter Full Screen",path:'<path d="M19.98 18.017l.013-4.018L22 14v6h-7l.02-1.996 4.96.013zm.038-11.997l-5.019-.012L15.001 4h7v6l-1.997-.021.014-3.96zM3.982 17.98l5.019.012L8.999 20H2v-6l1.997.021-.014 3.96zM4.02 5.983l-.012 4.018L2 10V4h7l-.02 1.996-4.96-.013z"/>'},mute:{title:"Sound On",path:'<path mute d="M15 6a6 6 0 1 1 0 12v-2a4 4 0 1 0 0-8V6zM3 8h4v8H3V8zm4 0l6-4v16l-6-4V8z"/>'},pause:{title:"Pause",path:'<path d="M7 6h3v12H7V6zm7 0h3v12h-3V6z"/>'},play:{title:"Play",path:'<polygon points="18 12 8 18 8 6"></polygon>'},share:{title:"Open Share",path:'<path d="M14.913 15.845l-5.058-2.92a2.998 2.998 0 0 0 .002-1.842l5.061-2.923a3 3 0 1 0-.896-1.792L8.63 9.481a3 3 0 1 0-.007 5.042l5.398 3.117a3 3 0 1 0 .892-1.795z"/>'},shareIOS:{title:"Open Share",path:'<path d="M18 18v-5h2v7H4v-7h2v5h12zM13 7.828V15h-2V7.828l-2.586 2.793L7 9.207 12 4l5 5.207-1.5 1.414L13 7.828z"/>'},unmute:{title:"Sound Off",path:'<path d="M19.414 12l2.122-2.121-1.415-1.415L18 10.586l-2.121-2.122-1.415 1.415L16.586 12l-2.122 2.121 1.415 1.415L18 13.414l2.121 2.122 1.415-1.415L19.414 12zM3 8h4v8H3V8zm4 0l6-4v16l-6-4V8z"/>'}},this._init()}_init(){this.parent.settings.controls.svg&&(this.svg=Object.assign(this.svg,this.parent.settings.controls.svg)),this.parent.sm.subscribe(this,{EVENT:this._onEvent,META:this._onMetaChange,STATE:this._onStateChange}),this._createControlBar(),this._createWrapPlayToggle(),this._createSpinner(),this._controlsHidden()}_onStateChange(t){t.state&&this._onStateChangeAll(t.state),t.controller===this.parent.sm.controllers.PREROLL?this._onStateChangePreroll(t.state):t.controller===this.parent.sm.controllers.VIDEO&&this._onStateChangeVideo(t.state)}_onEvent(t){switch(t){case this.parent.sm.EVENTS.metadata:this._setDuration();break;case this.parent.sm.EVENTS.subtitletrackadded:let e=this.parent.elements.video.textTracks;e&&e[0]&&(this._showClosedCaptionText(),this._showClosedcaptionIcon());break;case this.parent.sm.EVENTS.timeChange:this._onTimeChange()}}_onMetaChange(t){t===this.parent.sm._currentVolume.name&&this._updateVolumeSlider()}_onStateChangeAll(t){switch(-1===[this.parent.sm.states.LOADING,this.parent.sm.states.BUFFERING].indexOf(t)&&this._spinnerHide(),t){case this.parent.sm.states.LOADING:case this.parent.sm.states.BUFFERING:this._setDisplay(),this._spinnerShow();break;case this.parent.sm.states.STARTED:this._setDisplay(),this._showControls();break;case this.parent.sm.states.PAUSED:this._setPauseBtn();break;case this.parent.sm.states.PLAYING:this._setPlayBtn(),this._onTimeChange()}}_onStateChangePreroll(t){switch(t){case this.parent.sm.states.DONE:this._skipHide();break;case this.parent.sm.states.PLAYING:this._disableProgressScrubber();break;case this.parent.sm.states.STARTED:this._hideEl(this.shareBtn),Teal.Utils.UA.isMobile&&(this._isFullscreen()&&this._exitFullscreen(),this._hideEl(this.fullscreenBtn))}}_onStateChangeVideo(t){switch(t){case this.parent.sm.states.DONE:this._reset();break;case this.parent.sm.states.PLAYING:this._enableProgressScrubber();break;case this.parent.sm.states.STARTED:this._showEl(this.shareBtn),this._showEl(this.fullscreenBtn)}}_createWrapPlayToggle(){this.playToggle=this._createDiv("tealplayer-play-toggle"),this.parent.settings.controls.enableBigPlayButton&&(this.bigPlayBtn=this._createDiv("tealplayer-big-play-btn"),this.bigPlayBtn.innerHTML=`<svg class="tealplayer-btn-icon tealplayer-btn" view-box="0 0 80 80" role="img" aria-labelledby="big_play_tealplayer_svg_tealplayer_svg"><title id="big_play__tealplayer_svg">Click to Play</title>${this.svg.play.path}</svg>`,this.playToggle.appendChild(this.bigPlayBtn),this._controlsHidden()),this.parent.elements.video.parentNode.insertBefore(this.playToggle,this.controlBar),Teal.Utils._registerEvents(this,[{event:"click",handler:this._onplay}],this.playToggle),this._controlsVisibleMousemove(this.parent.elements.container)}_addControlBarListeners(){this._controlsVisibleMousemove(this.controlBar),this._controlsVisibleMousemove(this.progressEl)}_createBtn(t,e=this,s=!0){let i=document.createElement(s?"button":"div");return t.forEach((t,a)=>{0===a&&(i.classList.add(`tealplayer-${t}-btn`),i.classList.add("tealplayer-btn"),i.setAttribute("aria-live","polite"),s&&Teal.Utils._registerEvents(e,[{event:"click",handler:e[`_on${t}`]}],i),e[`${t}Btn`]=i);let n=1===a?" tealplayer-vis-hidden":"";i.innerHTML+=`<svg id="${t}TealSvg" class="tealplayer-btn-icon ${n} btn-index-${a}" view-box="0 0 24 24" aria-labelledby="${t}_tealplayer_svg"><title id="${t}_tealplayer_svg">${e.svg[t].title}</title>${e.svg[t].path}</svg>`}),i}_createControlBar(){let t=document.createDocumentFragment();this.controlBar=this._createDiv("tealplayer-control-wrap"),t.appendChild(this.controlBar);let e=this.parent.settings.controls.controlbarLeft,s=this.parent.settings.controls.controlbarRight;this.controlBar.appendChild(this._createProgressBar()),e&&e.length&&this.controlBar.appendChild(this._createControlBarSection("tealplayer-left-controls",e)),s&&s.length&&this.controlBar.appendChild(this._createControlBarSection("tealplayer-right-controls",s)),this.parent.elements.video.parentNode.insertBefore(t,this.parent.elements.video),this._addControlBarListeners()}_createControlBarSection(t,e){let s=this._createDiv(t);return e.forEach(t=>{switch(t){case"airplay":Teal.Utils.UA.isIOS&&s.appendChild(this._createBtn([t]));break;case"closedCaption":Teal.Utils.UA.isIE11||(this.closedcaption=s.appendChild(this._createBtn([t])),this._resetClosedCaption());break;case"fullscreen":s.appendChild(this._createBtn([t,"exitFullscreen"])),this._addFullscreenListeners();break;case"mute":this._createVolumeWrap(s),this.volumeWrap.appendChild(this._createBtn([t,"unmute"]));break;case"play":s.appendChild(this._createBtn([t,"pause"]));break;case"share":if(!window.Teal.Share)break;Teal.Utils.UA.isIOS&&(t="shareIOS"),s.appendChild(this._createBtn([t]));break;case"skip":try{let t=this._createSkip();s.appendChild(t)}catch(t){}break;case"timer":let e=this._createTimeDisplay();s.appendChild(e);break;case"volumeSlider":if(!Teal.Utils.UA.isMobile){let t=this._createVolumeSliderInput();this._createVolumeWrap(s),this.volumeWrap.appendChild(t)}}}),s}_createDiv(t){let e=document.createElement("div");return e.classList.add(t),e}_reset(){this.parent.encore&&this.parent.encore.hasNext()&&!this.parent.sm.docHidden?(this.activeUser=!1,this._resetClosedCaption()):(this._displaySet=!1,this.bigPlayBtn&&this.bigPlayBtn.classList.remove("tealplayer-vis-hidden"),this._controlsHidden())}_toggleDisplayBtn(t,e){let s=t.children;for(let t=0;t<s.length;t++)t===e?s[t].classList.remove("tealplayer-vis-hidden"):s[t].classList.add("tealplayer-vis-hidden")}_onclosedCaption(t){this.parent._onClickEvent(t),this.parent.elements.video.textTracks&&this.parent.elements.video.textTracks[0]&&("showing"===this.parent.elements.video.textTracks[0].mode?this._hideClosedCaptionText():this._showClosedCaptionText())}_showClosedCaptionText(){this.parent.elements.video.textTracks&&this.parent.elements.video.textTracks[0]&&(this.parent.elements.video.textTracks[0].mode="showing")}_hideClosedCaptionText(){this.parent.elements.video.textTracks&&this.parent.elements.video.textTracks[0]&&(this.parent.elements.video.textTracks[0].mode="hidden")}_showClosedcaptionIcon(){this.closedcaption.classList.remove("tealplayer-vis-hidden"),this.parent.settings.base.startMuted||this._hideClosedCaptionText()}_hideClosedcaptionIcon(){this.closedcaption.classList.add("tealplayer-vis-hidden")}_resetClosedCaption(){this._hideClosedcaptionIcon(),this._hideClosedCaptionText()}_onairplay(t){this.parent._onClickEvent(t),this.parent.elements.video.webkitShowPlaybackTargetPicker()}_onfullscreen(t){this.parent._onClickEvent(t),this.parent.sm.fullscreen?this._exitFullscreen():this._fullscreen()}_onplay(t){this.parent._onClickEvent(t),this.parent.togglePlayback(),this.activeUser=!1}_setPlayBtn(){this.playBtn&&this._toggleDisplayBtn(this.playBtn,1)}_setPauseBtn(){this.playBtn&&this._toggleDisplayBtn(this.playBtn,0),this.activeUser=!0,this._controlsVisible()}_onmute(t){this.parent._onClickEvent(t),this.parent.isMuted?(this.parent.sm.notifyEvent(this.parent.sm.EVENTS.unmuteClick),this.parent.unmute()):(this.parent.sm.notifyEvent(this.parent.sm.EVENTS.muteClick),this.parent.mute())}_onshare(t){this.parent._onClickEvent(t),this.share?this._displayShare():(this.share=new window.Teal.Share(this.parent),this._displayShare())}_onshareIOS(t){this._onshare(t)}_displayShare(){this.parent.sm.state===this.parent.sm.states.PLAYING&&(this.share.wasPlaying=!0,this.parent.pause()),this.share._showOverlay(),this._controlsHidden()}_activityCheck(){this.activeUser?this._controlsVisible():(this._controlsMinimal(),this.collapseControlTimeout&&clearTimeout(this.collapseControlTimeout))}_clearControlTimer(){this.collapseControlTimeout&&clearTimeout(this.collapseControlTimeout),this.collapseControlTimeout=null}_controlsHidden(){this.controlBar.classList.add("tealplayer-hidden"),this.hideControls=!0}_controlsMinimal(){this.controlBar.classList.remove("tealplayer-hidden"),this.controlBar.classList.add("tealplayer-minimal")}_controlTimer(){this._clearControlTimer(),this.collapseControlTimeout=setTimeout(()=>{this._activityCheck()},this.parent.settings.controls.activeUserTimeout)}_controlsVisible(){this.parent.sm.hasStarted&&!this.hideControls&&(this.controlBar.classList.remove("tealplayer-hidden"),this.controlBar.classList.remove("tealplayer-minimal"),this._controlTimer())}_controlsVisibleMousemove(t){Teal.Utils.UA.isMobile||Teal.Utils._registerEvents(this,[{event:"mousemove",handler:this._controlsVisible}],t)}_showControls(){this.hideControls=!1,this._controlsVisible()}_setDisplay(){this._displaySet||(this.bigPlayBtn&&this.bigPlayBtn.classList.add("tealplayer-vis-hidden"),this._displaySet=!0)}_addFullscreenListeners(){let t=[{event:"fullscreenchange",handler:this._onFullScreenChange},{event:"mozfullscreenchange",handler:this._onFullScreenChange},{event:"webkitfullscreenchange",handler:this._onFullScreenChange},{event:"msfullscreenchange",handler:this._onFullScreenChange}];Teal.Utils._registerEvents(this,t,document)}_exitFullscreen(){let t=document.exitFullscreen||document.webkitCancelFullScreen||document.mozCancelFullScreen||document.msExitFullscreen;t?t.call(document):Teal.Utils.UA.isIOS&&this.parent.elements.video.webkitDisplayingFullscreen&&this.parent.elements.video.webkitExitFullscreen()}_fullscreen(){let t=Teal.Utils.UA.isIOS?this.parent.elements.video:this.parent.elements.video.parentElement;if(Teal.Utils.UA.isIOS)t.webkitEnterFullscreen();else{let e=t.requestFullScreen||t.webkitRequestFullScreen||t.mozRequestFullScreen||t.msRequestFullscreen;e&&e.call(t)}}_isFullscreen(){return document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement||document.msFullscreenElement||Teal.Utils.UA.isIOS&&this.parent.elements.video.webkitDisplayingFullscreen}_onFullScreenChange(t){t.target.classList&&t.target.classList.contains("teal-video-wrap")&&(this._isFullscreen()?(this.parent.sm.fullscreen=!0,this.parent.elements.video.parentElement.classList.add("tealplayer-fullscreen"),this._toggleDisplayBtn(this.fullscreenBtn,1),this.parent.enterFullscreen()):(this.parent.sm.fullscreen=!1,this.parent.elements.video.parentElement.classList.remove("tealplayer-fullscreen"),this._toggleDisplayBtn(this.fullscreenBtn,0),this.parent.exitFullscreen()))}_addProgressBarListeners(){Teal.Utils._registerEvents(this,[{event:"click",handler:this._progressPosition}],this.progressEl),Teal.Utils._registerEvents(this,[{event:"drag",handler:Teal.Utils.throttle(t=>{this._progressPosition(t)},25)}],this.progressHitbox)}_createProgressBar(){let t=document.createDocumentFragment(),e=this._createDiv("tealplayer-progress"),s=this._createDiv("tealplayer-progress-bar"),i=this._createDiv("tealplayer-progress-thumb"),a=this._createDiv("tealplayer-progress-hitbox");return e.appendChild(s),s.appendChild(i),a.setAttribute("draggable",!0),s.appendChild(a),t.appendChild(e),this.progressEl=e,this.progressBar=s,this.progressHitbox=a,this._addProgressBarListeners(),t}_enableProgressScrubber(){this.progressEl.classList.remove("tealplayer-progress-disable-user")}_disableProgressScrubber(){this.progressEl.classList.add("tealplayer-progress-disable-user")}_progressPosition(t){this.parent._onClickEvent(t);let e=this.progressEl.getBoundingClientRect(),s=100*(t.clientX-e.left)/e.width;s>=0&&s<=100&&this._seek(.01*s*this.parent.duration)}_seek(t){isFinite(t)&&(this.parent.elements.video.currentTime=t,this._setProgressBar(this.parent.elements.video.currentTime,this.parent.duration))}_setProgressBar(t,e){let s=t/e*100;this.progressBar.style.width=s+"%"}_createTimeDisplay(){return this.timer=this._createDiv("tealplayer-time"),this.currentTimeContainer=this._createDiv("tealplayer-time-container"),this.currentTimeDuration=this._createDiv("tealplayer-current-time-duration"),this.timer.appendChild(this.currentTimeContainer),this.currentTime=this._createDiv("tealplayer-current-time"),this.currentTime.textContent="0:00",this.currentTimeContainer.appendChild(this.currentTime),this._setDuration(),this.currentTimeContainer.appendChild(this.currentTimeDuration),this.parent.ima&&(this.adTimeContainer=this._createDiv("tealplayer-time-ad-container"),this.timer.appendChild(this.adTimeContainer),this.adText=this._createDiv("tealplayer-ad-time"),this.adText.textContent="AD",this.adTimeContainer.appendChild(this.adText),this.currentAdTime=this._createDiv("tealplayer-ad-time-left"),this.adTimeContainer.appendChild(this.currentAdTime)),this.timer}_formatTime(t){if(!t)return"0:00";let e=Math.floor(t/3600),s=Math.floor(t/60%60),i=Math.floor(t%60);return i<10&&(i="0"+i),e>0?(s<10&&(s="0"+s),e+":"+s+":"+i):s+":"+i}_setTimeDisplay(t,e){this.progressBar&&this._setProgressBar(t,e),this.parent.sm.hasStarted&&(this.parent.sm.isVideo?(this.currentTimeContainer.classList.remove("tealplayer-vis-hidden"),this.currentTime.textContent=this._formatTime(Math.round(t)),this.adTimeContainer&&this.adTimeContainer.classList.add("tealplayer-vis-hidden")):this.parent.sm.isPreroll&&(this.currentTimeContainer.classList.add("tealplayer-vis-hidden"),this.adTimeContainer&&(this.adTimeContainer.classList.remove("tealplayer-vis-hidden"),this.currentAdTime.textContent=this._formatTime(Math.round(e-t))),this.skip&&this.parent.ima._setSkipState()&&(this._skipShow(),this._controlsVisible())))}_setDuration(){if(this.parent.sm.durationSet||!this.timer)return;let t="0:00";const e=this.parent.capiDuration;e?(t=this._formatTime(e),this.parent.sm.durationSet=!0):this.parent.duration&&(t=this._formatTime(this.parent.duration),this.parent.sm.durationSet=!0),this.currentTimeDuration.innerHTML=`<div>${t}</div>`}_onTimeChange(){this.timer&&(this.parent.sm.isVideo?this._setTimeDisplay(this.parent.elements.video.currentTime,this.parent.duration):this.parent.sm.isPreroll&&this._setTimeDisplay(this.parent.ima.duration-this.parent.ima.remainingTime,this.parent.ima.duration))}_createVolumeSliderInput(){return this.slider=this._createDiv("tealplayer-volume-slider"),this.sliderInput=document.createElement("INPUT"),this.sliderInput.classList.add("tealplayer-volume-input"),this.sliderInput.setAttribute("type","range"),this.sliderInput.setAttribute("min","0"),this.sliderInput.setAttribute("max","1"),this.sliderInput.setAttribute("step","0.1"),this.sliderInput.setAttribute("aria-label","Volume slider"),this.sliderInput.setAttribute("value",this.parent.sm.currentVolume),this.inputVolumeBar=this._createDiv("tealplayer-volume-bar"),this.slider.appendChild(this.sliderInput),Teal.Utils.UA.isIE11?this.sliderInput.style.position="relative":this.slider.appendChild(this._createDiv("tealplayer-volume-container")).appendChild(this.inputVolumeBar),Teal.Utils._registerEvents(this,[{event:"change",handler:this._inputVolume},{event:"focus",handler:this._persistVolumeSlider}],this.sliderInput),this.slider}_inputVolume(t){this.parent._onClickEvent(t);let e=t.target.value;e>=.1&&e<=1?this.parent.setVolumeLevel(e):e<.1&&this.parent.mute(),this._persistVolumeSlider()}_createVolumeWrap(t){this.volumeWrap||(this.volumeWrap=this._createDiv("tealplayer-volume-wrap"),t.appendChild(this.volumeWrap))}_persistVolumeSlider(){this.volumeSliderActive||(this.slider.classList.add("tealplayer-volume-slider-visible"),this.volumeSliderActive=!0)}_showMuteBtn(){this._toggleDisplayBtn(this.muteBtn,1)}_showUnmuteBtn(){this._toggleDisplayBtn(this.muteBtn,0)}_updateVolumeSlider(){this.sliderInput&&(this.sliderInput.value=this.parent.sm.currentVolume),this.inputVolumeBar&&(this.inputVolumeBar.style.width=100*this.parent.sm.currentVolume+"%"),this.parent.isMuted?this._showMuteBtn():this._showUnmuteBtn()}_createSpinner(){this.spinner=this._createDiv("tealplayer-spinner"),this._spinnerHide(),this.parent.elements.video.parentNode.appendChild(this.spinner)}_spinnerHide(){this.spinner.classList.add("tealplayer-spinner-hidden")}_spinnerShow(){this.spinner.classList.remove("tealplayer-spinner-hidden")}_hideEl(t){t&&t.classList.add("tealplayer-vis-hidden")}_showEl(t){t&&t.classList.remove("tealplayer-vis-hidden")}_createSkip(){if(!this.parent.ima)return;this.skip=this._createDiv("tealplayer-ad-skip");let t=this._createDiv("tealplayer-ad-skip-text");return t.textContent="SKIP",this.skip.appendChild(t),Teal.Utils._registerEvents(this,[{event:"click",handler:this._skip}],this.skip),this._skipHide(),this.skip}_skip(){this.parent.skip()}_skipHide(){this.skip&&this.skip.classList.add("tealplayer-vis-hidden")}_skipShow(){this.skip&&this.skip.classList.remove("tealplayer-vis-hidden")}},window.Teal.Controls,window.Teal=window.Teal||{};function t(t){return Object.assign({adsEnabled:!0,awsPath:"",byline:"",createDate:"",credit:"",gannettTracking:"",headline:"",hlsURL:"",id:"",initialPublishDate:"",keywords:"",length:"",mp4URL:"",origin:"",pageURL:{long:""},promoBrief:"",publishDate:"",renditions:[],series:"",ssts:{section:"",storysubject:"",subsection:"",subtopic:"",topic:""},tags:[],title:"",videoStill:""},t)}window.Teal.Encore=class{constructor(t){this.parent=t,this.q=t.upNext||[],this.sponsorLockedTags=[]}async processQueue(){const t=this.parent.sm.playbackIndex;if(this.q.length>t){if("object"!=typeof this.q[t]){let e=await this._fetchData(this.q[t]);this.q[t]=e}return}if(this.parent.settings.continuousPlay.finitePlaylist)return;const e=await this._fetchData();this.q=this.q.concat(e)}getNext(){return this.q[this.parent.sm.playbackIndex]}hasNext(){return!!this.q[this.parent.sm.playbackIndex]}addVideo(t){this._isValid(t)&&this.q.push(t)}setNextPlaylist(t=[]){t.filter(t=>this._isValid(t)),this.q=this.q.concat(t)}_isValid(t){return["string","object","number"].indexOf(typeof t)>-1}async _fetchData(t){try{let e;if(t){e=await fetch(this._buildAssetByIdURL(t));let s=await e.json();return s.errors?{}:s.data&&s.data.asset}return e=await fetch(this._buildEncoreURL()),(await e.json()).map(t=>t.asset?t.asset:t)}catch(t){}}_buildEncoreURL(){if(this.parent.settings.continuousPlay.encoreURL)return this.parent.settings.continuousPlay.encoreURL;let t=this.parent.pageData,e=`sections=${t.section}&subsections=${t.subsection}&topics=${t.topic}&subtopics=${t.subtopic}`,s=`site-code=${this.parent.pageData.siteCode}&size=${this.parent.settings.continuousPlay.countToRetrieve}&notIds=${this._getNotIds()}&types=video&backfill=${this.parent.settings.continuousPlay.backfill}&noOlderThan=${this.parent.settings.continuousPlay.noOlderThan}&sortByPageViews=true&maxVideoLength=${this.parent.settings.continuousPlay.maxVideoLength}`,i=`apiKey=${this.parent.settings.continuousPlay.encoreKey}`;return this._setLockoffTags(),this._isSponsorLocked&&(s=`${s}&tagIds=${this.sponsorLockedTags}&excludedAssets=${this._getNotIds()}`),`https://api.gannett-cdn.com/argon/encore/?${e}&${s}&${i}`}_getNotIds(){return Teal.History.join(",")}_setLockoffTags(){if(0!==this.parent.data.tags.length)return this._isSponsorLocked?this.sponsorLockedTags:void(this.sponsorLockedTags=this.parent.data.tags.filter(t=>t.name&&t.name.toLowerCase().indexOf("sponsoredlockoff")>-1).map(t=>t.id).join(","))}get _isSponsorLocked(){return this.sponsorLockedTags.length>0}_buildAssetByIdURL(t){return this.parent.settings.continuousPlay.assetURL?this.parent.settings.continuousPlay.assetURL:`https://api.gannett-cdn.com/argon/video/${t}?apiKey=${this.parent.settings.continuousPlay.assetKey}&site-code=${this.parent.pageData.siteCode}&url=${location.href}`}showUpNext(){let t=this.getNext();t&&this._createUpNextCard(t.videoStill,t.title)}_createUpNextCard(t,e){let s=document.createDocumentFragment(),i=document.createElementNS("http://www.w3.org/2000/svg","svg");this.upNextCard=document.createElement("div"),i.setAttribute("width",12),i.setAttribute("height",12),i.setAttribute("viewBox","0 0 12 12"),i.classList.add("up-next-close"),i.innerHTML='<path fill="#FFF" fill-rule="evenodd" d="M7 .2l1 1-3.001 2.999L8 7.2l-1 1-3.001-3.001L1 8.2l-1-1 3-3.001L0 1.2l1-1 2.999 3L7 .2z"/>',i.addEventListener("click",t=>{t.stopImmediatePropagation(),this.parent.sm.notifyEvent(this.parent.sm.EVENTS.upNextClosed),this.closeUpNext()});let a="height=70&format=pjpg&quality=30&auto=webp";t=t.indexOf("?")>-1?`${t}&${a}`:`${t}?${a}`,this.upNextCard.innerHTML=`\n            <img class="up-next-thumbnail" src="${t}">\n            <div class="up-next-content"><span class="up-next-header">NEXT VIDEO</span><div class="up-next-title">${e}</div></div>\n        `,this.upNextCard.classList.add("up-next-card-container"),this.upNextCard.prepend(i),this.upNextCard.addEventListener("click",()=>{this.parent.sm.notifyEvent(this.parent.sm.EVENTS.upNextClicked),this.parent._onEnded()}),s.appendChild(this.upNextCard),this.parent.elements.video.parentNode.insertBefore(s,this.parent.elements.video)}closeUpNext(){this.upNextCard&&(this.upNextCard.parentElement.removeChild(this.upNextCard),this.upNextCard=null)}_supportsUpNextCard(){let t=this.parent.settings.continuousPlay;return t.upNextCardEnabled&&this.parent.capiDuration>=t.upNextCardRequiredLength}},window.Teal.Encore;var e={loadScript:(t,e)=>document.getElementById(t)?Promise.resolve():new Promise((s,i)=>{const a=document.createElement("script");a.defer=!0,a.src=e,a.id=t,a.onload=s,a.onerror=i,document.body.appendChild(a)}),loadAndWaitForInit(t,e,s){return new Promise((i,a)=>{window[s]?i():this.loadScript(e,t).then(()=>this.waitForInit(s).then(i,a),t=>a(new Error(t)))})},waitForInit:(t,e=2e3)=>new Promise((s,i)=>{if(window[t])return void s();let a=setInterval(()=>{window[t]&&(clearInterval(a),s())},10);setTimeout(()=>{clearInterval(a),window[t]?s():i(new Error(`${t} failed to load within the timeout limit`))},e)}),getNested:(t,...e)=>!!t&&e.reduce((t,e)=>t&&t[e],t),_registerEvents(t,e,s){e&&e.length&&s&&e.forEach(e=>{e.handler&&s.addEventListener(e.event,s=>{e.handler&&e.handler.call(t,s)})})},debounce(t,e){let s;return(...i)=>{const a=this;clearTimeout(s),s=setTimeout(()=>t.apply(a,i),e)}},throttle(t,e){let s=Date.now();return function(...i){const a=Date.now();a-s>=e&&(t(...i),s=a)}},get el(){return{get:function(t){return document.getElementById(t)}}},joinStrings(t,e){let s=t?t.toLowerCase():"",i=e?e.toLowerCase():"",a=[];return s===i?s:(s&&a.push(s),i&&a.push(i),a.join())},sstsToString:t=>[t.ssts.section,t.ssts.subsection,t.ssts.subtopic,t.ssts.topic].filter(String).join("/"),tagsToString(t=[]){if(!t)return;let e=[];return t.forEach(t=>{e.push(t.name)}),e.filter(String).join(",")},tagsToArray(t=[]){if(!t)return;let e=[];return t.forEach(t=>{e.push(t.name)}),e},appendQSP:(t,e)=>t&&e?("?"!==e.charAt(0)&&"&"!==e.charAt(0)||(e=e.substr(1)),t.indexOf("?")>-1?`${t}&${e}`:`${t}?${e}`):t,get UA(){return{get isAndroid(){return this._isAndroid||(this._isAndroid=/Android/.test(navigator.userAgent)&&!window.MSStream),this._isAndroid},get isIphone(){return this._isIphone||(this._isIphone=/iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream),this._isIphone},get isIpad(){return this._isIPad||(this._isIPad=/iPad/.test(navigator.userAgent)&&!window.MSStream),this._isIPad},get isIOS(){return this._isIOS||(this._isIOS=/iPhone|iPod|iPad/.test(navigator.userAgent)&&!window.MSStream),this._isIOS},get isSafari(){return this._isSafari||(this._isSafari=/Safari/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)),this._isSafari},get isIE(){return this._isIE||(this._isIE=/msie\s|trident\/|edge\//i.test(navigator.userAgent)),this._isIE},get isIE11(){return this._isIE11||(this._isIE11=/trident/i.test(navigator.userAgent)),this._isIE11},get isMobile(){return this.isAndroid||this.isIOS}}},markStart(t){this.markers=this.markers||{},this.markers[t]=performance.now()},markEnd:function(t){let e=0;return t&&this.markers[t]&&(e=parseFloat(((performance.now()-this.markers[t])/1e3).toFixed(3))),e}};class s{constructor(t){this._state=this.states.INITIALIZING,this._controller=this.controllers.VIDEO,this._subscribers=[],this._bitRate={name:"bitRate",value:0},this._currentVolume={name:"currentVolume",value:.5},this._docHidden={name:"docHidden",value:!1},this._fullscreen={name:"fullscreen",value:!1},this.attemptedPlay=!1,this.continousPlayChecked=!1,this.durationSet=!1,this.hasStarted=!1,this.hlsLoaded=!1,this.imaKickedOff=!1,this.adDisplayInitialized=!1,this.prerollDisabled=!1,this.playbackIndex=0,this.playCount=0,this.startuptime=0,this.videoPrefetched=!1,this.EVENTS={adStarted:"adStarted",adPlusComplete:"adPlusComplete",encoreComplete:"encoreComplete",metadata:"metadata",muteClick:"muteClick",pauseClick:"pauseClick",playClick:"playClick",playBackError:"playBackError",unmuteClick:"unmuteClick",seeked:"seeked",skip:"skip",timeChange:"timeChange",upNextClosed:"upNextClosed",upNextClicked:"upNextClicked",thirdQuartile:"thirdQuartile"}}resetState(){this.attemptedPlay=!1,this.bitRate=0,this.hasStarted=!1,this.imaKickedOff=!1,this.hlsLoaded=!1,this.durationSet=!1,this.continousPlayChecked=!1,this.playCount=0,this.startuptime=0}get bitRate(){return this._bitRate.value}set bitRate(t){this._bitRate.value=t,this._notifyMeta(this._bitRate.name,t)}get currentVolume(){return this._currentVolume.value}set currentVolume(t){this._currentVolume.value=t,this._notifyMeta(this._currentVolume.name,t)}get docHidden(){return this._docHidden.value}set docHidden(t){this._docHidden.value=t,this._notifyMeta(this._docHidden.name,t)}get fullscreen(){return this._fullscreen.value}set fullscreen(t){this._fullscreen.value=t,this._notifyMeta(this._fullscreen.name,t)}setVideoState(t){this._setState(this.controllers.VIDEO,t)}setPrerollState(t){this._setState(this.controllers.PREROLL,t)}get controllers(){return{VIDEO:"video",PREROLL:"preroll"}}get isPreroll(){return this.controller===this.controllers.PREROLL}get isMuted(){return 0===this.currentVolume}get isVideo(){return this.controller===this.controllers.VIDEO}get states(){return{DONE:"done",INITIALIZING:"initializing",LOADING:"loading",BUFFERING:"buffering",PAUSED:"paused",PLAYING:"playing",READY:"ready",STARTED:"started"}}get controller(){return this._controller}set controller(t){}get state(){return this._state}set state(t){}_setState(t,e){if(this._controller!==t||this._state!==e){if(!this.controllers[t.toUpperCase()])throw new Error(`${t} is not a valid controller`);if(!this.states[e.toUpperCase()])throw new Error(`${e} is not a valid state`);this._controller=t,this._state=e,this._notifyState(t,e)}}subscribe(t,e={STATE:!1,META:!1,EVENT:!1}){this._subscribers.push({sub:t,subs:e})}unsubscribe(t){this._subscribers=this._subscribers.filter(e=>e.sub!==t)}_notifyState(t,e){this._subscribers.forEach((s,i)=>{"function"==typeof s.subs.STATE&&s.subs.STATE.call(s.sub,{state:e,controller:t})})}_notifyMeta(t,e){this._subscribers.forEach((s,i)=>{"function"==typeof s.subs.META&&s.subs.META.call(s.sub,t,e)})}notifyEvent(t){this._subscribers.forEach((e,s)=>{"function"==typeof e.subs.EVENT&&e.subs.EVENT.call(e.sub,t)})}}class i{constructor(t={}){this.sm=new s(this.logger)}}window.Teal=window.Teal||{},window.Teal.Utils=e,window.Teal.History=[];window.Teal.Player=class extends i{constructor(e={container:"",video:"",adContainer:""},s={},i={},a={},n=!1){if(super(s),!a.mp4URL&&!a.hlsURL)throw new Error("a valid source is required for playback");this.elements=this._gatherElements(e),this.settings=function(t){const e={base:{autoplay:!1,debug:!1,defaultVolume:.5,loop:!1,placement:"teal",platform:"desktop",startedBy:"user",startMuted:!1,posterIO:"",closedCaption:!1},comscore:{enable:!1,load:!1,scriptUrl:"https://www.gannett-cdn.com/gannett-web/apps/teal/dist/vendor/comscore/streamsense-5.1.1.160316.min.js",c2:"6035223"},continuousPlay:{encore:!1,timeTillEnd:10,upNextCardEnabled:!1,upNextCardRequiredLength:30,countToRetrieve:3,encoreURL:"",encoreKey:"f6YYPA1hPnB9Y9chky5GOmrZKmaguLVh",assetURL:"",assetKey:"f6YYPA1hPnB9Y9chky5GOmrZKmaguLVh",backfill:!0,noOlderThan:"60d",maxVideoLength:180,finitePlaylist:!1},controls:{activeUserTimeout:3500,controlbarLeft:["play","mute","volumeSlider","timer"],controlbarRight:["skip","closedCaption","share","airplay","fullscreen"],enable:!1,enableBigPlayButton:!1,native:!1},share:{enableShareAPI:!1},heartbeat:{account:"globaldesktopmobilesite",appMeasurementScriptUrl:"https://www.gannett-cdn.com/gannett-web/apps/teal/dist/vendor/adobe/AppMeasurement-2.11.0.min.js",enable:!1,errorTracking:!0,debugLogging:!1,hbTrackingServer:"gannett.hb.omtrdc.net",load:!1,market:"",orgId:"CF4957F555EE9B727F000101@AdobeOrg",qosTracking:!0,scriptUrl:"https://www.gannett-cdn.com/gannett-web/apps/teal/dist/vendor/adobe/MediaSDK.2.2.0.min.js",trackingServer:"",trackingServerSecure:"",visitorScriptUrl:"https://www.gannett-cdn.com/gannett-web/apps/teal/dist/vendor/adobe/VisitorAPI-3.4.0.min.js"},hls:{enable:!1,excludeRenditions:!1,excludeRenditionsArray:["1080p_30fps,"],load:!1,maxBufferSize:1e6,maxMaxBufferLength:10,scriptUrl:"https://www.gannett-cdn.com/gannett-web/apps/teal/dist/vendor/hls/hls.1.2.8.min.js"},ias:{anId:"922805",enable:!1,load:!1,partner:"IMA",scriptUrl:"https://www.gannett-cdn.com/gannett-web/apps/teal/dist/vendor/ias/ias-3.5.1.min.js"},ima:{enable:!1,load:!1,requiredSkipAdLength:15,scriptUrl:"https://imasdk.googleapis.com/js/sdkloader/ima3.js",timeTillEnd:5,userWaitTime:15,accountId:7103,accountName:"usatoday",desktopSize:"920x508",mobileAccountName:"usatoday_mobile",mobilePlacement:"mobileweb-preroll",mobileSize:"1024x576",placement:"preroll_video",adPlusEnabled:!1,adPlusPlusEnabled:!1,adPlusCampaign:"continousplus1",adPlusMaxFailures:1,adPlusMaxRequests:2,adPlusRequiredPlays:1,gdprApplies:!1,targetingConsent:!1,tcString:"",prebidBids:[],a9Params:"",targetingConsent:!0,vpaidMode:"INSECURE"},nudge:{enable:!1,load:!1,scriptUrl:"https://www.gannett-cdn.com/gannett-web/apps/teal/dist/vendor/nudge/ndg-8205542976.min.js"},parsely:{enable:!1,load:!1,autoTrack:!0,scriptUrl:"https://cdn.parsely.com/keys/usatoday.com/p.js",platform:"TealPlayerDefault"},gcianalytics:{enable:!1,load:!1,scriptUrl:"https://www.gannett-cdn.com/dcjs/prod/main.js"},svg:{}};for(const[s,i]of Object.entries(t))Object.assign(e[s],i);return e}(s),this.pageData=function(t){return Object.assign({adTargeting:{customParams:{},simpleTarget:[]},adFreeExperience:!1,awsPath:"",baseName:"",displayName:"",keywords:"",pageType:"",publicationName:"",section:"",series:"",siteCode:"",subsection:"",subtopic:"",topic:"",variant:"",vfront:"",vfrontsec:"",twitter:"",anonymousId:"",benefitSegment:"",clientID:"",cohort:"",dynamicPaywallSegments:"",fireflyUserId:"",userLicenseType:"",userMeterState:"",userScroll:"",userType:""},t)}(i),this.originalVideo=this.data=this._excludeRenditions(t(a)),this.adDisplayContainer=n,this._init()}_gatherElements(t){if(!(t.container&&t.video&&t.adContainer))throw new Error("conatiner, video, and adContainer elements are required");if("string"==typeof t.container&&""!==t.container&&(t.container=document.getElementById(t.container)),"string"==typeof t.video&&""!==t.video&&(t.video=document.getElementById(t.video)),!t.video||"VIDEO"!==t.video.tagName)throw new Error("video element not found or is invalid");return"string"==typeof t.adContainer&&""!==t.adContainer&&(t.adContainer=document.getElementById(t.adContainer)),t}_init(){this.upNext=[],this.settings.base.autoplay&&(this.settings.base.startMuted=!0),this.sm.currentVolume=this.settings.base.startMuted?0:this.settings.base.defaultVolume,this._additionalSetup(),Promise.all(this._loadDependencies()).then(()=>this._ready()).catch(()=>this._ready()),this._setupGlobalListeners(),this._setupVideoListeners(),this._checkForBids(),this.sm.subscribe(this,{STATE:this._onStateChange,META:this._onMetaChange,EVENT:this._onEvent})}_ready(){this.sm.setVideoState(this.sm.states.READY),this.settings.base.autoplay&&this.play()}_onMetaChange(t,e){switch(t){case this.sm._docHidden.name:}}_onEvent(t){switch(t){case this.sm.EVENTS.skip:}}_onStateChange(t){t.state&&this._onStateChangeAll(t.state),t.controller===this.sm.controllers.PREROLL?this._onStateChangePreroll(t.state):t.controller===this.sm.controllers.VIDEO&&this._onStateChangeVideo(t.state)}_onStateChangeAll(t){switch(t){case this.sm.states.STARTED:this.sm.hasStarted=!0,this.sm.startuptime||(this.sm.startuptime=Teal.Utils.markEnd("startuptime")),this.setVolumeLevel(this.sm.currentVolume);break;case this.sm.states.PLAYING:this._setTimeInterval();break;case this.sm.states.PAUSED:this._clearTimeInterval()}}_onStateChangePreroll(t){switch(t){case this.sm.states.DONE:(!this.ima||this.ima&&!this.ima._supportsAdPlus)&&this._proceedToVideo();break;case this.sm.states.STARTED:this.elements.container.classList.add("teal-ad-playback")}}_onStateChangeVideo(t){switch(t){case this.sm.states.STARTED:-1===Teal.History.indexOf(this.data.id)&&Teal.History.push(this.data.id),this.sm.attemptedPlay=!0;break;case this.sm.states.PLAYING:this.elements.container.classList.remove("teal-ad-playback")}}_setupNext(){if(!this.encore||!this.encore.hasNext())return!1;const t=this._excludeRenditions(this.encore.getNext());return this.elements.video.src="",this.hls&&this.hls.destroy(),this.data=t,this._additionalSetup(),this.sm.videoPrefetched=!1,this._setPoster(),this._addSrc(),this.sm.docHidden||this._kickoff(),this.sm.playbackIndex++,!0}_setPoster(){this.ima&&this.encore&&!this.sm.docHidden&&this.elements.container.classList.add("teal-ad-playback");let t=this.data.videoStill||"";this.elements.video.poster=Teal.Utils.appendQSP(t,this.settings.base.posterIO)}_resetUI(){this.elements.video.loop||(this.elements.video.poster||this._setPoster(),this.elements.video.load())}_setupGlobalListeners(){Teal.Utils._registerEvents(this,[{event:"visibilitychange",handler:()=>{this._onVisibilitychange()}}],document)}_setupVideoListeners(){let t=[{event:"ended",handler:()=>{this._forVideo(this._onEnded)}},{event:"error",handler:()=>{this._forVideo(this._onError)}},{event:"loadeddata",handler:()=>{this._forVideo(this._onLoadedData)}},{event:"loadedmetadata",handler:()=>{this._forVideo(this._onLoadedMetadata)}},{event:"pause",handler:()=>{this._forVideo(this._onPause)}},{event:"play",handler:()=>{this._forVideo(this._onPlay)}},{event:"playing",handler:this._forVideo(()=>{this.sm.setVideoState(this.sm.states.PLAYING)})},{event:"seeked",handler:this._forVideo(()=>{this.sm.notifyEvent(this.sm.EVENTS.seeked),this.isVideoPaused?this.sm.setVideoState(this.sm.states.PAUSED):this.sm.setVideoState(this.sm.states.PLAYING)})},{event:"waiting",handler:this._forVideo(Teal.Utils.throttle(()=>{this.sm.setVideoState(this.sm.states.BUFFERING)},500))}];Teal.Utils._registerEvents(this,t,this.elements.video)}_forVideo(t){this.sm.isVideo&&t.call(this)}_checkForBids(){this.prebid(this.settings.ima.prebidBids),this.a9(this.settings.ima.a9Params)}_onEnded(){this.sm.setVideoState(this.sm.states.DONE),this.sm.resetState(),this.encore&&(this.encore.closeUpNext(),this.settings.continuousPlay.finitePlaylist&&!this.encore.hasNext()&&this.sm.notifyEvent(this.sm.EVENTS.encoreComplete)),this._setupNext()||this._resetUI()}_onError(){const t=this.elements.video.error;this.errorCode=t&&t.code||"",this.sm.notifyEvent(this.sm.EVENTS.playBackError)}_onLoadedData(){}_onLoadedMetadata(){this.sm.notifyEvent(this.sm.EVENTS.metadata)}_onPause(){this.sm.setVideoState(this.sm.states.PAUSED)}_onPlay(){this.sm.playCount||this.sm.setVideoState(this.sm.states.STARTED),this.sm.playCount++,this.sm.setVideoState(this.sm.states.PLAYING)}_onClickEvent(t){t&&this.ima&&this.ima._disableAdPlus()}_onVisibilitychange(){this.sm.hasStarted&&(document.hidden?(this.sm.docHidden=!0,this.prevState||(this.prevState=this.sm.state),this.isVideo?(this.sm.docHidden=!0,this.sm.setVideoState(this.prevState)):(this.sm.docHidden=!0,this.sm.setPrerollState(this.prevState))):(this.prevState="",this.sm.docHidden=!1))}_additionalSetup(){this.settings.base.loop&&(this.elements.video.loop=!0),this.isMuted&&(this.elements.video.muted=!0),this.settings.base.closedCaption&&this.data.hlsURL&&this.data.hlsURL.indexOf("subtitles")<0&&(this.data.hlsURL=Teal.Utils.appendQSP(this.data.hlsURL,"?subtitles="+this.data.id)),this.elements.video.title=this.data.title}_excludeRenditions(t){if(!this.settings.hls.excludeRenditions||!t.hlsURL)return t;let e=this.settings.hls.excludeRenditionsArray;if(e&&e.length)for(let s=0;s<e.length;s++)t.hlsURL=t.hlsURL.replace(e[s],"");return t}_loadDependencies(){return this._depPromises=[],this._loadHeartbeat(),this._loadIMA(),this._addSrc(),this._loadComscore(),this._loadControls(),this._loadNudge(),this._loadParsely(),this._loadGcianalytics(),this._depPromises}_addSrc(){this.settings.hls.enable&&this.data.hlsURL&&!Teal.Utils.UA.isIE11?Teal.Utils.UA.isIOS||Teal.Utils.UA.isSafari?this.elements.video.src=this.data.hlsURL:this._loadHLS():this.elements.video.src=this.data.mp4URL}_videoLoad(){!this.sm.hlsLoaded&&this.hls&&this.data.hlsURL?this.hlsCanPlayPromise=this.hls._videoLoad():this.elements.video.load()}_mp4Fallback(t=!1){this.data.mp4URL&&(this.elements.video.src=this.data.mp4URL,(t||this.sm.attemptedPlay)&&this._playVideo())}_playVideo(){try{if(this.sm.attemptedPlay=!0,this.hlsCanPlayPromise)return void this.hlsCanPlayPromise.then(()=>{this.elements.video.play()});this.elements.video.play()}catch(t){this.elements.video.src!==this.data.mp4URL?this._mp4Fallback(!0):window.g$&&g$.cc&&(t.m="video cannot be played",t.reportedBy="teal",g$.cc(t,"r2d2"))}}_proceedToVideo(){this.sm.setVideoState(this.sm.states.LOADING),this.sm.videoPrefetched||this._videoLoad(),this._playVideo()}_shouldPrefetch(){return!Teal.Utils.UA.isMobile&&!this.sm.videoPrefetched}_kickoff(){Teal.Utils.markStart("startuptime"),this.controls&&(this.controls.activeUser=!1),this.elements.video.load(),!this.adDisplayContainer&&this.settings.ima.enable&&!this.pageData.adFreeExperience&&window.google&&window.google.ima&&(this.adDisplayContainer=new google.ima.AdDisplayContainer(this.elements.adContainer,this.elements.video)),this.adDisplayContainer?(this.adDisplayContainer.initialize(),this.sm.adDisplayInitialized=!0):this.settings.base.startMuted||this._disablePreroll(),this.sm.prerollDisabled||this.sm.imaKickedOff||!this.data.adsEnabled?this._proceedToVideo():this.imaPromise.then(()=>{this.ima._kickoff()},()=>{this._proceedToVideo()})}_setTimeInterval(){this.timerInterval||(this.timerInterval=setInterval(()=>{this.sm.notifyEvent(this.sm.EVENTS.timeChange),this.isVideo&&!this.sm.continousPlayChecked&&this._checkContinousPlay(),this.isPreroll&&this._shouldPrefetch()&&!this.ima._supportsAdPlus&&this._callVideoLoad()},250))}_callVideoLoad(){this.ima.remainingTime<=this.settings.ima.timeTillEnd&&(this.sm.videoPrefetched=!0,this._videoLoad())}_clearTimeInterval(){this.timerInterval&&clearInterval(this.timerInterval),this.timerInterval=null}_checkContinousPlay(){let t=this.settings.continuousPlay;if(t.encore&&this.data.adsEnabled&&this.duration-this.currentTime<=t.timeTillEnd){this.sm.continousPlayChecked=!0;let t=this.encore?this.encore.processQueue():this._loadEncore();this.encore._supportsUpNextCard()&&t.then(()=>{this.encore.showUpNext()})}}get currentTime(){return this.elements.video.currentTime}get duration(){return this.elements.video.duration}get capiDuration(){return this.data.renditions&&this.data.renditions.length>0&&!isNaN(this.data.renditions[0].duration)&&this.data.renditions[0].duration>0&&this.data.renditions[0].duration?this.data.renditions[0].duration/1e3:this.data.duration?this.data.duration/1e3:this.data.length&&this.data.length>0?this.data.length:0}_loadControls(){this.settings.controls.enable&&(this.settings.controls.native?this.elements.video.controls=!0:window.Teal.Controls&&(this.controls=new window.Teal.Controls(this)))}_loadHeartbeat(){this.settings.heartbeat.enable&&this.settings.heartbeat.market&&this.settings.heartbeat.trackingServer&&this.settings.heartbeat.trackingServerSecure&&this._depPromises.push(new Promise((t,e)=>{this.hb=new window.Teal.Heartbeat(this,t)}))}_loadHLS(){this.settings.hls.enable&&this.data.hlsURL&&window.Teal.HLS&&(this.hls||this._depPromises.push(new Promise((t,e)=>{this.hls=new window.Teal.HLS(this,t)})))}_loadIMA(){this.settings.ima.enable&&!this.pageData.adFreeExperience?window.Teal.IMA&&(this.imaPromise=new Promise((t,e)=>{this.ima=new window.Teal.IMA(this,{resolve:t,reject:e})}),this._depPromises.push(this.imaPromise)):this._disablePreroll()}_loadNudge(){this.settings.nudge.enable&&window.Teal.Nudge&&this._depPromises.push(new Promise((t,e)=>{this.nudge=new window.Teal.Nudge(this,t)}))}_loadComscore(){this.settings.comscore.enable&&window.Teal.Comscore&&(this.comscore=new window.Teal.Comscore(this))}_loadParsely(){this.settings.parsely.enable&&window.Teal.Parsely&&(this.parsely=new window.Teal.Parsely(this))}_loadGcianalytics(){this.settings.gcianalytics.enable&&window.Teal.Gcianalytics&&(this.gcianalytics=new window.Teal.Gcianalytics(this))}_loadEncore(){return this.encore=new window.Teal.Encore(this),this.encore.processQueue()}_disablePreroll(){this.sm.prerollDisabled=!0}adResize(){this.isPreroll&&this.ima.adResize()}play(){this.sm.hasStarted?this.isVideo?this._playVideo():this.isPreroll&&this.ima._play():this._kickoff()}pause(){this.isVideo?this.elements.video.pause():this.isPreroll&&this.ima._pause()}mute(){this.sm.currentVolume&&(this.restoreVolume=this.sm.currentVolume),this.setVolumeLevel(0)}unmute(){this.setVolumeLevel(this.restoreVolume||this.settings.base.defaultVolume),this.restoreVolume=""}setVolumeLevel(t){this.elements.video.muted=0===t,this.sm.currentVolume=t,this.elements.video.volume=t,this.isPreroll&&this.ima._setVolume(t)}seek(t){this.isVideo&&(this.elements.video.currentTime=t)}togglePlayback(){this.sm.state!==this.sm.states.PAUSED&&this.sm.hasStarted?this.sm.state===this.sm.states.PLAYING&&(this.isVideo&&this.sm.notifyEvent(this.sm.EVENTS.pauseClick),this.pause()):(this.isVideo&&this.sm.notifyEvent(this.sm.EVENTS.playClick),this.play())}enterFullscreen(){this.isPreroll&&this.ima._adResize()}exitFullscreen(){this.isPreroll&&this.ima._adResize()}skip(){this.isPreroll&&this.ima.skip()}setPlacement(t){this.settings.base.placement=t}setNext(e=[]){this.settings.continuousPlay.encore&&(this.encore?e instanceof Array?this.encore.setNextPlaylist(e):this.encore.addVideo(e):e instanceof Array?this.upNext=this.upNext.concat(e):this.upNext.push(t(e)))}get state(){return this.sm.state}get controller(){return this.sm.controller}get isPreroll(){return this.sm.isPreroll&&this.ima}get isMuted(){return this.sm.isMuted}get isVideo(){return this.sm.isVideo}get isVideoPaused(){return this.elements.video.paused}get _adBreakState(){if(!this.ima||!this.data.adsEnabled||this.pageData.adFreeExperience)return"adsDisabled";let t=this.settings.ima.adPlusCampaign||"adplus";return this.settings.ima.adPlusEnabled&&this.ima.adCount?`preroll-${t}|adCount=${this.ima.adCount}`:"preroll"}get _playAction(){return this._recommendation?this._recommendation:"auto-first"===this.settings.base.startedBy||this.settings.base.autoplay?"autoplay":"user-initiated"}get _playbackState(){let t=this.isMuted?"muted":"unmuted";return`${this._playAction}|${t}|${this._adBreakState}|${this.settings.base.placement}`}get _recommendation(){let t="";return this.encore&&this.sm.playbackIndex>0&&(t="encore-autoplay"),t}prebid(t){this.imaPromise&&t&&t.length>0&&this.imaPromise.then(()=>{this.ima._setPrebidBids(t)})}a9(t){this.imaPromise&&t&&this.imaPromise.then(()=>{this.ima._setA9Params(t)})}},window.Teal.Player;window.Teal.Version="1.98.0"}();